/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

dojo._hasResource["dijit._base.manager"]||(dojo._hasResource["dijit._base.manager"]=!0,dojo.provide("dijit._base.manager"),dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(a){if(this._hash[a.id])throw Error("Tried to register widget with id=="+a.id+" but that id is already registered");this._hash[a.id]=a;this.length++},remove:function(a){this._hash[a]&&(delete this._hash[a],this.length--)},forEach:function(a,b){var b=b||dojo.global,c=0,d;for(d in this._hash)a.call(b,
this._hash[d],c++,this._hash);return this},filter:function(a,b){var b=b||dojo.global,c=new dijit.WidgetSet,d=0,e;for(e in this._hash){var f=this._hash[e];a.call(b,f,d++,this._hash)&&c.add(f)}return c},byId:function(a){return this._hash[a]},byClass:function(a){var b=new dijit.WidgetSet,c,d;for(c in this._hash)d=this._hash[c],d.declaredClass==a&&b.add(d);return b},toArray:function(){var a=[],b;for(b in this._hash)a.push(this._hash[b]);return a},map:function(a,b){return dojo.map(this.toArray(),a,b)},
every:function(a,b){var b=b||dojo.global,c=0,d;for(d in this._hash)if(!a.call(b,this._hash[d],c++,this._hash))return!1;return!0},some:function(a,b){var b=b||dojo.global,c=0,d;for(d in this._hash)if(a.call(b,this._hash[d],c++,this._hash))return!0;return!1}}),function(){dijit.registry=new dijit.WidgetSet;var a=dijit.registry._hash,b=dojo.attr,c=dojo.hasAttr,d=dojo.style;dijit.byId=function(b){return typeof b=="string"?a[b]:b};var e={};dijit.getUniqueId=function(b){var c;do c=b+"_"+(b in e?++e[b]:e[b]=
0);while(a[c]);return dijit._scopeName=="dijit"?c:dijit._scopeName+"_"+c};dijit.findWidgets=function(b){function c(b){for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType==1){var e=b.getAttribute("widgetId");e?(e=a[e])&&d.push(e):c(b)}}var d=[];c(b);return d};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})};dojo.isIE&&
dojo.addOnWindowUnload(function(){dijit._destroyAll()});dijit.byNode=function(b){return a[b.getAttribute("widgetId")]};dijit.getEnclosingWidget=function(b){for(;b;){var c=b.getAttribute&&b.getAttribute("widgetId");if(c)return a[c];b=b.parentNode}return null};var f=dijit._isElementShown=function(a){var c=d(a);return c.visibility!="hidden"&&c.visibility!="collapsed"&&c.display!="none"&&b(a,"type")!="hidden"};dijit.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return c(a,"href");
case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var d=a.contentDocument;if("designMode"in d&&d.designMode=="on")return!0;b=d.body}catch(e){try{b=a.contentWindow.document.body}catch(f){return!1}}return b.contentEditable=="true"||b.firstChild&&b.firstChild.contentEditable=="true";default:return a.contentEditable=="true"}};var g=dijit.isTabNavigable=function(a){return b(a,"disabled")?!1:c(a,"tabIndex")?b(a,"tabIndex")>=0:dijit.hasDefaultTabStop(a)};
dijit._getTabNavigable=function(a){function d(a){return a&&a.tagName.toLowerCase()=="input"&&a.type&&a.type.toLowerCase()=="radio"&&a.name&&a.name.toLowerCase()}var e,l,p,n,o,m,q={},r=function(a){dojo.query("> *",a).forEach(function(a){if(!(dojo.isIE&&a.scopeName!=="HTML")&&f(a)){if(g(a)){var h=b(a,"tabIndex");if(!c(a,"tabIndex")||h==0)e||(e=a),l=a;else if(h>0){if(!p||h<n)n=h,p=a;if(!o||h>=m)m=h,o=a}h=d(a);dojo.attr(a,"checked")&&h&&(q[h]=a)}a.nodeName.toUpperCase()!="SELECT"&&r(a)}})};f(a)&&r(a);
return{first:q[d(e)]||e,last:q[d(l)]||l,lowest:q[d(p)]||p,highest:q[d(o)]||o}};dijit.getFirstInTabbingOrder=function(a){a=dijit._getTabNavigable(dojo.byId(a));return a.lowest?a.lowest:a.first};dijit.getLastInTabbingOrder=function(a){a=dijit._getTabNavigable(dojo.byId(a));return a.last?a.last:a.highest};dijit.defaultDuration=dojo.config.defaultDuration||200}());
dojo._hasResource["dojo.Stateful"]||(dojo._hasResource["dojo.Stateful"]=!0,dojo.provide("dojo.Stateful"),dojo.declare("dojo.Stateful",null,{postscript:function(a){a&&dojo.mixin(this,a)},get:function(a){return this[a]},set:function(a,b){if(typeof a==="object"){for(var c in a)this.set(c,a[c]);return this}c=this[a];this[a]=b;this._watchCallbacks&&this._watchCallbacks(a,c,b);return this},watch:function(a,b){var c=this._watchCallbacks;if(!c)var d=this,c=this._watchCallbacks=function(a,b,e,j){var k=function(c){if(c)for(var c=
c.slice(),j=0,k=c.length;j<k;j++)try{c[j].call(d,a,b,e)}catch(o){console.error(o)}};k(c["_"+a]);j||k(c["*"])};!b&&typeof a==="function"?(b=a,a="*"):a="_"+a;var e=c[a];typeof e!=="object"&&(e=c[a]=[]);e.push(b);return{unwatch:function(){e.splice(dojo.indexOf(e,b),1)}}}}));
dojo._hasResource["dijit._WidgetBase"]||(dojo._hasResource["dijit._WidgetBase"]=!0,dojo.provide("dijit._WidgetBase"),function(){dojo.declare("dijit._WidgetBase",dojo.Stateful,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(a,b){this.create(a,b)},create:function(a,
b){this.srcNodeRef=dojo.byId(b);this._connects=[];this._subscribes=[];if(this.srcNodeRef&&typeof this.srcNodeRef.id=="string")this.id=this.srcNodeRef.id;if(a)this.params=a,dojo._mixin(this,a);this.postMixInProperties();if(!this.id)this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var c=this.srcNodeRef;c&&c.parentNode&&this.domNode!==c&&c.parentNode.replaceChild(this.domNode,c)}this.domNode&&this.domNode.setAttribute("widgetId",
this.id);this.postCreate();this.srcNodeRef&&!this.srcNodeRef.parentNode&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=function(a,b){(b.params&&a in b.params||b[a])&&b.set(a,b[a])},b;for(b in this.attributeMap)a(b,this);dojo.forEach(this._getSetterAttributes(),function(b){b in this.attributeMap||a(b,this)},this)},_getSetterAttributes:function(){var a=this.constructor;if(!a._setterAttrs){var b=a._setterAttrs=[],c,d=a.prototype,e;for(e in d)dojo.isFunction(d[e])&&(c=e.match(/^_set([a-zA-Z]*)Attr$/))&&
c[1]&&b.push(c[1].charAt(0).toLowerCase()+c[1].substr(1))}return a._setterAttrs},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=this.srcNodeRef||dojo.create("div");if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(dojo.map(a,function(a){return a+"Rtl"})));dojo.addClass(this.domNode,a)}},postCreate:function(){},startup:function(){this._started=!0},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);
this.destroy(a)},destroy:function(a){this._beingDestroyed=!0;this.uninitialize();var b=dojo,c=b.forEach,d=b.unsubscribe;c(this._connects,function(a){c(a,b.disconnect)});c(this._subscribes,function(a){d(a)});c(this._supportingWidgets||[],function(a){a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy()});this.destroyRendering(a);dijit.registry.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?dojo.removeAttr(this.domNode,
"widgetId"):dojo.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||dojo.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){dojo.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setClassAttr:function(a){dojo.replaceClass(this[this.attributeMap["class"]||"domNode"],a,this["class"]);this._set("class",a)},_setStyleAttr:function(a){var b=this[this.attributeMap.style||"domNode"];dojo.isObject(a)?
dojo.style(b,a):b.style.cssText?b.style.cssText+="; "+a:b.style.cssText=a;this._set("style",a)},_attrToDom:function(a,b){var c=this.attributeMap[a];dojo.forEach(dojo.isArray(c)?c:[c],function(c){var e=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":dojo.isFunction(b)&&(b=dojo.hitch(this,b));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;dojo.attr(e,c,b);break;case "innerText":e.innerHTML="";e.appendChild(dojo.doc.createTextNode(b));break;case "innerHTML":e.innerHTML=
b;break;case "class":dojo.replaceClass(e,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this[a]},set:function(a,b){if(typeof a==="object"){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);if(this[c.s])var d=this[c.s].apply(this,Array.prototype.slice.call(arguments,1));else a in this.attributeMap&&this._attrToDom(a,b),this._set(a,b);return d||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];
var c=a.charAt(0).toUpperCase()+a.substr(1);return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr"}},_set:function(a,b){var c=this[a];this[a]=b;this._watchCallbacks&&this._created&&b!==c&&this._watchCallbacks(a,c,b)},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[]},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):
[]},connect:function(a,b,c){a=[dojo._connect(a,b,this,c)];this._connects.push(a);return a},disconnect:function(a){for(var b=0;b<this._connects.length;b++)if(this._connects[b]==a){dojo.forEach(a,dojo.disconnect);this._connects.splice(b,1);break}},subscribe:function(a,b){var c=dojo.subscribe(a,this,b);this._subscribes.push(c);return c},unsubscribe:function(a){for(var b=0;b<this._subscribes.length;b++)if(this._subscribes[b]==a){dojo.unsubscribe(a);this._subscribes.splice(b,1);break}},isLeftToRight:function(){return this.dir?
this.dir=="ltr":dojo._isBodyLtr()},placeAt:function(a,b){a.declaredClass&&a.addChild?a.addChild(this,b):dojo.place(this.domNode,a,b);return this}})}());
if(!dojo._hasResource["dojo.window"])dojo._hasResource["dojo.window"]=!0,dojo.provide("dojo.window"),dojo.getObject("window",!0,dojo),dojo.window.getBox=function(){var a=dojo.doc.compatMode=="BackCompat"?dojo.body():dojo.doc.documentElement,b=dojo._docScroll();return{w:a.clientWidth,h:a.clientHeight,l:b.x,t:b.y}},dojo.window.get=function(a){if(dojo.isIE&&window!==document.parentWindow){a.parentWindow.execScript("document._parentWindow = window;","Javascript");var b=a._parentWindow;a._parentWindow=
null;return b}return a.parentWindow||a.defaultView},dojo.window.scrollIntoView=function(a,b){try{var a=dojo.byId(a),c=a.ownerDocument||dojo.doc,d=c.body||dojo.body(),e=c.documentElement||d.parentNode,f=dojo.isIE,g=dojo.isWebKit;if((!dojo.isMoz&&!f&&!g&&!dojo.isOpera||a==d||a==e)&&typeof a.scrollIntoView!="undefined")a.scrollIntoView(!1);else{var h=c.compatMode=="BackCompat",j=f>=9&&a.ownerDocument.parentWindow.frameElement?e.clientHeight>0&&e.clientWidth>0&&(d.clientHeight==0||d.clientWidth==0||d.clientHeight>
e.clientHeight||d.clientWidth>e.clientWidth)?e:d:h?d:e,c=g?d:j,k=j.clientWidth,l=j.clientHeight,p=!dojo._isBodyLtr(),n=b||dojo.position(a),o=a.parentNode,j=function(a){return f<=6||f&&h?!1:dojo.style(a,"position").toLowerCase()=="fixed"};if(!j(a))for(;o;){o==d&&(o=c);var m=dojo.position(o),q=j(o);if(o==c){m.w=k;m.h=l;c==e&&f&&p&&(m.x+=c.offsetWidth-m.w);if(m.x<0||!f)m.x=0;if(m.y<0||!f)m.y=0}else{var r=dojo._getPadBorderExtents(o);m.w-=r.w;m.h-=r.h;m.x+=r.l;m.y+=r.t;var s=o.clientWidth,u=m.w-s;if(s>
0&&u>0)m.w=s,m.x+=p&&(f||o.clientLeft>r.l)?u:0;s=o.clientHeight;u=m.h-s;if(s>0&&u>0)m.h=s}if(q){if(m.y<0)m.h+=m.y,m.y=0;if(m.x<0)m.w+=m.x,m.x=0;if(m.y+m.h>l)m.h=l-m.y;if(m.x+m.w>k)m.w=k-m.x}var v=n.x-m.x,w=n.y-Math.max(m.y,0),t=v+n.w-m.w,z=w+n.h-m.h;if(t*v>0){var x=Math[v<0?"max":"min"](v,t);if(p&&(f==8&&!h||f>=9))x=-x;n.x+=o.scrollLeft;o.scrollLeft+=x;n.x-=o.scrollLeft}z*w>0&&(n.y+=o.scrollTop,o.scrollTop+=Math[w<0?"max":"min"](w,z),n.y-=o.scrollTop);o=o!=c&&!q&&o.parentNode}}}catch(y){console.error("scrollIntoView: "+
y),a.scrollIntoView(!1)}};
dojo._hasResource["dijit._base.focus"]||(dojo._hasResource["dijit._base.focus"]=!0,dojo.provide("dijit._base.focus"),dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed},getBookmark:function(){var a,b,c=dojo.doc.selection,d=dijit._curFocus;if(dojo.global.getSelection){if(c=dojo.global.getSelection())if(c.isCollapsed){if(a=d?d.tagName:"")if(a=a.toLowerCase(),a=="textarea"||a=="input"&&(!d.type||d.type.toLowerCase()=="text"))return c={start:d.selectionStart,
end:d.selectionEnd,node:d,pRange:!0},{isCollapsed:c.end<=c.start,mark:c};a={isCollapsed:!0};if(c.rangeCount)a.mark=c.getRangeAt(0).cloneRange()}else b=c.getRangeAt(0),a={isCollapsed:!1,mark:b.cloneRange()}}else if(c){a=d?d.tagName:"";a=a.toLowerCase();if(d&&a&&(a=="button"||a=="textarea"||a=="input"))return c.type&&c.type.toLowerCase()=="none"?{isCollapsed:!0,mark:null}:(b=c.createRange(),{isCollapsed:b.text&&b.text.length?!1:!0,mark:{range:b,pRange:!0}});a={};try{b=c.createRange(),a.isCollapsed=
!(c.type=="Text"?b.htmlText.length:b.length)}catch(e){return a.isCollapsed=!0,a}if(c.type.toUpperCase()=="CONTROL")if(b.length){a.mark=[];c=0;for(d=b.length;c<d;)a.mark.push(b.item(c++))}else a.isCollapsed=!0,a.mark=null;else a.mark=b.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return a},moveToBookmark:function(a){var b=dojo.doc;if(a=a.mark)if(dojo.global.getSelection)(b=dojo.global.getSelection())&&b.removeAllRanges?a.pRange?(b=a.node,b.selectionStart=
a.start,b.selectionEnd=a.end):(b.removeAllRanges(),b.addRange(a)):console.warn("No idea how to restore selection for this browser!");else if(b.selection&&a){var c;a.pRange?c=a.range:dojo.isArray(a)?(c=b.body.createControlRange(),dojo.forEach(a,function(a){c.addElement(a)})):(c=b.body.createTextRange(),c.moveToBookmark(a));c.select()}},getFocus:function(a,b){var c=!dijit._curFocus||a&&dojo.isDescendant(dijit._curFocus,a.domNode)?dijit._prevFocus:dijit._curFocus;return{node:c,bookmark:c==dijit._curFocus&&
dojo.withGlobal(b||dojo.global,dijit.getBookmark),openedForWindow:b}},focus:function(a){if(a){var b="node"in a?a.node:a,c=a.bookmark,a=a.openedForWindow,d=c?c.isCollapsed:!1;if(b){var e=b.tagName.toLowerCase()=="iframe"?b.contentWindow:b;if(e&&e.focus)try{e.focus()}catch(f){}dijit._onFocusNode(b)}if(c&&dojo.withGlobal(a||dojo.global,dijit.isCollapsed)&&!d){a&&a.focus();try{dojo.withGlobal(a||dojo.global,dijit.moveToBookmark,null,[c])}catch(g){}}}},_activeStack:[],registerIframe:function(a){return dijit.registerWin(a.contentWindow,
a)},unregisterIframe:function(a){dijit.unregisterWin(a)},registerWin:function(a,b){var c=function(a){dijit._justMouseDowned=!0;setTimeout(function(){dijit._justMouseDowned=!1},0);if(!dojo.isIE||!a||!(a.srcElement&&a.srcElement.parentNode==null))dijit._onTouchNode(b||a.target||a.srcElement,"mouse")},d=dojo.isIE?a.document.documentElement:a.document;if(d)if(dojo.isIE){a.document.body.attachEvent("onmousedown",c);var e=function(a){a.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(a.srcElement)?
dijit._onFocusNode(b||a.srcElement):dijit._onTouchNode(b||a.srcElement)};d.attachEvent("onactivate",e);var f=function(a){dijit._onBlurNode(b||a.srcElement)};d.attachEvent("ondeactivate",f);return function(){a.document.detachEvent("onmousedown",c);d.detachEvent("onactivate",e);d.detachEvent("ondeactivate",f);d=null}}else{d.body.addEventListener("mousedown",c,!0);var g=function(a){dijit._onFocusNode(b||a.target)};d.addEventListener("focus",g,!0);var h=function(a){dijit._onBlurNode(b||a.target)};d.addEventListener("blur",
h,!0);return function(){d.body.removeEventListener("mousedown",c,!0);d.removeEventListener("focus",g,!0);d.removeEventListener("blur",h,!0);d=null}}},unregisterWin:function(a){a&&a()},_onBlurNode:function(){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(!dijit._justMouseDowned)dijit._clearActiveWidgetsTimer&&clearTimeout(dijit._clearActiveWidgetsTimer),dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null},100)},
_onTouchNode:function(a,b){dijit._clearActiveWidgetsTimer&&(clearTimeout(dijit._clearActiveWidgetsTimer),delete dijit._clearActiveWidgetsTimer);var c=[];try{for(;a;){var d=dojo.attr(a,"dijitPopupParent");if(d)a=dijit.byId(d).domNode;else if(a.tagName&&a.tagName.toLowerCase()=="body"){if(a===dojo.body())break;a=dojo.window.get(a.ownerDocument).frameElement}else{var e=a.getAttribute&&a.getAttribute("widgetId"),f=e&&dijit.byId(e);f&&!(b=="mouse"&&f.get("disabled"))&&c.unshift(e);a=a.parentNode}}}catch(g){}dijit._setStack(c,
b)},_onFocusNode:function(a){if(a&&a.nodeType!=9&&(dijit._onTouchNode(a),a!=dijit._curFocus)){if(dijit._curFocus)dijit._prevFocus=dijit._curFocus;dijit._curFocus=a;dojo.publish("focusNode",[a])}},_setStack:function(a,b){var c=dijit._activeStack;dijit._activeStack=a;for(var d=0;d<Math.min(c.length,a.length);d++)if(c[d]!=a[d])break;for(var e,f=c.length-1;f>=d;f--)if(e=dijit.byId(c[f]))e._focused=!1,e.set("focused",!1),e._hasBeenBlurred=!0,e._onBlur&&e._onBlur(b),dojo.publish("widgetBlur",[e,b]);for(f=
d;f<a.length;f++)if(e=dijit.byId(a[f]))e._focused=!0,e.set("focused",!0),e._onFocus&&e._onFocus(b),dojo.publish("widgetFocus",[e,b])}}),dojo.addOnLoad(function(){var a=dijit.registerWin(window);dojo.isIE&&dojo.addOnWindowUnload(function(){dijit.unregisterWin(a);a=null})}));
if(!dojo._hasResource["dojo.AdapterRegistry"])dojo._hasResource["dojo.AdapterRegistry"]=!0,dojo.provide("dojo.AdapterRegistry"),dojo.AdapterRegistry=function(a){this.pairs=[];this.returnWrappers=a||!1},dojo.extend(dojo.AdapterRegistry,{register:function(a,b,c,d,e){this.pairs[e?"unshift":"push"]([a,b,c,d])},match:function(){for(var a=0;a<this.pairs.length;a++){var b=this.pairs[a];if(b[1].apply(this,arguments))return b[3]||this.returnWrappers?b[2]:b[2].apply(this,arguments)}throw Error("No match found");
},unregister:function(a){for(var b=0;b<this.pairs.length;b++)if(this.pairs[b][0]==a)return this.pairs.splice(b,1),!0;return!1}});
if(!dojo._hasResource["dijit._base.place"])dojo._hasResource["dijit._base.place"]=!0,dojo.provide("dijit._base.place"),dijit.getViewport=function(){return dojo.window.getBox()},dijit.placeOnScreen=function(a,b,c,d){c=dojo.map(c,function(a){var c={corner:a,pos:{x:b.x,y:b.y}};d&&(c.pos.x+=a.charAt(1)=="L"?d.x:-d.x,c.pos.y+=a.charAt(0)=="T"?d.y:-d.y);return c});return dijit._place(a,c)},dijit._place=function(a,b,c,d){var e=dojo.window.getBox();(!a.parentNode||String(a.parentNode.tagName).toLowerCase()!=
"body")&&dojo.body().appendChild(a);var f=null;dojo.some(b,function(b){var g=b.corner,k=b.pos,l=0,p={w:g.charAt(1)=="L"?e.l+e.w-k.x:k.x-e.l,h:g.charAt(1)=="T"?e.t+e.h-k.y:k.y-e.t};c&&(l=c(a,b.aroundCorner,g,p,d),l=typeof l=="undefined"?0:l);var n=a.style,o=n.display,m=n.visibility;n.visibility="hidden";n.display="";var q=dojo.marginBox(a);n.display=o;n.visibility=m;n=Math.max(e.l,g.charAt(1)=="L"?k.x:k.x-q.w);o=Math.max(e.t,g.charAt(0)=="T"?k.y:k.y-q.h);m=Math.min(e.l+e.w,g.charAt(1)=="L"?n+q.w:k.x);
k=Math.min(e.t+e.h,g.charAt(0)=="T"?o+q.h:k.y);m-=n;k-=o;l+=q.w-m+(q.h-k);if(f==null||l<f.overflow)f={corner:g,aroundCorner:b.aroundCorner,x:n,y:o,w:m,h:k,overflow:l,spaceAvailable:p};return!l});f.overflow&&c&&c(a,f.aroundCorner,f.corner,f.spaceAvailable,d);var b=dojo._isBodyLtr(),g=a.style;g.top=f.y+"px";g[b?"left":"right"]=(b?f.x:e.w-f.x-f.w)+"px";return f},dijit.placeOnScreenAroundNode=function(a,b,c,d){b=dojo.byId(b);b=dojo.position(b,!0);return dijit._placeOnScreenAroundRect(a,b.x,b.y,b.w,b.h,
c,d)},dijit.placeOnScreenAroundRectangle=function(a,b,c,d){return dijit._placeOnScreenAroundRect(a,b.x,b.y,b.width,b.height,c,d)},dijit._placeOnScreenAroundRect=function(a,b,c,d,e,f,g){var h=[],j;for(j in f)h.push({aroundCorner:j,corner:f[j],pos:{x:b+(j.charAt(1)=="L"?0:d),y:c+(j.charAt(0)=="T"?0:e)}});return dijit._place(a,h,g,{w:d,h:e})},dijit.placementRegistry=new dojo.AdapterRegistry,dijit.placementRegistry.register("node",function(a,b){return typeof b=="object"&&typeof b.offsetWidth!="undefined"&&
typeof b.offsetHeight!="undefined"},dijit.placeOnScreenAroundNode),dijit.placementRegistry.register("rect",function(a,b){return typeof b=="object"&&"x"in b&&"y"in b&&"width"in b&&"height"in b},dijit.placeOnScreenAroundRectangle),dijit.placeOnScreenAroundElement=function(a,b,c,d){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments)},dijit.getPopupAroundAlignment=function(a,b){var c={};dojo.forEach(a,function(a){switch(a){case "after":c[b?"BR":"BL"]=b?"BL":"BR";break;case "before":c[b?
"BL":"BR"]=b?"BR":"BL";break;case "below-alt":b=!b;case "below":c[b?"BL":"BR"]=b?"TL":"TR";c[b?"BR":"BL"]=b?"TR":"TL";break;case "above-alt":b=!b;default:c[b?"TL":"TR"]=b?"BL":"BR",c[b?"TR":"TL"]=b?"BR":"BL"}});return c};if(!dojo._hasResource["dijit._base.window"])dojo._hasResource["dijit._base.window"]=!0,dojo.provide("dijit._base.window"),dijit.getDocumentWindow=function(a){return dojo.window.get(a)};
if(!dojo._hasResource["dijit._base.popup"])dojo._hasResource["dijit._base.popup"]=!0,dojo.provide("dijit._base.popup"),dijit.popup={_stack:[],_beginZIndex:1E3,_idGen:1,_createWrapper:function(a){var b=a.declaredClass?a._popupWrapper:a.parentNode&&dojo.hasClass(a.parentNode,"dijitPopup"),c=a.domNode||a;if(!b&&(b=dojo.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},dojo.body()),b.appendChild(c),c=c.style,c.display="",c.visibility="",c.position="",c.top="0px",a.declaredClass))a._popupWrapper=
b,dojo.connect(a,"destroy",function(){dojo.destroy(b);delete a._popupWrapper});return b},moveOffScreen:function(a){a=this._createWrapper(a);dojo.style(a,{visibility:"hidden",top:"-9999px",display:""})},hide:function(a){a=this._createWrapper(a);dojo.style(a,"display","none")},getTopPopup:function(){for(var a=this._stack,b=a.length-1;b>0&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(a){for(var b=this._stack,c=a.popup,d=a.orient||((a.parent?a.parent.isLeftToRight():dojo._isBodyLtr())?
{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"}),e=a.around,f=a.around&&a.around.id?a.around.id+"_dropdown":"popup_"+this._idGen++;b.length&&(!a.parent||!dojo.isDescendant(a.parent.domNode,b[b.length-1].widget.domNode));)dijit.popup.close(b[b.length-1].widget);var g=this._createWrapper(c);dojo.attr(g,{id:f,style:{zIndex:this._beginZIndex+b.length},"class":"dijitPopup "+(c.baseClass||c["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:a.parent?a.parent.id:""});if((dojo.isIE||
dojo.isMoz)&&!c.bgIframe)c.bgIframe=new dijit.BackgroundIframe(g);d=e?dijit.placeOnScreenAroundElement(g,e,d,c.orient?dojo.hitch(c,"orient"):null):dijit.placeOnScreen(g,a,d=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],a.padding);g.style.display="";g.style.visibility="visible";c.domNode.style.visibility="visible";e=[];e.push(dojo.connect(g,"onkeypress",this,function(b){if(b.charOrCode==dojo.keys.ESCAPE&&a.onCancel)dojo.stopEvent(b),a.onCancel();else if(b.charOrCode===dojo.keys.TAB&&(dojo.stopEvent(b),
(b=this.getTopPopup())&&b.onCancel))b.onCancel()}));c.onCancel&&e.push(dojo.connect(c,"onCancel",a.onCancel));e.push(dojo.connect(c,c.onExecute?"onExecute":"onChange",this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()}));b.push({widget:c,parent:a.parent,onExecute:a.onExecute,onCancel:a.onCancel,onClose:a.onClose,handlers:e});if(c.onOpen)c.onOpen(d);return d},close:function(a){for(var b=this._stack;a&&dojo.some(b,function(b){return b.widget==a})||!a&&b.length;){var c=b.pop(),
d=c.widget,e=c.onClose;if(d.onClose)d.onClose();dojo.forEach(c.handlers,dojo.disconnect);d&&d.domNode&&this.hide(d);e&&e()}}},dijit._frames=new function(){var a=[];this.pop=function(){var b;a.length?(b=a.pop(),b.style.display=""):(dojo.isIE<9?(b="<iframe src='"+(dojo.config.dojoBlankHtmlUrl||dojo.moduleUrl("dojo","resources/blank.html")+""||'javascript:""')+"' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",b=dojo.doc.createElement(b)):(b=dojo.create("iframe"),
b.src='javascript:""',b.className="dijitBackgroundIframe",dojo.style(b,"opacity",0.1)),b.tabIndex=-1,dijit.setWaiRole(b,"presentation"));return b};this.push=function(b){b.style.display="none";a.push(b)}},dijit.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(dojo.isIE||dojo.isMoz){var b=this.iframe=dijit._frames.pop();a.appendChild(b);dojo.isIE<7||dojo.isQuirks?(this.resize(a),this._conn=dojo.connect(a,"onresize",this,function(){this.resize(a)})):dojo.style(b,{width:"100%",height:"100%"})}},
dojo.extend(dijit.BackgroundIframe,{resize:function(a){this.iframe&&dojo.style(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){if(this._conn)dojo.disconnect(this._conn),this._conn=null;this.iframe&&(dijit._frames.push(this.iframe),delete this.iframe)}});if(!dojo._hasResource["dijit._base.scroll"])dojo._hasResource["dijit._base.scroll"]=!0,dojo.provide("dijit._base.scroll"),dijit.scrollIntoView=function(a,b){dojo.window.scrollIntoView(a,b)};
dojo._hasResource["dojo.uacss"]||(dojo._hasResource["dojo.uacss"]=!0,dojo.provide("dojo.uacss"),function(){var a=dojo,b=a.doc.documentElement,c=a.isIE,d=a.isOpera,e=Math.floor,f=a.isFF,g=a.boxModel.replace(/-/,""),c={dj_ie:c,dj_ie6:e(c)==6,dj_ie7:e(c)==7,dj_ie8:e(c)==8,dj_ie9:e(c)==9,dj_quirks:a.isQuirks,dj_iequirks:c&&a.isQuirks,dj_opera:d,dj_khtml:a.isKhtml,dj_webkit:a.isWebKit,dj_safari:a.isSafari,dj_chrome:a.isChrome,dj_gecko:a.isMozilla,dj_ff3:e(f)==3};c["dj_"+g]=!0;var h="",j;for(j in c)c[j]&&
(h+=j+" ");b.className=a.trim(b.className+" "+h);dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){var c="dj_rtl dijitRtl "+h.replace(/ /g,"-rtl ");b.className=a.trim(b.className+" "+c)}})}());dojo._hasResource["dijit._base.sniff"]||(dojo._hasResource["dijit._base.sniff"]=!0,dojo.provide("dijit._base.sniff"));
if(!dojo._hasResource["dijit._base.typematic"])dojo._hasResource["dijit._base.typematic"]=!0,dojo.provide("dijit._base.typematic"),dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout)},
trigger:function(a,b,c,d,e,f,g,h){if(e!=this._obj)this.stop(),this._initialDelay=g||500,this._subsequentDelay=f||0.9,this._minDelay=h||10,this._obj=e,this._evt=a,this._node=c,this._count=this._currentTimeout=-1,this._callback=dojo.hitch(b,d),this._fireEventAndReload(),this._evt=dojo.mixin({faux:!0},a)},stop:function(){if(this._timer)clearTimeout(this._timer),this._timer=null;if(this._obj)this._callback(-1,this._node,this._evt),this._obj=null},addKeyListener:function(a,b,c,d,e,f,g){if(b.keyCode)b.charOrCode=
b.keyCode,dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");else if(b.charCode)b.charOrCode=String.fromCharCode(b.charCode),dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");return[dojo.connect(a,"onkeypress",this,function(h){h.charOrCode==b.charOrCode&&(b.ctrlKey===void 0||b.ctrlKey==h.ctrlKey)&&(b.altKey===void 0||b.altKey==h.altKey)&&(b.metaKey===
void 0||b.metaKey==(h.metaKey||!1))&&(b.shiftKey===void 0||b.shiftKey==h.shiftKey)?(dojo.stopEvent(h),dijit.typematic.trigger(h,c,a,d,b,e,f,g)):dijit.typematic._obj==b&&dijit.typematic.stop()}),dojo.connect(a,"onkeyup",this,function(){dijit.typematic._obj==b&&dijit.typematic.stop()})]},addMouseListener:function(a,b,c,d,e,f){var g=dojo.connect;return[g(a,"mousedown",this,function(g){dojo.stopEvent(g);dijit.typematic.trigger(g,b,a,c,a,d,e,f)}),g(a,"mouseup",this,function(a){dojo.stopEvent(a);dijit.typematic.stop()}),
g(a,"mouseout",this,function(a){dojo.stopEvent(a);dijit.typematic.stop()}),g(a,"mousemove",this,function(a){a.preventDefault()}),g(a,"dblclick",this,function(g){dojo.stopEvent(g);dojo.isIE&&(dijit.typematic.trigger(g,b,a,c,a,d,e,f),setTimeout(dojo.hitch(this,dijit.typematic.stop),50))})]},addListener:function(a,b,c,d,e,f,g,h){return this.addKeyListener(b,c,d,e,f,g,h).concat(this.addMouseListener(a,d,e,f,g,h))}};
if(!dojo._hasResource["dijit._base.wai"])dojo._hasResource["dijit._base.wai"]=!0,dojo.provide("dijit._base.wai"),dijit.wai={onload:function(){var a=dojo.create("div",{id:"a11yTestNode",style:{cssText:'border: 1px solid;border-color:red green;position: absolute;height: 5px;top: -999px;background-image: url("'+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+'");'}},dojo.body()),b=dojo.getComputedStyle(a);if(b){var c=b.backgroundImage;dojo[b.borderTopColor==b.borderRightColor||c!=
null&&(c=="none"||c=="url(invalid-url:)")?"addClass":"removeClass"](dojo.body(),"dijit_a11y");dojo.isIE?a.outerHTML="":dojo.body().removeChild(a)}}},(dojo.isIE||dojo.isMoz)&&dojo._loaders.unshift(dijit.wai.onload),dojo.mixin(dijit,{hasWaiRole:function(a,b){var c=this.getWaiRole(a);return b?c.indexOf(b)>-1:c.length>0},getWaiRole:function(a){return dojo.trim((dojo.attr(a,"role")||"").replace("wairole:",""))},setWaiRole:function(a,b){dojo.attr(a,"role",b)},removeWaiRole:function(a,b){var c=dojo.attr(a,
"role");c&&(b?(c=dojo.trim((" "+c+" ").replace(" "+b+" "," ")),dojo.attr(a,"role",c)):a.removeAttribute("role"))},hasWaiState:function(a,b){return a.hasAttribute?a.hasAttribute("aria-"+b):!!a.getAttribute("aria-"+b)},getWaiState:function(a,b){return a.getAttribute("aria-"+b)||""},setWaiState:function(a,b,c){a.setAttribute("aria-"+b,c)},removeWaiState:function(a,b){a.removeAttribute("aria-"+b)}});dojo._hasResource["dijit._base"]||(dojo._hasResource["dijit._base"]=!0,dojo.provide("dijit._base"));
if(!dojo._hasResource["dijit._Widget"])dojo._hasResource["dijit._Widget"]=!0,dojo.provide("dijit._Widget"),dojo.connect(dojo,"_connect",function(a,b){a&&dojo.isFunction(a._onConnect)&&a._onConnect(b)}),dijit._connectOnUseEventHandler=function(){},dijit._lastKeyDownNode=null,dojo.isIE?function(){var a=function(a){dijit._lastKeyDownNode=a.srcElement};dojo.doc.attachEvent("onkeydown",a);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",a)})}():dojo.doc.addEventListener("keydown",function(a){dijit._lastKeyDownNode=
a.target},!0),function(){dojo.declare("dijit._Widget",dijit._WidgetBase,{_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,
onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,create:function(a,b){this._deferredConnects=dojo.clone(this._deferredConnects);for(var c in this.attributeMap)delete this._deferredConnects[c];for(c in this._deferredConnects)this[c]!==dijit._connectOnUseEventHandler&&delete this._deferredConnects[c];
this.inherited(arguments);if(this.domNode)for(c in this.params)this._onConnect(c)},_onConnect:function(a){a in this._deferredConnects&&(this.connect(this[this._deferredConnects[a]||"domNode"],a.toLowerCase(),a),delete this._deferredConnects[a])},focused:!1,isFocusable:function(){return this.focus&&dojo.style(this.domNode,"display")!="none"},onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},setAttribute:function(a,b){dojo.deprecated(this.declaredClass+
"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){if(dojo.config.isDebug){var c=arguments.callee._ach||(arguments.callee._ach={}),d=(arguments.callee.caller||"unknown caller").toString();c[d]||(dojo.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+d,"","2.0"),c[d]=!0)}return arguments.length>=2||typeof a==="object"?this.set.apply(this,arguments):this.get(a)},nodesWithKeyClick:["input","button"],
connect:function(a,b,c){var d=dojo,e=d._connect,f=this.inherited(arguments,[a,b=="ondijitclick"?"onclick":b,c]);if(b=="ondijitclick"&&d.indexOf(this.nodesWithKeyClick,a.nodeName.toLowerCase())==-1){var g=d.hitch(this,c);f.push(e(a,"onkeydown",this,function(b){if((b.keyCode==d.keys.ENTER||b.keyCode==d.keys.SPACE)&&!b.ctrlKey&&!b.shiftKey&&!b.altKey&&!b.metaKey)dijit._lastKeyDownNode=b.target,"openDropDown"in this&&a==this._buttonNode||b.preventDefault()}),e(a,"onkeyup",this,function(a){if((a.keyCode==
d.keys.ENTER||a.keyCode==d.keys.SPACE)&&a.target==dijit._lastKeyDownNode&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey)return dijit._lastKeyDownNode=null,g(a)}))}return f},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}})}();
if(!dojo._hasResource["dojo.string"])dojo._hasResource["dojo.string"]=!0,dojo.provide("dojo.string"),dojo.getObject("string",!0,dojo),dojo.string.rep=function(a,b){if(b<=0||!a)return"";for(var c=[];;){b&1&&c.push(a);if(!(b>>=1))break;a+=a}return c.join("")},dojo.string.pad=function(a,b,c,d){c||(c="0");a=String(a);b=dojo.string.rep(c,Math.ceil((b-a.length)/c.length));return d?a+b:b+a},dojo.string.substitute=function(a,b,c,d){d=d||dojo.global;c=c?dojo.hitch(d,c):function(a){return a};return a.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,
function(a,f,g){a=dojo.getObject(f,!1,b);g&&(a=dojo.getObject(g,!1,d).call(d,a,f));return c(a,f).toString()})},dojo.string.trim=String.prototype.trim?dojo.trim:function(a){for(var a=a.replace(/^\s+/,""),b=a.length-1;b>=0;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a};
if(!dojo._hasResource["dojo.date.stamp"])dojo._hasResource["dojo.date.stamp"]=!0,dojo.provide("dojo.date.stamp"),dojo.getObject("date.stamp",!0,dojo),dojo.date.stamp.fromISOString=function(a,b){if(!dojo.date.stamp._isoRegExp)dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;var c=dojo.date.stamp._isoRegExp.exec(a),d=null;if(c){c.shift();c[1]&&c[1]--;c[6]&&(c[6]*=1E3);b&&(b=new Date(b),dojo.forEach(dojo.map(["FullYear",
"Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(a){return b["get"+a]()}),function(a,b){c[b]=c[b]||a}));d=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||0,c[5]||0,c[6]||0);c[0]<100&&d.setFullYear(c[0]||1970);var e=0,f=c[7]&&c[7].charAt(0);f!="Z"&&(e=(c[8]||0)*60+(Number(c[9])||0),f!="-"&&(e*=-1));f&&(e-=d.getTimezoneOffset());e&&d.setTime(d.getTime()+e*6E4)}return d},dojo.date.stamp.toISOString=function(a,b){var c=function(a){return a<10?"0"+a:a},b=b||{},d=[],e=b.zulu?"getUTC":
"get",f="";b.selector!="time"&&(f=a[e+"FullYear"](),f=["0000".substr((f+"").length)+f,c(a[e+"Month"]()+1),c(a[e+"Date"]())].join("-"));d.push(f);if(b.selector!="date"){f=[c(a[e+"Hours"]()),c(a[e+"Minutes"]()),c(a[e+"Seconds"]())].join(":");e=a[e+"Milliseconds"]();b.milliseconds&&(f+="."+(e<100?"0":"")+c(e));if(b.zulu)f+="Z";else if(b.selector!="time"){var e=a.getTimezoneOffset(),g=Math.abs(e);f+=(e>0?"-":"+")+c(Math.floor(g/60))+":"+c(g%60)}d.push(f)}return d.join("T")};
if(!dojo._hasResource["dojo.parser"])dojo._hasResource["dojo.parser"]=!0,dojo.provide("dojo.parser"),dojo.parser=new function(){function a(a,b){switch(b){case "string":return a;case "number":return a.length?Number(a):NaN;case "boolean":return typeof a=="boolean"?a:a.toLowerCase()!="false";case "function":d.isFunction(a)&&(a=a.toString(),a=d.trim(a.substring(a.indexOf("{")+1,a.length-1)));try{return a===""||a.search(/[^\w\.]+/i)!=-1?new Function(a):d.getObject(a,!1)||new Function(a)}catch(c){return new Function}case "array":return a?
a.split(/\s*,\s*/):[];case "date":switch(a){case "":return new Date("");case "now":return new Date;default:return d.date.stamp.fromISOString(a)}case "url":return d.baseUrl+a;default:return d.fromJson(a)}}function b(a,b){for(var c in a)if(c.charAt(0)!="_"&&!(c in e)){var f=b,l=c,p;p=a[c];p=d.isString(p)?"string":typeof p=="number"?"number":typeof p=="boolean"?"boolean":d.isFunction(p)?"function":d.isArray(p)?"array":p instanceof Date?"date":p instanceof d._Url?"url":"object";f[l]=p}return b}function c(a,
c){var e=f[a];if(e){if(!c&&!e.params)e.params=b(e.cls.prototype,{})}else{var e=d.getObject(a),k=null;if(!e)return null;c||(k=b(e.prototype,{}));e={cls:e,params:k}}return e}var d=dojo,e={},f={};d.connect(d,"extend",function(){f={}});this._functionFromScript=function(a,b){var c="",e="",f=a.getAttribute(b+"args")||a.getAttribute("args");f&&d.forEach(f.split(/\s*,\s*/),function(a,b){c+="var "+a+" = arguments["+b+"]; "});(f=a.getAttribute("with"))&&f.length&&d.forEach(f.split(/\s*,\s*/),function(a){c+=
"with("+a+"){";e+="}"});return new Function(c+a.innerHTML+e)};this.instantiate=function(b,e,f){var k=[],e=e||{},f=f||{},l=(f.scope||d._scopeName)+"Type",p="data-"+(f.scope||d._scopeName)+"-";d.forEach(b,function(b){if(b){var g,m,q,r,s,u;b.node?(g=b.node,m=b.type,u=b.fastpath,r=(q=b.clsInfo||m&&c(m,u))&&q.cls,s=b.scripts):(g=b,s=(r=(q=(m=l in e?e[l]:g.getAttribute(l))&&c(m))&&q.cls)&&(r._noScript||r.prototype._noScript)?[]:d.query("> script[type^='dojo/']",g));if(!q)throw Error("Could not load class '"+
m);var v={};f.defaults&&d._mixin(v,f.defaults);b.inherited&&d._mixin(v,b.inherited);if(u){if((q=g.getAttribute(p+"props"))&&q.length)try{q=d.fromJson.call(f.propsThis,"{"+q+"}"),d._mixin(v,q)}catch(w){throw Error(w.toString()+" in data-dojo-props='"+q+"'");}if(q=g.getAttribute(p+"attach-point"))v.dojoAttachPoint=q;if(q=g.getAttribute(p+"attach-event"))v.dojoAttachEvent=q;dojo.mixin(v,e)}else{var b=g.attributes,t;for(t in q.params)if((m=t in e?{value:e[t],specified:!0}:b.getNamedItem(t))&&(m.specified||
dojo.isIE&&t.toLowerCase()=="value")){m=m.value;switch(t){case "class":m="className"in e?e.className:g.className;break;case "style":m="style"in e?e.style:g.style&&g.style.cssText}u=q.params[t];v[t]=typeof m=="string"?a(m,u):m}}var z=[],x=[];d.forEach(s,function(a){g.removeChild(a);var b=a.getAttribute(p+"event")||a.getAttribute("event"),c=a.getAttribute("type"),a=d.parser._functionFromScript(a,p);b?c=="dojo/connect"?z.push({event:b,func:a}):v[b]=a:x.push(a)});var y=(s=r.markupFactory||r.prototype&&
r.prototype.markupFactory)?s(v,g,r):new r(v,g);k.push(y);(r=g.getAttribute(p+"id")||g.getAttribute("jsId"))&&d.setObject(r,y);d.forEach(z,function(a){d.connect(y,a.event,null,a.func)});d.forEach(x,function(a){a.call(y)})}});e._started||d.forEach(k,function(a){!f.noStart&&a&&dojo.isFunction(a.startup)&&!a._started&&(!a.getParent||!a.getParent())&&a.startup()});return k};this.parse=function(a,b){function e(a,d){var f=dojo.clone(a.inherited);dojo.forEach(["dir","lang"],function(b){var c=a.node.getAttribute(b);
c&&(f[b]=c)});for(var g=a.clsInfo&&!a.clsInfo.cls.prototype._noScript?a.scripts:null,k=!a.clsInfo||!a.clsInfo.cls.prototype.stopParser||b&&b.template,n=a.node.firstChild;n;n=n.nextSibling)if(n.nodeType==1){var o,t=k&&n.getAttribute(p+"type");o=t?t:k&&n.getAttribute(l);t=t==o;o?(o={type:o,fastpath:t,clsInfo:c(o,t),node:n,scripts:[],inherited:f},d.push(o),e(o,d)):g&&n.nodeName.toLowerCase()=="script"?(o=n.getAttribute("type"))&&/^dojo\/\w/i.test(o)&&g.push(n):k&&e({node:n,inherited:f},d)}}var f;!b&&
a&&a.rootNode?(b=a,f=b.rootNode):f=a;f=f?dojo.byId(f):dojo.body();var b=b||{},l=(b.scope||d._scopeName)+"Type",p="data-"+(b.scope||d._scopeName)+"-",n={};if(b&&b.inherited)for(var o in b.inherited)b.inherited[o]&&(n[o]=b.inherited[o]);o=[];e({node:f,inherited:n},o);return this.instantiate(o,b&&b.template?{template:!0}:null,b)}},function(){var a=function(){dojo.config.parseOnLoad&&dojo.parser.parse()};dojo.getObject("dijit.wai.onload")===dojo._loaders[0]?dojo._loaders.splice(1,0,a):dojo._loaders.unshift(a)}();
if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=!0;dojo.provide("dojo.cache");var cache={};dojo.cache=function(a,b,c){typeof a=="string"?a=dojo.moduleUrl(a,b):c=b;b=a.toString();a=c;c!=void 0&&!dojo.isString(c)&&(a="value"in c?c.value:void 0);c=c&&c.sanitize?!0:!1;typeof a=="string"?a=cache[b]=c?dojo.cache._sanitize(a):a:a===null?delete cache[b]:(b in cache||(a=dojo._getText(b),cache[b]=c?dojo.cache._sanitize(a):a),a=cache[b]);return a};dojo.cache._sanitize=function(a){if(a){var a=
a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,""),b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a}}
if(!dojo._hasResource["dijit._Templated"])dojo._hasResource["dijit._Templated"]=!0,dojo.provide("dijit._Templated"),dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:!1,_skipNodeCache:!1,_earlyTemplatedStartup:!1,constructor:function(){this._attachPoints=[];this._attachEvents=[]},_stringRepl:function(a){var b=this.declaredClass,c=this;return dojo.string.substitute(a,this,function(a,e){e.charAt(0)=="!"&&(a=dojo.getObject(e.substr(1),!1,c));if(typeof a=="undefined")throw Error(b+
" template:"+e);return a==null?"":e.charAt(0)=="!"?a:a.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){var a=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache),b;if(dojo.isString(a)){if(b=dojo._toDom(this._stringRepl(a)),b.nodeType!=1)throw Error("Invalid template: "+a);}else b=a.cloneNode(!0);this.domNode=b;this.inherited(arguments);this._attachTemplateNodes(b);if(this.widgetsInTemplate)a=this._startupWidgets=dojo.parser.parse(b,{noStart:!this._earlyTemplatedStartup,
template:!0,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"}),this._supportingWidgets=dijit.findWidgets(b),this._attachTemplateNodes(a,function(a,b){return a[b]});this._fillContent(this.srcNodeRef)},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)},_attachTemplateNodes:function(a,b){for(var b=b||function(a,b){return a.getAttribute(b)},c=dojo.isArray(a)?a:a.all||a.getElementsByTagName("*"),d=dojo.isArray(a)?0:-1;d<c.length;d++){var e=
d==-1?a:c[d];if(!this.widgetsInTemplate||!b(e,"dojoType")&&!b(e,"data-dojo-type")){var f=b(e,"dojoAttachPoint")||b(e,"data-dojo-attach-point");if(f)for(var g=f.split(/\s*,\s*/);f=g.shift();)dojo.isArray(this[f])?this[f].push(e):this[f]=e,this._attachPoints.push(f);if(f=b(e,"dojoAttachEvent")||b(e,"data-dojo-attach-event"))for(var g=f.split(/\s*,\s*/),h=dojo.trim;f=g.shift();)if(f){var j=null;f.indexOf(":")!=-1?(j=f.split(":"),f=h(j[0]),j=h(j[1])):f=h(f);j||(j=f);this._attachEvents.push(this.connect(e,
f,j))}(f=b(e,"waiRole"))&&dijit.setWaiRole(e,f);(f=b(e,"waiState"))&&dojo.forEach(f.split(/\s*,\s*/),function(a){a.indexOf("-")!=-1&&(a=a.split("-"),dijit.setWaiState(e,a[0],a[1]))})}}},startup:function(){dojo.forEach(this._startupWidgets,function(a){a&&!a._started&&a.startup&&a.startup()});this.inherited(arguments)},destroyRendering:function(){dojo.forEach(this._attachPoints,function(a){delete this[a]},this);this._attachPoints=[];dojo.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=
[];this.inherited(arguments)}}),dijit._Templated._templateCache={},dijit._Templated.getCachedTemplate=function(a,b,c){var d=dijit._Templated._templateCache,e=b||a,f=d[e];if(f){try{if(!f.ownerDocument||f.ownerDocument==dojo.doc)return f}catch(g){}dojo.destroy(f)}b||(b=dojo.cache(a,{sanitize:!0}));b=dojo.string.trim(b);if(c||b.match(/\$\{([^\}]+)\}/g))return d[e]=b;else{a=dojo._toDom(b);if(a.nodeType!=1)throw Error("Invalid template: "+b);return d[e]=a}},dojo.isIE&&dojo.addOnWindowUnload(function(){var a=
dijit._Templated._templateCache,b;for(b in a){var c=a[b];typeof c=="object"&&dojo.destroy(c);delete a[b]}}),dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});
dojo._hasResource["dijit._Contained"]||(dojo._hasResource["dijit._Contained"]=!0,dojo.provide("dijit._Contained"),dojo.declare("dijit._Contained",null,{getParent:function(){var a=dijit.getEnclosingWidget(this.domNode.parentNode);return a&&a.isContainer?a:null},_getSibling:function(a){var b=this.domNode;do b=b[a+"Sibling"];while(b&&b.nodeType!=1);return b&&dijit.byNode(b)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},
getIndexInParent:function(){var a=this.getParent();return!a||!a.getIndexOfChild?-1:a.getIndexOfChild(this)}}));
dojo._hasResource["dijit._CssStateMixin"]||(dojo._hasResource["dijit._CssStateMixin"]=!0,dojo.provide("dijit._CssStateMixin"),dojo.declare("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);dojo.forEach(["onmouseenter","onmouseleave","onmousedown"],function(a){this.connect(this.domNode,a,"_cssMouseEvent")},this);dojo.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active"],function(a){this.watch(a,
dojo.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes)this._trackMouseState(this[a],this.cssStateNodes[a]);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseenter":case "mouseover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseleave":case "mouseout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":this._set("active",!0);this._mouseDown=!0;var b=this.connect(dojo.body(),"onmouseup",
function(){this._mouseDown=!1;this._set("active",!1);this.disconnect(b)})}},_setStateClass:function(){function a(a){b=b.concat(dojo.map(b,function(b){return b+a}),"dijit"+a)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");this.checked&&a("Checked");this.state&&a(this.state);this.selected&&a("Selected");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this._focused&&a("Focused");var c=this.stateNode||this.domNode,d={};dojo.forEach(c.className.split(" "),
function(a){d[a]=!0});"_stateClasses"in this&&dojo.forEach(this._stateClasses,function(a){delete d[a]});dojo.forEach(b,function(a){d[a]=!0});var e=[],f;for(f in d)e.push(f);c.className=e.join(" ");this._stateClasses=b},_trackMouseState:function(a,b){function c(){var c="disabled"in g&&g.disabled||"readonly"in g&&g.readonly;dojo.toggleClass(a,b+"Hover",d&&!e&&!c);dojo.toggleClass(a,b+"Active",e&&!c);dojo.toggleClass(a,b+"Focused",f&&!c)}var d=!1,e=!1,f=!1,g=this,h=dojo.hitch(this,"connect",a);h("onmouseenter",
function(){d=!0;c()});h("onmouseleave",function(){e=d=!1;c()});h("onmousedown",function(){e=!0;c()});h("onmouseup",function(){e=!1;c()});h("onfocus",function(){f=!0;c()});h("onblur",function(){f=!1;c()});this.watch("disabled",c);this.watch("readOnly",c)}}));
dojo._hasResource["dijit.MenuItem"]||(dojo._hasResource["dijit.MenuItem"]=!0,dojo.provide("dijit.MenuItem"),dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/MenuItem.html",'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" role="menuitem" tabIndex="-1"\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitIcon dijitMenuItemIcon" dojoAttachPoint="iconNode"/>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<div dojoAttachPoint="arrowWrapper" style="visibility: hidden">\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand"/>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</div>\n\t</td>\n</tr>\n'),
attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),baseClass:"dijitMenuItem",label:"",iconClass:"",accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this.set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);var a=this.id+"_text";dojo.attr(this.containerNode,"id",a);this.accelKeyNode&&(dojo.attr(this.accelKeyNode,"id",this.id+"_accel"),a+=" "+this.id+
"_accel");dijit.setWaiState(this.domNode,"labelledby",a);dojo.setSelectable(this.domNode,!1)},_onHover:function(){this.getParent().onItemHover(this)},_onUnhover:function(){this.getParent().onItemUnhover(this);this._set("hovering",!1)},_onClick:function(a){this.getParent().onItemClick(this,a);dojo.stopEvent(a)},onClick:function(){},focus:function(){try{dojo.isIE==8&&this.containerNode.focus(),dijit.focus(this.focusNode)}catch(a){}},_onFocus:function(){this._setSelected(!0);this.getParent()._onItemFocus(this);
this.inherited(arguments)},_setSelected:function(a){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){dijit.setWaiState(this.focusNode,"disabled",a?"true":"false");this._set("disabled",
a)},_setAccelKeyAttr:function(a){this.accelKeyNode.style.display=a?"":"none";this.accelKeyNode.innerHTML=a;dojo.attr(this.containerNode,"colSpan",a?"1":"2");this._set("accelKey",a)}}));
dojo._hasResource["dijit.CheckedMenuItem"]||(dojo._hasResource["dijit.CheckedMenuItem"]=!0,dojo.provide("dijit.CheckedMenuItem"),dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:dojo.cache("dijit","templates/CheckedMenuItem.html",'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" role="menuitemcheckbox" tabIndex="-1"\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon dijitCheckedMenuItemIcon" dojoAttachPoint="iconNode"/>\n\t\t<span class="dijitCheckedMenuItemIconChar">&#10003;</span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode,labelNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">&nbsp;</td>\n</tr>\n'),checked:!1,
_setCheckedAttr:function(a){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",a);dijit.setWaiState(this.domNode,"checked",a);this._set("checked",a)},onChange:function(){},_onClick:function(a){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked));this.inherited(arguments)}}));
if(!dojo._hasResource["dojo.dnd.common"])dojo._hasResource["dojo.dnd.common"]=!0,dojo.provide("dojo.dnd.common"),dojo.getObject("dnd",!0,dojo),dojo.dnd.getCopyKeyState=dojo.isCopyKey,dojo.dnd._uniqueId=0,dojo.dnd.getUniqueId=function(){var a;do a=dojo._scopeName+"Unique"+ ++dojo.dnd._uniqueId;while(dojo.byId(a));return a},dojo.dnd._empty={},dojo.dnd.isFormElement=function(a){a=a.target;if(a.nodeType==3)a=a.parentNode;return" button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+
" ")>=0};
if(!dojo._hasResource["dojo.dnd.autoscroll"])dojo._hasResource["dojo.dnd.autoscroll"]=!0,dojo.provide("dojo.dnd.autoscroll"),dojo.getObject("dnd",!0,dojo),dojo.dnd.getViewport=dojo.window.getBox,dojo.dnd.V_TRIGGER_AUTOSCROLL=32,dojo.dnd.H_TRIGGER_AUTOSCROLL=32,dojo.dnd.V_AUTOSCROLL_VALUE=16,dojo.dnd.H_AUTOSCROLL_VALUE=16,dojo.dnd.autoScroll=function(a){var b=dojo.window.getBox(),c=0,d=0;if(a.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL)c=-dojo.dnd.H_AUTOSCROLL_VALUE;else if(a.clientX>b.w-dojo.dnd.H_TRIGGER_AUTOSCROLL)c=dojo.dnd.H_AUTOSCROLL_VALUE;
if(a.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL)d=-dojo.dnd.V_AUTOSCROLL_VALUE;else if(a.clientY>b.h-dojo.dnd.V_TRIGGER_AUTOSCROLL)d=dojo.dnd.V_AUTOSCROLL_VALUE;window.scrollBy(c,d)},dojo.dnd._validNodes={div:1,p:1,td:1},dojo.dnd._validOverflow={auto:1,scroll:1},dojo.dnd.autoScrollNodes=function(a){for(var b=a.target;b;){if(b.nodeType==1&&b.tagName.toLowerCase()in dojo.dnd._validNodes){var c=dojo.getComputedStyle(b);if(c.overflow.toLowerCase()in dojo.dnd._validOverflow){var d=dojo._getContentBox(b,c),
c=dojo.position(b,!0),e=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,d.w/2),f=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,d.h/2),g=a.pageX-c.x,h=a.pageY-c.y,j=c=0;if(dojo.isWebKit||dojo.isOpera)g+=dojo.body().scrollLeft,h+=dojo.body().scrollTop;g>0&&g<d.w&&(g<e?c=-e:g>d.w-e&&(c=e));h>0&&h<d.h&&(h<f?j=-f:h>d.h-f&&(j=f));d=b.scrollLeft;e=b.scrollTop;b.scrollLeft+=c;b.scrollTop+=j;if(d!=b.scrollLeft||e!=b.scrollTop)return}}try{b=b.parentNode}catch(k){b=null}}dojo.dnd.autoScroll(a)};
dojo._hasResource["dojo.dnd.Mover"]||(dojo._hasResource["dojo.dnd.Mover"]=!0,dojo.provide("dojo.dnd.Mover"),dojo.declare("dojo.dnd.Mover",null,{constructor:function(a,b,c){this.node=dojo.byId(a);var d=b.touches?b.touches[0]:b;this.marginBox={l:d.pageX,t:d.pageY};this.mouseButton=b.button;b=this.host=c;a=a.ownerDocument;this.events=[dojo.connect(a,"onmousemove",this,"onFirstMove"),dojo.connect(a,"ontouchmove",this,"onFirstMove"),dojo.connect(a,"onmousemove",this,"onMouseMove"),dojo.connect(a,"ontouchmove",
this,"onMouseMove"),dojo.connect(a,"onmouseup",this,"onMouseUp"),dojo.connect(a,"ontouchend",this,"onMouseUp"),dojo.connect(a,"ondragstart",dojo.stopEvent),dojo.connect(a.body,"onselectstart",dojo.stopEvent)];if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){dojo.dnd.autoScroll(a);var b=this.marginBox,c=a.touches?a.touches[0]:a;this.host.onMove(this,{l:b.l+c.pageX,t:b.t+c.pageY},a);dojo.stopEvent(a)},onMouseUp:function(a){(dojo.isWebKit&&dojo.isMac&&this.mouseButton==2?a.button==0:
this.mouseButton==a.button)&&this.destroy();dojo.stopEvent(a)},onFirstMove:function(a){var b=this.node.style,c,d=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=dojo.marginBox(this.node);c=dojo.doc.body;var e=dojo.getComputedStyle(c),f=dojo._getMarginBox(c,e),e=dojo._getContentBox(c,e);c=b.l-(e.l-f.l);b=b.t-(e.t-f.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;
if(d&&d.onFirstMove)d.onFirstMove(this,a);dojo.disconnect(this.events.shift());dojo.disconnect(this.events.shift())},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}}));
dojo._hasResource["dojo.dnd.Moveable"]||(dojo._hasResource["dojo.dnd.Moveable"]=!0,dojo.provide("dojo.dnd.Moveable"),dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:!1,constructor:function(a,b){this.node=dojo.byId(a);b||(b={});this.handle=b.handle?dojo.byId(b.handle):null;if(!this.handle)this.handle=this.node;this.delay=b.delay>0?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,
"ontouchstart",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")]},markupFactory:function(a,b){return new dojo.dnd.Moveable(b,a)},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null},onMouseDown:function(a){if(!this.skip||!dojo.dnd.isFormElement(a)){if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,
"ontouchmove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"),dojo.connect(this.handle,"ontouchend",this,"onMouseUp"));var b=a.touches?a.touches[0]:a;this._lastX=b.pageX;this._lastY=b.pageY}else this.onDragDetected(a);dojo.stopEvent(a)}},onMouseMove:function(a){var b=a.touches?a.touches[0]:a;if(Math.abs(b.pageX-this._lastX)>this.delay||Math.abs(b.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);dojo.stopEvent(a)},onMouseUp:function(a){for(var b=0;b<
2;++b)dojo.disconnect(this.events.pop());dojo.stopEvent(a)},onSelectStart:function(a){(!this.skip||!dojo.dnd.isFormElement(a))&&dojo.stopEvent(a)},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){dojo.publish("/dnd/move/start",[a]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem")},onMoveStop:function(a){dojo.publish("/dnd/move/stop",[a]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem")},onFirstMove:function(){},
onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}}));
if(!dojo._hasResource["dojo.dnd.move"])dojo._hasResource["dojo.dnd.move"]=!0,dojo.provide("dojo.dnd.move"),dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:!1,markupFactory:function(a,b){return new dojo.dnd.move.constrainedMoveable(b,a)},constructor:function(a,b){b||(b={});this.constraints=b.constraints;this.within=b.within},onFirstMove:function(a){var b=this.constraintBox=this.constraints.call(this,a);b.r=b.l+b.w;b.b=b.t+b.h;this.within&&(a=dojo._getMarginSize(a.node),
b.r-=a.w,b.b-=a.h)},onMove:function(a,b){var c=this.constraintBox,d=a.node.style;this.onMoving(a,b);b.l=b.l<c.l?c.l:c.r<b.l?c.r:b.l;b.t=b.t<c.t?c.t:c.b<b.t?c.b:b.t;d.left=b.l+"px";d.top=b.t+"px";this.onMoved(a,b)}}),dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(a,b){return new dojo.dnd.move.boxConstrainedMoveable(b,a)},constructor:function(a,b){var c=b&&b.box;this.constraints=function(){return c}}}),dojo.declare("dojo.dnd.move.parentConstrainedMoveable",
dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(a,b){return new dojo.dnd.move.parentConstrainedMoveable(b,a)},constructor:function(a,b){var c=b&&b.area;this.constraints=function(){var a=this.node.parentNode,b=dojo.getComputedStyle(a),f=dojo._getMarginBox(a,b);if(c=="margin")return f;var g=dojo._getMarginExtents(a,b);f.l+=g.l;f.t+=g.t;f.w-=g.w;f.h-=g.h;if(c=="border")return f;g=dojo._getBorderExtents(a,b);f.l+=g.l;f.t+=g.t;f.w-=g.w;f.h-=g.h;if(c=="padding")return f;g=dojo._getPadExtents(a,
b);f.l+=g.l;f.t+=g.t;f.w-=g.w;f.h-=g.h;return f}}}),dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover,dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover,dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover;
dojo._hasResource["dojo.dnd.TimedMoveable"]||(dojo._hasResource["dojo.dnd.TimedMoveable"]=!0,dojo.provide("dojo.dnd.TimedMoveable"),function(){var a=dojo.dnd.Moveable.prototype.onMove;dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(a,c){c||(c={});if(c.timeout&&typeof c.timeout=="number"&&c.timeout>=0)this.timeout=c.timeout},markupFactory:function(a,c){return new dojo.dnd.TimedMoveable(c,a)},onMoveStop:function(b){b._timer&&(clearTimeout(b._timer),a.call(this,
b,b._leftTop));dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments)},onMove:function(b,c){b._leftTop=c;if(!b._timer){var d=this;b._timer=setTimeout(function(){b._timer=null;a.call(d,b,b._leftTop)},this.timeout)}}})}());
dojo._hasResource["dojo.fx.Toggler"]||(dojo._hasResource["dojo.fx.Toggler"]=!0,dojo.provide("dojo.fx.Toggler"),dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(a){dojo.mixin(this,a);this.node=a.node;this._showArgs=dojo.mixin({},a);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=dojo.mixin({},a);this._hideArgs.node=this.node;
this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);dojo.connect(this.showAnim,"beforeBegin",dojo.hitch(this.hideAnim,"stop",!0));dojo.connect(this.hideAnim,"beforeBegin",dojo.hitch(this.showAnim,"stop",!0))},show:function(a){return this.showAnim.play(a||0)},hide:function(a){return this.hideAnim.play(a||0)}}));
dojo._hasResource["dojo.fx"]||(dojo._hasResource["dojo.fx"]=!0,dojo.provide("dojo.fx"),function(){var a=dojo,b={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}},c=function(b){this._index=-1;this._animations=b||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;a.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};a.extend(c,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){a.disconnect(this._onAnimateCtx);
a.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=a.connect(this._current,"onAnimate",this,"_onAnimate"),this._onEndCtx=a.connect(this._current,"onEnd",this,"_onEnd"),this._current.play(0,!0))},play:function(b,c){if(!this._current)this._current=this._animations[this._index=0];if(!c&&this._current.status()=="playing")return this;var d=a.connect(this._current,
"beforeBegin",this,function(){this._fire("beforeBegin")}),h=a.connect(this._current,"onBegin",this,function(a){this._fire("onBegin",arguments)}),j=a.connect(this._current,"onPlay",this,function(b){this._fire("onPlay",arguments);a.disconnect(d);a.disconnect(h);a.disconnect(j)});this._onAnimateCtx&&a.disconnect(this._onAnimateCtx);this._onAnimateCtx=a.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx&&a.disconnect(this._onEndCtx);this._onEndCtx=a.connect(this._current,"onEnd",this,
"_onEnd");this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var b=a.connect(this._current,"onPause",this,function(c){this._fire("onPause",arguments);a.disconnect(b)});this._current.pause()}return this},gotoPercent:function(b,c){this.pause();var d=this.duration*b;this._current=null;a.some(this._animations,function(a){if(a.duration<=d)return this._current=a,!0;d-=a.duration;return!1});this._current&&this._current.gotoPercent(d/this._current.duration,c);
return this},stop:function(b){if(this._current){if(b){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var c=a.connect(this._current,"onStop",this,function(b){this._fire("onStop",arguments);a.disconnect(c)});this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&a.disconnect(this._onAnimateCtx);this._onEndCtx&&a.disconnect(this._onEndCtx)}});
a.extend(c,b);dojo.fx.chain=function(a){return new c(a)};var d=function(b){this._animations=b||[];this._connects=[];this.duration=this._finished=0;a.forEach(b,function(b){var c=b.duration;b.delay&&(c+=b.delay);if(this.duration<c)this.duration=c;this._connects.push(a.connect(b,"onEnd",this,"_onEnd"))},this);this._pseudoAnimation=new a.Animation({curve:[0,1],duration:this.duration});var c=this;a.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(b){c._connects.push(a.connect(c._pseudoAnimation,
b,function(){c._fire(b,arguments)}))})};a.extend(d,{_doAction:function(b,c){a.forEach(this._animations,function(a){a[b].apply(a,c)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(b,
c){var d=this.duration*b;a.forEach(this._animations,function(a){a.gotoPercent(a.duration<d?1:d/a.duration,c)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){a.forEach(this._connects,dojo.disconnect)}});a.extend(d,b);dojo.fx.combine=function(a){return new d(a)};dojo.fx.wipeIn=function(b){var c=b.node=a.byId(b.node),d=c.style,h,b=
a.animateProperty(a.mixin({properties:{height:{start:function(){h=d.overflow;d.overflow="hidden";if(d.visibility=="hidden"||d.display=="none")return d.height="1px",d.display="",d.visibility="",1;else{var b=a.style(c,"height");return Math.max(b,1)}},end:function(){return c.scrollHeight}}}},b));a.connect(b,"onEnd",function(){d.height="auto";d.overflow=h});return b};dojo.fx.wipeOut=function(b){var c=(b.node=a.byId(b.node)).style,d,b=a.animateProperty(a.mixin({properties:{height:{end:1}}},b));a.connect(b,
"beforeBegin",function(){d=c.overflow;c.overflow="hidden";c.display=""});a.connect(b,"onEnd",function(){c.overflow=d;c.height="auto";c.display="none"});return b};dojo.fx.slideTo=function(b){var c=null,d=null,h=function(b){return function(){var e=a.getComputedStyle(b),h=e.position;c=h=="absolute"?b.offsetTop:parseInt(e.top)||0;d=h=="absolute"?b.offsetLeft:parseInt(e.left)||0;if(h!="absolute"&&h!="relative")e=a.position(b,!0),c=e.y,d=e.x,b.style.position="absolute",b.style.top=c+"px",b.style.left=d+
"px"}}(b.node=a.byId(b.node));h();b=a.animateProperty(a.mixin({properties:{top:b.top||0,left:b.left||0}},b));a.connect(b,"beforeBegin",b,h);return b}}());
dojo._hasResource["dijit.form._FormMixin"]||(dojo._hasResource["dijit.form._FormMixin"]=!0,dojo.provide("dijit.form._FormMixin"),dojo.declare("dijit.form._FormMixin",null,{state:"",reset:function(){dojo.forEach(this.getDescendants(),function(a){a.reset&&a.reset()})},validate:function(){var a=!1;return dojo.every(dojo.map(this.getDescendants(),function(b){b._hasBeenBlurred=!0;var c=b.disabled||!b.validate||b.validate();!c&&!a&&(dojo.window.scrollIntoView(b.containerNode||b.domNode),b.focus(),a=!0);
return c}),function(a){return a})},setValues:function(a){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(a){var b={};dojo.forEach(this.getDescendants(),function(a){a.name&&(b[a.name]||(b[a.name]=[])).push(a)});for(var c in b)if(b.hasOwnProperty(c)){var d=b[c],e=dojo.getObject(c,!1,a);e!==void 0&&(dojo.isArray(e)||(e=[e]),typeof d[0].checked=="boolean"?dojo.forEach(d,function(a){a.set("value",
dojo.indexOf(e,a.value)!=-1)}):d[0].multiple?d[0].set("value",e):dojo.forEach(d,function(a,b){a.set("value",e[b])}))}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var a={};dojo.forEach(this.getDescendants(),function(b){var c=b.name;if(c&&!b.disabled){var d=b.get("value");typeof b.checked=="boolean"?/Radio/.test(b.declaredClass)?d!==!1?dojo.setObject(c,d,a):(d=dojo.getObject(c,
!1,a),d===void 0&&dojo.setObject(c,null,a)):(b=dojo.getObject(c,!1,a),b||(b=[],dojo.setObject(c,b,a)),d!==!1&&b.push(d)):(b=dojo.getObject(c,!1,a),typeof b!="undefined"?dojo.isArray(b)?b.push(d):dojo.setObject(c,[b,d],a):dojo.setObject(c,d,a))}});return a},isValid:function(){return this.state==""},onValidStateChange:function(){},_getState:function(){var a=dojo.map(this._descendants,function(a){return a.get("state")||""});return dojo.indexOf(a,"Error")>=0?"Error":dojo.indexOf(a,"Incomplete")>=0?"Incomplete":
""},disconnectChildren:function(){dojo.forEach(this._childConnections||[],dojo.hitch(this,"disconnect"));dojo.forEach(this._childWatches||[],function(a){a.unwatch()})},connectChildren:function(a){var b=this;this.disconnectChildren();this._descendants=this.getDescendants();a=a?function(a,c){b[a]=c}:dojo.hitch(this,"_set");a("value",this.get("value"));a("state",this._getState());var c=this._childConnections=[],d=this._childWatches=[];dojo.forEach(dojo.filter(this._descendants,function(a){return a.validate}),
function(a){dojo.forEach(["state","disabled"],function(c){d.push(a.watch(c,function(){b.set("state",b._getState())}))})});var e=function(){b._onChangeDelayTimer&&clearTimeout(b._onChangeDelayTimer);b._onChangeDelayTimer=setTimeout(function(){delete b._onChangeDelayTimer;b._set("value",b.get("value"))},10)};dojo.forEach(dojo.filter(this._descendants,function(a){return a.onChange}),function(a){c.push(b.connect(a,"onChange",e));d.push(a.watch("disabled",e))})},startup:function(){this.inherited(arguments);
this.connectChildren(!0);this.watch("state",function(a,b,c){this.onValidStateChange(c=="")})},destroy:function(){this.disconnectChildren();this.inherited(arguments)}}));
dojo._hasResource["dijit._DialogMixin"]||(dojo._hasResource["dijit._DialogMixin"]=!0,dojo.provide("dijit._DialogMixin"),dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=dijit._getTabNavigable(this.containerNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=
a.last||a.highest||this._firstFocusItem}}));
dojo._hasResource["dijit.DialogUnderlay"]||(dojo._hasResource["dijit.DialogUnderlay"]=!0,dojo.provide("dijit.DialogUnderlay"),dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",attributeMap:{id:"domNode"},_setDialogIdAttr:function(a){dojo.attr(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className=
"dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){dojo.body().appendChild(this.domNode)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=dojo.window.getBox();b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new dijit.BackgroundIframe(this.domNode)},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display=
"none"}}));
dojo._hasResource["dijit._Container"]||(dojo._hasResource["dijit._Container"]=!0,dojo.provide("dijit._Container"),dojo.declare("dijit._Container",null,{isContainer:!0,buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},addChild:function(a,b){var c=this.containerNode;if(b&&typeof b=="number"){var d=this.getChildren();if(d&&d.length>=b)c=d[b-1].domNode,b="after"}dojo.place(a.domNode,c,b);this._started&&!a._started&&a.startup()},removeChild:function(a){typeof a=="number"&&
(a=this.getChildren()[a]);if(a)(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},hasChildren:function(){return this.getChildren().length>0},destroyDescendants:function(a){dojo.forEach(this.getChildren(),function(b){b.destroyRecursive(a)})},_getSiblingOfChild:function(a,b){var c=a.domNode,d=b>0?"nextSibling":"previousSibling";do c=c[d];while(c&&(c.nodeType!=1||!dijit.byNode(c)));return c&&dijit.byNode(c)},getIndexOfChild:function(a){return dojo.indexOf(this.getChildren(),a)},startup:function(){this._started||
(dojo.forEach(this.getChildren(),function(a){a.startup()}),this.inherited(arguments))}}));
if(!dojo._hasResource["dijit.layout._LayoutWidget"])dojo._hasResource["dijit.layout._LayoutWidget"]=!0,dojo.provide("dijit.layout._LayoutWidget"),dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();if(!a||
!a.isLayoutContainer)this.resize(),this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this.resize()})}},resize:function(a,b){var c=this.domNode;if(a){dojo.marginBox(c,a);if(a.t)c.style.top=a.t+"px";if(a.l)c.style.left=a.l+"px"}var d=b||{};dojo.mixin(d,a||{});if(!("h"in d)||!("w"in d))d=dojo.mixin(dojo.marginBox(c),d);var e=dojo.getComputedStyle(c),f=dojo._getMarginExtents(c,e),g=dojo._getBorderExtents(c,e),d=this._borderBox={w:d.w-(f.w+g.w),h:d.h-(f.h+g.h)},f=dojo._getPadExtents(c,
e);this._contentBox={l:dojo._toPixelValue(c,e.paddingLeft),t:dojo._toPixelValue(c,e.paddingTop),w:d.w-f.w,h:d.h-f.h};this.layout()},layout:function(){},_setupChild:function(a){dojo.addClass(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){dojo.removeClass(a.domNode,this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}}),
dijit.layout.marginBox2contentBox=function(a,b){var c=dojo.getComputedStyle(a),d=dojo._getMarginExtents(a,c),e=dojo._getPadBorderExtents(a,c);return{l:dojo._toPixelValue(a,c.paddingLeft),t:dojo._toPixelValue(a,c.paddingTop),w:b.w-(d.w+e.w),h:b.h-(d.h+e.h)}},function(){var a=function(a,c){var d=a.resize?a.resize(c):dojo.marginBox(a.domNode,c);d?dojo.mixin(a,d):(dojo.mixin(a,dojo.marginBox(a.domNode)),dojo.mixin(a,c))};dijit.layout.layoutChildren=function(b,c,d,e,f){c=dojo.mixin({},c);dojo.addClass(b,
"dijitLayoutContainer");d=dojo.filter(d,function(a){return a.region!="center"&&a.layoutAlign!="client"}).concat(dojo.filter(d,function(a){return a.region=="center"||a.layoutAlign=="client"}));dojo.forEach(d,function(b){var d=b.domNode,j=b.region||b.layoutAlign,k=d.style;k.left=c.l+"px";k.top=c.t+"px";k.position="absolute";dojo.addClass(d,"dijitAlign"+(j.substring(0,1).toUpperCase()+j.substring(1)));d={};e&&e==b.id&&(d[b.region=="top"||b.region=="bottom"?"h":"w"]=f);j=="top"||j=="bottom"?(d.w=c.w,
a(b,d),c.h-=b.h,j=="top"?c.t+=b.h:k.top=c.t+c.h+"px"):j=="left"||j=="right"?(d.h=c.h,a(b,d),c.w-=b.w,j=="left"?c.l+=b.w:k.left=c.l+c.w+"px"):(j=="client"||j=="center")&&a(b,c)})}}();
dojo._hasResource["dijit.layout._ContentPaneResizeMixin"]||(dojo._hasResource["dijit.layout._ContentPaneResizeMixin"]=!0,dojo.provide("dijit.layout._ContentPaneResizeMixin"),dojo.declare("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isContainer:!0,isLayoutContainer:!0,_startChildren:function(){dojo.forEach(this.getChildren(),function(a){a.startup();a._started=!0})},startup:function(){if(!this._started){var a=dijit._Contained.prototype.getParent.call(this);this._childOfLayoutWidget=a&&a.isLayoutContainer;
this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._startChildren();this._isShown()&&this._onShow();this._childOfLayoutWidget||this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this._needLayout=!this._childOfLayoutWidget;this.resize()})}},_checkIfSingleChild:function(){var a=dojo.query("> *",this.containerNode).filter(function(a){return a.tagName!=="SCRIPT"}),b=a.filter(function(a){return dojo.hasAttr(a,"data-dojo-type")||dojo.hasAttr(a,"dojoType")||dojo.hasAttr(a,
"widgetId")}),c=dojo.filter(b.map(dijit.byNode),function(a){return a&&a.domNode&&a.resize});a.length==b.length&&c.length==1?this._singleChild=c[0]:delete this._singleChild;dojo.toggleClass(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(a,b){!this._wasShown&&this.open!==!1&&this._onShow();this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},
_layout:function(a,b){a&&dojo.marginBox(this.domNode,a);var c=this.containerNode;if(c===this.domNode){var d=b||{};dojo.mixin(d,a||{});if(!("h"in d)||!("w"in d))d=dojo.mixin(dojo.marginBox(c),d);this._contentBox=dijit.layout.marginBox2contentBox(c,d)}else this._contentBox=dojo.contentBox(c);this._layoutChildren();delete this._needLayout},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||dojo.contentBox(this.containerNode);
this._singleChild.resize({w:a.w,h:a.h})}else dojo.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;else if("open"in this)return this.open;else{var a=this.domNode,b=this.domNode.parentNode;return a.style.display!="none"&&a.style.visibility!="hidden"&&!dojo.hasClass(a,"dijitHidden")&&b&&b.style&&b.style.display!="none"}},_onShow:function(){this._needLayout&&this._layout(this._changeSize,
this._resultSize);this.inherited(arguments);this._wasShown=!0}}));
dojo._hasResource["dojo.html"]||(dojo._hasResource["dojo.html"]=!0,dojo.provide("dojo.html"),dojo.getObject("html",!0,dojo),function(){var a=0,b=dojo;dojo.html._secureForInnerHtml=function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(a,d){b.empty(a);if(d)if(typeof d=="string"&&(d=b._toDom(d,a.ownerDocument)),!d.nodeType&&b.isArrayLike(d))for(var e=d.length,f=0;f<d.length;f=e==d.length?f+1:0)b.place(d[f],
a,"last");else b.place(d,a,"last");return a};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:dojo._scopeName,startup:!0,constructor:function(b,d){dojo.mixin(this,b||{});d=this.node=dojo.byId(this.node||d);if(!this.id)this.id=["Setter",d?d.id||d.tagName:"",a++].join("_")},set:function(a,b){if(void 0!==a)this.content=a;b&&this._mixin(b);this.onBegin();this.setContent();this.onEnd();return this.node},setContent:function(){var a=
this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=dojo.html._setNodeContent(a,this.content)}catch(b){var e=this.onContentError(b);try{a.innerHTML=e}catch(f){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+f.message,f)}}this.node=a},empty:function(){this.parseResults&&this.parseResults.length&&(dojo.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);dojo.html._emptyNode(this.node)},onBegin:function(){var a=
this.content;if(dojo.isString(a)&&(this.cleanContent&&(a=dojo.html._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.node;delete this.content},onContentError:function(a){return"Error occured setting content: "+a},_mixin:function(a){var b={},e;for(e in a)e in b||(this[e]=
a[e])},_parse:function(){var a=this.node;try{var b={};dojo.forEach(["dir","lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);this.parseResults=dojo.parser.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope})}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,e){a=this["on"+a+"Error"].call(this,b);e?console.error(e,b):a&&dojo.html._setNodeContent(this.node,a,!0)}});dojo.html.set=function(a,b,e){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),
b="");return e?(new dojo.html._ContentSetter(dojo.mixin(e,{content:b,node:a}))).set():dojo.html._setNodeContent(a,b,!0)}}());
if(!dojo._hasResource["dojo.i18n"])dojo._hasResource["dojo.i18n"]=!0,dojo.provide("dojo.i18n"),dojo.getObject("i18n",!0,dojo),dojo.i18n.getLocalization=dojo.i18n.getLocalization||function(a,b,c){var c=dojo.i18n.normalizeLocale(c),d=c.split("-"),e=[a,"nls",b].join(".");if(e=dojo._loadedModules[e]){for(var f,g=d.length;g>0;g--){var h=d.slice(0,g).join("_");if(e[h]){f=e[h];break}}if(!f)f=e.ROOT;if(f)return a=function(){},a.prototype=f,new a}throw Error("Bundle not found: "+b+" in "+a+" , locale="+c);
},dojo.i18n.normalizeLocale=function(a){a=a?a.toLowerCase():dojo.locale;a=="root"&&(a="ROOT");return a},dojo.i18n._requireLocalization=function(a,b,c,d){var c=dojo.i18n.normalizeLocale(c),e=[a,"nls",b].join("."),f="";if(d){for(var g=d.split(","),h=0;h<g.length;h++)c.indexOf(g[h])==0&&g[h].length>f.length&&(f=g[h]);f||(f="ROOT")}var g=d?f:c,j=dojo._loadedModules[e],h=null;if(j){if(dojo.config.localizationComplete&&j._built)return;h=g.replace(/-/g,"_");h=dojo._loadedModules[e+"."+h]}if(!h){var j=dojo.provide(e),
k=dojo._getModuleSymbols(a).concat("nls").join("/"),l;dojo.i18n._searchLocalePath(g,d,function(a){var c=a.replace(/-/g,"_"),f=e+"."+c,g=!1;dojo._loadedModules[f]?g=!0:(dojo.provide(f),f=[k],a!="ROOT"&&f.push(a),f.push(b),a=f.join("/")+".js",g=dojo._loadPath(a,null,function(a){var a=a.root||a,b=function(){};b.prototype=l;j[c]=new b;for(var d in a)j[c][d]=a[d]}));g&&j[c]?l=j[c]:j[c]=l;if(d)return!0})}d&&c!=f&&(j[c.replace(/-/g,"_")]=j[f.replace(/-/g,"_")])},function(){var a=dojo.config.extraLocale;
if(a){!a instanceof Array&&(a=[a]);var b=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(c,d,e,f){b(c,d,e,f);if(!e)for(e=0;e<a.length;e++)b(c,d,a[e],f)}}}(),dojo.i18n._searchLocalePath=function(a,b,c){for(var a=dojo.i18n.normalizeLocale(a),d=a.split("-"),a=[],e=d.length;e>0;e--)a.push(d.slice(0,e).join("-"));a.push(!1);b&&a.reverse();for(b=a.length-1;b>=0;b--)if(c(a[b]||"ROOT"))break},dojo.i18n._preloadLocalizations=function(a,b){function c(c){c=dojo.i18n.normalizeLocale(c);
dojo.i18n._searchLocalePath(c,!0,function(c){for(var d=0;d<b.length;d++)if(b[d]==c)return dojo.require(a+"_"+c),!0;return!1})}c();for(var d=dojo.config.extraLocale||[],e=0;e<d.length;e++)c(d[e])};
dojo._hasResource["dijit.layout.ContentPane"]||(dojo._hasResource["dijit.layout.ContentPane"]=!0,dojo.provide("dijit.layout.ContentPane"),dojo.declare("dijit.layout.ContentPane",[dijit._Widget,dijit.layout._ContentPaneResizeMixin],{href:"",extractContent:!1,parseOnLoad:!0,parserScope:dojo._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:!1,
baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[]}),stopParser:!0,template:!1,create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){for(var c=dojo.doc.createDocumentFragment(),b=dojo.byId(b);b.firstChild;)c.appendChild(b.firstChild);a=dojo.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=dojo.i18n.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,a);this.errorMessage=dojo.string.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode;this.domNode.title="";dojo.attr(this.domNode,"role")||dijit.setWaiRole(this.domNode,"group")},_startChildren:function(){this.inherited(arguments);this._contentSetter&&dojo.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&
dojo.isFunction(a.startup))a.startup(),a._started=!0},this)},setHref:function(a){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},
setContent:function(a){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href","");this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this._created&&this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},
cancel:function(){this._xhrDfd&&this._xhrDfd.fired==-1&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},uninitialize:function(){this._beingDestroyed&&this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,
"cancel"));this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};dojo.isObject(this.ioArgs)&&dojo.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||dojo.xhrGet)(b);c.addCallback(function(b){try{a._isDownloaded=!0,a._setContent(b,!1),a.onDownloadEnd()}catch(c){a._onError("Content",c)}delete a._xhrDfd;
return b});c.addErrback(function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.callback(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(){this.isLoaded&&
this._onUnloadHandler();var a=this._contentSetter;dojo.forEach(this.getChildren(),function(a){a.destroyRecursive&&a.destroyRecursive()});a&&(dojo.forEach(a.parseResults,function(a){a.destroyRecursive&&a.domNode&&a.domNode.parentNode==dojo.body()&&a.destroyRecursive()}),delete a.parseResults);dojo.html._emptyNode(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var c=this._contentSetter;if(!(c&&c instanceof dojo.html._ContentSetter))c=this._contentSetter=
new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})});var d=dojo.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang},this._contentSetterParams||
{});c.set(dojo.isObject(a)&&a.domNode?a.domNode:a,d);delete this._contentSetterParams;this.doLayout&&this._checkIfSingleChild();b||(this._started&&(this._startChildren(),this._scheduleLayout()),this._onLoadHandler(a))},_onError:function(a,b,c){this.onLoadDeferred.errback(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},
onDownloadEnd:function(){}}));
dojo._hasResource["dijit.TooltipDialog"]||(dojo._hasResource["dijit.TooltipDialog"]=!0,dojo.provide("dijit.TooltipDialog"),dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:dojo.cache("dijit","templates/TooltipDialog.html",'<div role="presentation" tabIndex="-1">\n\t<div class="dijitTooltipContainer" role="presentation">\n\t\t<div class ="dijitTooltipContents dijitTooltipFocusNode" dojoAttachPoint="containerNode" role="dialog"></div>\n\t</div>\n\t<div class="dijitTooltipConnector" role="presentation"></div>\n</div>\n'),_setTitleAttr:function(a){this.containerNode.title=
a;this._set("title",a)},postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey")},orient:function(a,b,c){a="dijitTooltipAB"+(c.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(c.charAt(0)=="T"?"Below":"Above");dojo.replaceClass(this.domNode,a,this._currentOrientClass||"");this._currentOrientClass=a},focus:function(){this._getFocusItems(this.containerNode);dijit.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);
this._onShow()},onClose:function(){this.onHide()},_onKey:function(a){var b=a.target,c=dojo.keys;a.charOrCode===c.TAB&&this._getFocusItems(this.containerNode);var d=this._firstFocusItem==this._lastFocusItem;a.charOrCode==c.ESCAPE?(setTimeout(dojo.hitch(this,"onCancel"),0),dojo.stopEvent(a)):b==this._firstFocusItem&&a.shiftKey&&a.charOrCode===c.TAB?(d||dijit.focus(this._lastFocusItem),dojo.stopEvent(a)):b==this._lastFocusItem&&a.charOrCode===c.TAB&&!a.shiftKey?(d||dijit.focus(this._firstFocusItem),
dojo.stopEvent(a)):a.charOrCode===c.TAB&&a.stopPropagation()}}));
if(!dojo._hasResource["dijit.Dialog"])dojo._hasResource["dijit.Dialog"]=!0,dojo.provide("dijit.Dialog"),dojo.declare("dijit._DialogBase",[dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/Dialog.html",'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n\t<div dojoAttachPoint="titleBar" class="dijitDialogTitleBar">\n\t<span dojoAttachPoint="titleNode" class="dijitDialogTitle" id="${id}_title"></span>\n\t<span dojoAttachPoint="closeButtonNode" class="dijitDialogCloseIcon" dojoAttachEvent="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1">\n\t\t<span dojoAttachPoint="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t</span>\n\t</div>\n\t\t<div dojoAttachPoint="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n'),baseClass:"dijitDialog",
cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],"aria-describedby":""}),open:!1,duration:dijit.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,doLayout:!1,draggable:!0,"aria-describedby":"",postMixInProperties:function(){var a=dojo.i18n.getLocalization("dijit","common");dojo.mixin(this,a);this.inherited(arguments)},
postCreate:function(){dojo.style(this.domNode,{display:"none",position:"absolute"});dojo.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[]},onLoad:function(){this._position();this.autofocus&&dijit._DialogLevelManager.isTop(this)&&(this._getFocusItems(this.domNode),dijit.focus(this._firstFocusItem));this.inherited(arguments)},_endDrag:function(a){if(a&&a.node&&a.node===this.domNode)this._relativePosition=
dojo.position(a.node)},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?(this._moveable=dojo.isIE==6?new dojo.dnd.TimedMoveable(a,{handle:this.titleBar}):new dojo.dnd.Moveable(a,{handle:this.titleBar,timeout:0}),this._dndListener=dojo.subscribe("/dnd/move/stop",this,"_endDrag")):dojo.addClass(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" ")}},_size:function(){this._checkIfSingleChild();
if(this._singleChild){if(this._singleChildOriginalStyle)this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;delete this._singleChildOriginalStyle}else dojo.style(this.containerNode,{width:"auto",height:"auto"});var a=dojo._getMarginSize(this.domNode),b=dojo.window.getBox();if(a.w>=b.w||a.h>=b.h){var c=Math.min(a.w,Math.floor(b.w*0.75)),a=Math.min(a.h,Math.floor(b.h*0.75));this._singleChild&&this._singleChild.resize?(this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText,
this._singleChild.resize({w:c,h:a})):dojo.style(this.containerNode,{width:c+"px",height:a+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var a=this.domNode,b=dojo.window.getBox(),c=this._relativePosition,d=c?null:dojo._getBorderBox(a);dojo.style(a,{left:Math.floor(b.l+(c?c.x:(b.w-d.w)/2))+"px",top:Math.floor(b.t+(c?c.y:(b.h-d.h)/2))+"px"})}},_onKey:function(a){if(a.charOrCode){var b=
dojo.keys,c=a.target;a.charOrCode===b.TAB&&this._getFocusItems(this.domNode);var d=this._firstFocusItem==this._lastFocusItem;if(c==this._firstFocusItem&&a.shiftKey&&a.charOrCode===b.TAB)d||dijit.focus(this._lastFocusItem),dojo.stopEvent(a);else if(c==this._lastFocusItem&&a.charOrCode===b.TAB&&!a.shiftKey)d||dijit.focus(this._firstFocusItem),dojo.stopEvent(a);else{for(;c;){if(c==this.domNode||dojo.hasClass(c,"dijitPopup"))if(a.charOrCode==b.ESCAPE)this.onCancel();else return;c=c.parentNode}if(a.charOrCode!==
b.TAB)dojo.stopEvent(a);else if(!dojo.isOpera)try{this._firstFocusItem.focus()}catch(e){}}}},show:function(){if(!this.open){this._started||this.startup();if(!this._alreadyInitialized)this._setup(),this._alreadyInitialized=!0;this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var a=dojo.window.getBox();if(!this._oldViewport||a.h!=this._oldViewport.h||a.w!=
this._oldViewport.w)this.layout(),this._oldViewport=a}));this._modalconnects.push(dojo.connect(this.domNode,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this._size();this._position();var a;this._fadeInDeferred=new dojo.Deferred(dojo.hitch(this,function(){a.stop();delete this._fadeInDeferred}));a=dojo.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:dojo.hitch(this,function(){dijit._DialogLevelManager.show(this,this.underlayAttrs)}),
onEnd:dojo.hitch(this,function(){this.autofocus&&dijit._DialogLevelManager.isTop(this)&&(this._getFocusItems(this.domNode),dijit.focus(this._firstFocusItem));this._fadeInDeferred.callback(!0);delete this._fadeInDeferred})}).play();return this._fadeInDeferred}},hide:function(){if(this._alreadyInitialized){this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new dojo.Deferred(dojo.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));a=dojo.fadeOut({node:this.domNode,
duration:this.duration,onEnd:dojo.hitch(this,function(){this.domNode.style.display="none";dijit._DialogLevelManager.hide(this);this.onHide();this._fadeOutDeferred.callback(!0);delete this._fadeOutDeferred})}).play();if(this._scrollConnected)this._scrollConnected=!1;dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];this._relativePosition&&delete this._relativePosition;this._set("open",!1);return this._fadeOutDeferred}},layout:function(){this.domNode.style.display!="none"&&(dijit._underlay&&
dijit._underlay.layout(),this._position())},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();this._dndListener&&dojo.unsubscribe(this._dndListener);dojo.forEach(this._modalconnects,dojo.disconnect);dijit._DialogLevelManager.hide(this);this.inherited(arguments)}}),dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._DialogBase],{}),dijit._DialogLevelManager={show:function(a,
b){var c=dijit._dialogStack;c[c.length-1].focus=dijit.getFocus(a);var d=dijit._underlay;!d||d._destroyed?d=dijit._underlay=new dijit.DialogUnderlay(b):d.set(a.underlayAttrs);var e=c[c.length-1].dialog?c[c.length-1].zIndex+2:950;c.length==1&&d.show();dojo.style(dijit._underlay.domNode,"zIndex",e-1);dojo.style(a.domNode,"zIndex",e);c.push({dialog:a,underlayAttrs:b,zIndex:e})},hide:function(a){var b=dijit._dialogStack;if(b[b.length-1].dialog==a){b.pop();var c=b[b.length-1];b.length==1?dijit._underlay._destroyed||
dijit._underlay.hide():(dojo.style(dijit._underlay.domNode,"zIndex",c.zIndex-1),dijit._underlay.set(c.underlayAttrs));if(a.refocus){b=c.focus;if(!b||c.dialog&&!dojo.isDescendant(b.node,c.dialog.domNode))c.dialog._getFocusItems(c.dialog.domNode),b=c.dialog._firstFocusItem;try{dijit.focus(b)}catch(d){}}}else c=dojo.indexOf(dojo.map(b,function(a){return a.dialog}),a),c!=-1&&b.splice(c,1)},isTop:function(a){var b=dijit._dialogStack;return b[b.length-1].dialog==a}},dijit._dialogStack=[{dialog:null,focus:null,
underlayAttrs:null}];
dojo._hasResource["dijit._KeyNavContainer"]||(dojo._hasResource["dijit._KeyNavContainer"]=!0,dojo.provide("dijit._KeyNavContainer"),dojo.declare("dijit._KeyNavContainer",dijit._Container,{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(a,b){var c=this._keyNavCodes={},d=dojo.hitch(this,this.focusPrev),e=dojo.hitch(this,this.focusNext);dojo.forEach(a,function(a){c[a]=d});dojo.forEach(b,function(a){c[a]=e});c[dojo.keys.HOME]=dojo.hitch(this,"focusFirstChild");c[dojo.keys.END]=dojo.hitch(this,
"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"))},addChild:function(a,b){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(a)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){var a=this._getFirstFocusableChild();a&&this.focusChild(a)},focusLastChild:function(){var a=
this._getLastFocusableChild();a&&this.focusChild(a)},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},focusChild:function(a,b){this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild);a.set("tabIndex",this.tabIndex);a.focus(b?"end":"start");this._set("focusedChild",a)},_startupChild:function(a){a.set("tabIndex","-1");this.connect(a,"_onFocus",function(){a.set("tabIndex",
this.tabIndex)});this.connect(a,"_onBlur",function(){a.set("tabIndex","-1")})},_onContainerFocus:function(a){a.target===this.domNode&&(this.focusFirstChild(),dojo.attr(this.domNode,"tabIndex","-1"))},_onBlur:function(a){this.tabIndex&&dojo.attr(this.domNode,"tabIndex",this.tabIndex);this.inherited(arguments)},_onContainerKeypress:function(a){if(!a.ctrlKey&&!a.altKey){var b=this._keyNavCodes[a.charOrCode];b&&(b(),dojo.stopEvent(a))}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,
1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_getNextFocusableChild:function(a,b){a&&(a=this._getSiblingOfChild(a,b));for(var c=this.getChildren(),d=0;d<c.length;d++){a||(a=c[b>0?0:c.length-1]);if(a.isFocusable())return a;a=this._getSiblingOfChild(a,b)}return null}}));
dojo._hasResource["dijit.PopupMenuItem"]||(dojo._hasResource["dijit.PopupMenuItem"]=!0,dojo.provide("dijit.PopupMenuItem"),dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=
dijit.byNode(a)}dojo.body().appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&dojo.style(this.arrowWrapper,"visibility","");dijit.setWaiState(this.focusNode,"haspopup","true")}},destroyDescendants:function(){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(),delete this.popup);this.inherited(arguments)}}));
dojo._hasResource["dijit.MenuSeparator"]||(dojo._hasResource["dijit.MenuSeparator"]=!0,dojo.provide("dijit.MenuSeparator"),dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuSeparator.html",'<tr class="dijitMenuSeparator">\n\t<td class="dijitMenuSeparatorIconCell">\n\t\t<div class="dijitMenuSeparatorTop"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n</tr>\n'),
buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}}));
dojo._hasResource["dijit.Menu"]||(dojo._hasResource["dijit.Menu"]=!0,dojo.provide("dijit.Menu"),dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){this._started||(dojo.forEach(this.getChildren(),function(a){a.startup()}),this.startupKeyNavChildren(),this.inherited(arguments))},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled?
this.focusedChild._onClick(a):(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var a=this.currentPopup.parentMenu;a.focusedChild&&a.focusedChild._setSelected(!1);a.focusedChild=this.currentPopup.from_item;a.focusedChild._setSelected(!0);this._stopPendingCloseTimer(this.currentPopup)}},onItemHover:function(a){if(this.isActive&&(this.focusChild(a),this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer))this.hover_timer=
setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay);this.focusedChild&&this.focusChild(a);this._hoveredChild=a},_onChildBlur:function(a){this._stopPopupTimer();a._setSelected(!1);var b=a.popup;if(b)this._stopPendingCloseTimer(b),b._pendingClose_timer=setTimeout(function(){b._pendingClose_timer=null;if(b.parentMenu)b.parentMenu.currentPopup=null;dijit.popup.close(b)},this.popupDelay)},onItemUnhover:function(a){this.isActive&&this._stopPopupTimer();if(this._hoveredChild==a)this._hoveredChild=
null},_stopPopupTimer:function(){if(this.hover_timer)clearTimeout(this.hover_timer),this.hover_timer=null},_stopPendingCloseTimer:function(a){if(a._pendingClose_timer)clearTimeout(a._pendingClose_timer),a._pendingClose_timer=null},_stopFocusTimer:function(){if(this._focus_timer)clearTimeout(this._focus_timer),this._focus_timer=null},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){typeof this.isShowingNow=="undefined"&&this._markActive();this.focusChild(a);
if(a.disabled)return!1;a.popup?this._openPopup():(this.onExecute(),a.onClick(b))},_openPopup:function(){this._stopPopupTimer();var a=this.focusedChild;if(a){var b=a.popup;if(!b.isShowingNow){this.currentPopup&&(this._stopPendingCloseTimer(this.currentPopup),dijit.popup.close(this.currentPopup));b.parentMenu=this;b.from_item=a;var c=this;dijit.popup.open({parent:this,popup:b,around:a.domNode,orient:this._orient||(this.isLeftToRight()?{TR:"TL",TL:"TR",BR:"BL",BL:"BR"}:{TL:"TR",TR:"TL",BL:"BR",BR:"BL"}),
onCancel:function(){c.focusChild(a);c._cleanUp();a._setSelected(!0);c.focusedChild=a},onExecute:dojo.hitch(this,"_cleanUp")});this.currentPopup=b;b.connect(b.domNode,"onmouseenter",dojo.hitch(c,"_onPopupHover"));if(b.focus)b._focus_timer=setTimeout(dojo.hitch(b,function(){this._focus_timer=null;this.focus()}),0)}}},_markActive:function(){this.isActive=!0;dojo.replaceClass(this.domNode,"dijitMenuActive","dijitMenuPassive")},onOpen:function(){this.isShowingNow=!0;this._markActive()},_markInactive:function(){this.isActive=
!1;dojo.replaceClass(this.domNode,"dijitMenuPassive","dijitMenuActive")},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup)dijit._curFocus&&dojo.isDescendant(dijit._curFocus,this.currentPopup.domNode)&&this.focusedChild.focusNode.focus(),dijit.popup.close(this.currentPopup),this.currentPopup=null;if(this.focusedChild)this.focusedChild._setSelected(!1),this.focusedChild._onUnhover(),
this.focusedChild=null},_onItemFocus:function(a){this._hoveredChild&&this._hoveredChild!=a&&this._hoveredChild._onUnhover()},_onBlur:function(){this._cleanUp();this.inherited(arguments)},_cleanUp:function(){this._closeChild();typeof this.isShowingNow=="undefined"&&this._markInactive()}}),dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[]},templateString:dojo.cache("dijit","templates/Menu.html",'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}" dojoAttachEvent="onkeypress:_onKeyPress" cellspacing="0">\n\t<tbody class="dijitReset" dojoAttachPoint="containerNode"></tbody>\n</table>\n'),
baseClass:"dijitMenu",targetNodeIds:[],contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(dojo.body()):dojo.forEach(this.targetNodeIds,this.bindDomNode,this);var a=dojo.keys,b=this.isLeftToRight();this._openSubMenuKey=b?a.RIGHT_ARROW:a.LEFT_ARROW;this._closeSubMenuKey=b?a.LEFT_ARROW:a.RIGHT_ARROW;this.connectKeyNavHandlers([a.UP_ARROW],[a.DOWN_ARROW])},_onKeyPress:function(a){if(!a.ctrlKey&&!a.altKey)switch(a.charOrCode){case this._openSubMenuKey:this._moveToPopup(a);
dojo.stopEvent(a);break;case this._closeSubMenuKey:if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else dojo.stopEvent(a)}},_iframeContentWindow:function(a){return dojo.window.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||a.name&&dojo.doc.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&dojo.doc.frames[a.name]&&dojo.doc.frames[a.name].document||
null},bindDomNode:function(a){var a=dojo.byId(a),b;if(a.tagName.toLowerCase()=="iframe"){var c=a,d=this._iframeContentWindow(c);b=dojo.withGlobal(d,dojo.body)}else b=a==dojo.body()?dojo.doc.documentElement:a;var e={node:a,iframe:c};dojo.attr(a,"_dijitMenu"+this.id,this._bindings.push(e));var f=dojo.hitch(this,function(a){return[dojo.connect(a,this.leftClickToOpen?"onclick":"oncontextmenu",this,function(a){dojo.stopEvent(a);this._scheduleOpen(a.target,c,{x:a.pageX,y:a.pageY})}),dojo.connect(a,"onkeydown",
this,function(a){a.shiftKey&&a.keyCode==dojo.keys.F10&&(dojo.stopEvent(a),this._scheduleOpen(a.target,c))})]});e.connects=b?f(b):[];if(c)e.onloadHandler=dojo.hitch(this,function(){var a=this._iframeContentWindow(c);b=dojo.withGlobal(a,dojo.body);e.connects=f(b)}),c.addEventListener?c.addEventListener("load",e.onloadHandler,!1):c.attachEvent("onload",e.onloadHandler)},unBindDomNode:function(a){var b;try{b=dojo.byId(a)}catch(c){return}a="_dijitMenu"+this.id;if(b&&dojo.hasAttr(b,a)){var d=dojo.attr(b,
a)-1,e=this._bindings[d];dojo.forEach(e.connects,dojo.disconnect);var f=e.iframe;f&&(f.removeEventListener?f.removeEventListener("load",e.onloadHandler,!1):f.detachEvent("onload",e.onloadHandler));dojo.removeAttr(b,a);delete this._bindings[d]}},_scheduleOpen:function(a,b,c){if(!this._openTimer)this._openTimer=setTimeout(dojo.hitch(this,function(){delete this._openTimer;this._openMyself({target:a,iframe:b,coords:c})}),1)},_openMyself:function(a){function b(){j.refocus&&dijit.focus(k);dijit.popup.close(j)}
var c=a.target,d=a.iframe;if(a=a.coords){if(d){var c=dojo.position(d,!0),e=this._iframeContentWindow(d),e=dojo.withGlobal(e,"_docScroll",dojo),f=dojo.getComputedStyle(d),g=dojo._toPixelValue,h=(dojo.isIE&&dojo.isQuirks?0:g(d,f.paddingLeft))+(dojo.isIE&&dojo.isQuirks?g(d,f.borderLeftWidth):0),d=(dojo.isIE&&dojo.isQuirks?0:g(d,f.paddingTop))+(dojo.isIE&&dojo.isQuirks?g(d,f.borderTopWidth):0);a.x+=c.x+h-e.x;a.y+=c.y+d-e.y}}else a=dojo.position(c,!0),a.x+=10,a.y+=10;var j=this,k=dijit.getFocus(this);
dijit.popup.open({popup:this,x:a.x,y:a.y,onExecute:b,onCancel:b,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this)}},uninitialize:function(){dojo.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}}));
dojo._hasResource["dijit.TitlePane"]||(dojo._hasResource["dijit.TitlePane"]=!0,dojo.provide("dijit.TitlePane"),dojo.declare("dijit.TitlePane",[dijit.layout.ContentPane,dijit._Templated,dijit._CssStateMixin],{title:"",open:!0,toggleable:!0,tabIndex:"0",duration:dijit.defaultDuration,baseClass:"dijitTitlePane",templateString:dojo.cache("dijit","templates/TitlePane.html",'<div>\n\t<div dojoAttachEvent="onclick:_onTitleClick, onkeypress:_onTitleKey"\n\t\t\tclass="dijitTitlePaneTitle" dojoAttachPoint="titleBarNode">\n\t\t<div class="dijitTitlePaneTitleFocus" dojoAttachPoint="focusNode">\n\t\t\t<img src="${_blankGif}" alt="" dojoAttachPoint="arrowNode" class="dijitArrowNode" role="presentation"\n\t\t\t/><span dojoAttachPoint="arrowNodeInner" class="dijitArrowNodeInner"></span\n\t\t\t><span dojoAttachPoint="titleNode" class="dijitTitlePaneTextNode"></span>\n\t\t</div>\n\t</div>\n\t<div class="dijitTitlePaneContentOuter" dojoAttachPoint="hideNode" role="presentation">\n\t\t<div class="dijitReset" dojoAttachPoint="wipeNode" role="presentation">\n\t\t\t<div class="dijitTitlePaneContentInner" dojoAttachPoint="containerNode" role="region" id="${id}_pane">\n\t\t\t\t<\!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'),
attributeMap:dojo.delegate(dijit.layout.ContentPane.prototype.attributeMap,{title:{node:"titleNode",type:"innerHTML"},tooltip:{node:"focusNode",type:"attribute",attribute:"title"},id:""}),buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,"dijitTitlePaneTitle");var a=this.hideNode;this._wipeIn=dojo.fx.wipeIn({node:this.wipeNode,duration:this.duration,beforeBegin:function(){a.style.display=
""}});this._wipeOut=dojo.fx.wipeOut({node:this.wipeNode,duration:this.duration,onEnd:function(){a.style.display="none"}})},_setOpenAttr:function(a,b){dojo.forEach([this._wipeIn,this._wipeOut],function(a){a&&a.status()=="playing"&&a.stop()});b?this[a?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=a?"":"none";if(this._started)if(a)this._onShow();else this.onHide();this.arrowNodeInner.innerHTML=a?"-":"+";dijit.setWaiState(this.containerNode,"hidden",a?"false":"true");
dijit.setWaiState(this.focusNode,"pressed",a?"true":"false");this._set("open",a);this._setCss()},_setToggleableAttr:function(a){dijit.setWaiRole(this.focusNode,a?"button":"heading");a?(dijit.setWaiState(this.focusNode,"controls",this.id+"_pane"),dojo.attr(this.focusNode,"tabIndex",this.tabIndex)):dojo.removeAttr(this.focusNode,"tabIndex");this._set("toggleable",a);this._setCss()},_setContentAttr:function(a){!this.open||!this._wipeOut||this._wipeOut.status()=="playing"?this.inherited(arguments):(this._wipeIn&&
this._wipeIn.status()=="playing"&&this._wipeIn.stop(),dojo.marginBox(this.wipeNode,{h:dojo.marginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display="")},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var a=this.titleBarNode||this.focusNode,b=this._titleBarClass;this._titleBarClass="dijit"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");dojo.replaceClass(a,this._titleBarClass,b||"");this.arrowNodeInner.innerHTML=
this.open?"-":"+"},_onTitleKey:function(a){a.charOrCode==dojo.keys.ENTER||a.charOrCode==" "?(this.toggleable&&this.toggle(),dojo.stopEvent(a)):a.charOrCode==dojo.keys.DOWN_ARROW&&this.open&&(this.containerNode.focus(),a.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},setTitle:function(a){dojo.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",a)}}));
if(!dojo._hasResource["dojo.DeferredList"])dojo._hasResource["dojo.DeferredList"]=!0,dojo.provide("dojo.DeferredList"),dojo.DeferredList=function(a,b,c,d){var e=[];dojo.Deferred.call(this);var f=this;a.length===0&&!b&&this.resolve([0,[]]);var g=0;dojo.forEach(a,function(h,j){function k(b,c){e[j]=[b,c];g++;g===a.length&&f.resolve(e)}h.then(function(a){b?f.resolve([j,a]):k(!0,a)},function(a){c?f.reject(a):k(!1,a);if(d)return null;throw a;})})},dojo.DeferredList.prototype=new dojo.Deferred,dojo.DeferredList.prototype.gatherResults=
function(a){a=new dojo.DeferredList(a,!1,!0,!1);a.addCallback(function(a){var c=[];dojo.forEach(a,function(a){c.push(a[1])});return c});return a};
if(!dojo._hasResource["dojo.regexp"])dojo._hasResource["dojo.regexp"]=!0,dojo.provide("dojo.regexp"),dojo.getObject("regexp",!0,dojo),dojo.regexp.escapeString=function(a,b){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return b&&b.indexOf(a)!=-1?a:"\\"+a})},dojo.regexp.buildGroupRE=function(a,b,c){if(!(a instanceof Array))return b(a);for(var d=[],e=0;e<a.length;e++)d.push(b(a[e]));return dojo.regexp.group(d.join("|"),c)},dojo.regexp.group=function(a,b){return"("+(b?"?:":"")+a+")"};
if(!dojo._hasResource["dojo.cookie"])dojo._hasResource["dojo.cookie"]=!0,dojo.provide("dojo.cookie"),dojo.cookie=function(a,b,c){var d=document.cookie;if(arguments.length==1){var e=d.match(RegExp("(?:^|; )"+dojo.regexp.escapeString(a)+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}else{c=c||{};d=c.expires;if(typeof d=="number"){var f=new Date;f.setTime(f.getTime()+d*864E5);d=c.expires=f}if(d&&d.toUTCString)c.expires=d.toUTCString();b=encodeURIComponent(b);d=a+"="+b;for(e in c)d+="; "+e,f=c[e],
f!==!0&&(d+="="+f);document.cookie=d}},dojo.cookie.isSupported=function(){if(!("cookieEnabled"in navigator))this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed",navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1});return navigator.cookieEnabled};
dojo._hasResource["dijit.tree.TreeStoreModel"]||(dojo._hasResource["dijit.tree.TreeStoreModel"]=!0,dojo.provide("dijit.tree.TreeStoreModel"),dojo.declare("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(a){dojo.mixin(this,a);this.connects=[];a=this.store;if(!a.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.Tree: store must support dojo.data.Identity");if(a.getFeatures()["dojo.data.api.Notification"])this.connects=
this.connects.concat([dojo.connect(a,"onNew",this,"onNewItem"),dojo.connect(a,"onDelete",this,"onDeleteItem"),dojo.connect(a,"onSet",this,"onSetItem")])},destroy:function(){dojo.forEach(this.connects,dojo.disconnect)},getRoot:function(a,b){this.root?a(this.root):this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(b){if(b.length!=1)throw Error(this.declaredClass+": query "+dojo.toJson(this.query)+" returned "+b.length+" items, but must return exactly one item");this.root=b[0];a(this.root)}),
onError:b})},mayHaveChildren:function(a){return dojo.some(this.childrenAttrs,function(b){return this.store.hasAttribute(a,b)},this)},getChildren:function(a,b,c){var d=this.store;if(d.isItemLoaded(a)){for(var e=[],f=0;f<this.childrenAttrs.length;f++)var g=d.getValues(a,this.childrenAttrs[f]),e=e.concat(g);var h=0;this.deferItemLoadingUntilExpand||dojo.forEach(e,function(a){d.isItemLoaded(a)||h++});h==0?b(e):dojo.forEach(e,function(a,f){d.isItemLoaded(a)||d.loadItem({item:a,onItem:function(a){e[f]=
a;--h==0&&b(e)},onError:c})})}else{var j=dojo.hitch(this,arguments.callee);d.loadItem({item:a,onItem:function(a){j(a,b,c)},onError:c})}},isItem:function(a){return this.store.isItem(a)},fetchItemByIdentity:function(a){this.store.fetchItemByIdentity(a)},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return this.labelAttr?this.store.getValue(a,this.labelAttr):this.store.getLabel(a)},newItem:function(a,b,c){var d={parent:b,attribute:this.childrenAttrs[0]},e;this.newItemIdAttr&&
a[this.newItemIdAttr]?this.fetchItemByIdentity({identity:a[this.newItemIdAttr],scope:this,onItem:function(f){f?this.pasteItem(f,null,b,!0,c):(e=this.store.newItem(a,d))&&c!=void 0&&this.pasteItem(e,b,b,!1,c)}}):(e=this.store.newItem(a,d))&&c!=void 0&&this.pasteItem(e,b,b,!1,c)},pasteItem:function(a,b,c,d,e){var f=this.store,g=this.childrenAttrs[0];b&&dojo.forEach(this.childrenAttrs,function(c){if(f.containsValue(b,c,a)){if(!d){var e=dojo.filter(f.getValues(b,c),function(b){return b!=a});f.setValues(b,
c,e)}g=c}});if(c)if(typeof e=="number"){var h=f.getValues(c,g).slice();h.splice(e,0,a);f.setValues(c,g,h)}else f.setValues(c,g,f.getValues(c,g).concat(a))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(a,b){b&&this.getChildren(b.item,dojo.hitch(this,function(a){this.onChildrenChange(b.item,a)}))},onDeleteItem:function(a){this.onDelete(a)},onSetItem:function(a,b){if(dojo.indexOf(this.childrenAttrs,b)!=-1)this.getChildren(a,dojo.hitch(this,function(b){this.onChildrenChange(a,
b)}));else this.onChange(a)}}));
dojo._hasResource["dijit.tree.ForestStoreModel"]||(dojo._hasResource["dijit.tree.ForestStoreModel"]=!0,dojo.provide("dijit.tree.ForestStoreModel"),dojo.declare("dijit.tree.ForestStoreModel",dijit.tree.TreeStoreModel,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,b,c){a===this.root?this.root.children?
b(this.root.children):this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(a){this.root.children=a;b(a)}),onError:c}):this.inherited(arguments)},isItem:function(a){return a===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var b=a.scope?a.scope:dojo.global;a.onItem&&a.onItem.call(b,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===
this.root?this.root.label:this.inherited(arguments)},newItem:function(a,b,c){return b===this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,b,c,d,e){if(b===this.root&&!d)this.onLeaveRoot(a);dijit.tree.TreeStoreModel.prototype.pasteItem.call(this,a,b===this.root?null:b,c===this.root?null:c,d,e);if(c===this.root)this.onAddToRoot(a)},onAddToRoot:function(a){console.log(this,": item ",a," added to root")},onLeaveRoot:function(a){console.log(this,
": item ",a," removed from root")},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(b){this.root.children=b;if(a.length!=b.length||dojo.some(a,function(a,d){return b[d]!=a}))this.onChildrenChange(this.root,b)})})},onNewItem:function(a,b){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(a){dojo.indexOf(this.root.children,a)!=-1&&this._requeryTop();this.inherited(arguments)},onSetItem:function(a,b,c,d){this._requeryTop();
this.inherited(arguments)}}));
if(!dojo._hasResource["dojo.dnd.Container"])dojo._hasResource["dojo.dnd.Container"]=!0,dojo.provide("dojo.dnd.Container"),dojo.declare("dojo.dnd.Container",null,{skipForm:!1,constructor:function(a,b){this.node=dojo.byId(a);b||(b={});this.creator=b.creator||null;this.skipForm=b.skipForm;this.parent=b.dropParent&&dojo.byId(b.dropParent);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");(!b||!b._skipStartup)&&this.startup();this.events=[dojo.connect(this.node,
"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){var b=b||dojo.global,c=this.map,d=dojo.dnd._empty,e;for(e in c)e in d||a.call(b,c[e],e,this);return b},clearItems:function(){this.map=
{}},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=dojo.dnd.getUniqueId();var c=b.getAttribute("dndType"),d=b.getAttribute("dndData");a[b.id]={data:d||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){if(this.parent.firstChild)if(b){if(!c)c=this.parent.firstChild}else{if(c)c=c.nextSibling}else c=
null;if(c)for(b=0;b<a.length;++b){var d=this._normalizedCreator(a[b]);this.setItem(d.node.id,{data:d.data,type:d.type});this.parent.insertBefore(d.node,c)}else for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),this.parent.appendChild(d.node);return this},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b){a._skipStartup=!0;return new dojo.dnd.Container(b,
a)},startup:function(){if(!this.parent&&(this.parent=this.node,this.parent.tagName.toLowerCase()=="table")){var a=this.parent.getElementsByTagName("tbody");if(a&&a.length)this.parent=a[0]}this.defaultCreator=dojo.dnd._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b;){if(b==this.node)break;try{b=b.parentNode}catch(c){b=null}}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);if(this.current!=b)this.current&&this._removeItemClass(this.current,
"Over"),b&&this._addItemClass(b,"Over"),this.current=b},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}if(this.current)this._removeItemClass(this.current,"Over"),this.current=null;this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){(!this.skipForm||!dojo.dnd.isFormElement(a))&&dojo.stopEvent(a)},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var c="dojoDnd"+a,d=a.toLowerCase()+"State";
dojo.replaceClass(this.node,c+b,c+this[d]);this[d]=b},_addItemClass:function(a,b){dojo.addClass(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){dojo.removeClass(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if(b==this.parent&&dojo.hasClass(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(a,b){var c=(this.creator||this.defaultCreator).call(this,a,b);if(!dojo.isArray(c.type))c.type=["text"];if(!c.node.id)c.node.id=dojo.dnd.getUniqueId();
dojo.addClass(c.node,"dojoDndItem");return c}}),dojo.dnd._createNode=function(a){return!a?dojo.dnd._createSpan:function(b){return dojo.create(a,{innerHTML:b})}},dojo.dnd._createTrTd=function(a){var b=dojo.create("tr");dojo.create("td",{innerHTML:a},b);return b},dojo.dnd._createSpan=function(a){return dojo.create("span",{innerHTML:a})},dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"},dojo.dnd._defaultCreator=function(a){var a=a.tagName.toLowerCase(),b=a=="tbody"||a=="thead"?dojo.dnd._createTrTd:
dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[a]);return function(a,d){var e=a&&dojo.isObject(a),f,g;e&&a.tagName&&a.nodeType&&a.getAttribute?(f=a.getAttribute("dndData")||a.innerHTML,e=(e=a.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"],g=a):(f=e&&a.data?a.data:a,e=e&&a.type?a.type:["text"],g=(d=="avatar"?dojo.dnd._createSpan:b)(String(f)));if(!g.id)g.id=dojo.dnd.getUniqueId();return{node:g,data:f,type:e}}};
if(!dojo._hasResource["dijit.tree._dndContainer"])dojo._hasResource["dijit.tree._dndContainer"]=!0,dojo.provide("dijit.tree._dndContainer"),dojo.getObject("tree",!0,dojo),dijit.tree._compareNodes=function(a,b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;else if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;else if(document.createRange){var c=doc.createRange();c.setStartBefore(a);var d=doc.createRange();
d.setStartBefore(b);return c.compareBoundaryPoints(c.END_TO_END,d)}else throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},dojo.declare("dijit.tree._dndContainer",null,{constructor:function(a,b){this.tree=a;this.node=a.domNode;dojo.mixin(this,b);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");this.events=[dojo.connect(this.node,"onmouseenter",this,"onOverEvent"),dojo.connect(this.node,"onmouseleave",
this,"onOutEvent"),dojo.connect(this.tree,"_onNodeMouseEnter",this,"onMouseOver"),dojo.connect(this.tree,"_onNodeMouseLeave",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",dojo,"stopEvent"),dojo.connect(this.node,"onselectstart",dojo,"stopEvent")]},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.node=this.parent=null},onMouseOver:function(a){this.current=a},onMouseOut:function(){this.current=null},_changeState:function(a,
b){var c="dojoDnd"+a,d=a.toLowerCase()+"State";dojo.replaceClass(this.node,c+b,c+this[d]);this[d]=b},_addItemClass:function(a,b){dojo.addClass(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){dojo.removeClass(a,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}});
dojo._hasResource["dijit.tree._dndSelector"]||(dojo._hasResource["dijit.tree._dndSelector"]=!0,dojo.provide("dijit.tree._dndSelector"),dojo.declare("dijit.tree._dndSelector",dijit.tree._dndContainer,{constructor:function(){this.selection={};this.anchor=null;dijit.setWaiState(this.tree.domNode,"multiselect",!this.singular);this.events.push(dojo.connect(this.tree.domNode,"onmousedown",this,"onMouseDown"),dojo.connect(this.tree.domNode,"onmouseup",this,"onMouseUp"),dojo.connect(this.tree.domNode,"onmousemove",
this,"onMouseMove"))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,c;for(c in b)a.push(b[c]);return a},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));if(b)this.anchor=a;return a},removeTreeNode:function(a){this.setSelection(this._setDifference(this.getSelectedTreeNodes(),[a]));return a},isTreeNodeSelected:function(a){return a.id&&
!!this.selection[a.id]},setSelection:function(a){var b=this.getSelectedTreeNodes();dojo.forEach(this._setDifference(b,a),dojo.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));dojo.forEach(this._setDifference(a,b),dojo.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){dojo.forEach(b,function(a){a.__exclude__=!0});var c=dojo.filter(a,function(a){return!a.__exclude__});
dojo.forEach(b,function(a){delete a.__exclude__});return c},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),b=[],c=[];dojo.forEach(a,function(a){c.push(a);b.push(a.getTreePath())});a=dojo.map(c,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onMouseDown:function(a){if(this.current&&!this.tree.isExpandoNode(a.target,
this.current)&&a.button!=dojo.mouseButtons.RIGHT){dojo.stopEvent(a);var b=this.current,c=dojo.isCopyKey(a),d=b.id;!this.singular&&!a.shiftKey&&this.selection[d]?this._doDeselect=!0:(this._doDeselect=!1,this.userSelect(b,c,a.shiftKey))}},onMouseUp:function(a){if(this._doDeselect)this._doDeselect=!1,this.userSelect(this.current,dojo.isCopyKey(a),a.shiftKey)},onMouseMove:function(){this._doDeselect=!1},userSelect:function(a,b,c){if(this.singular)this.anchor==a&&b?this.selectNone():(this.setSelection([a]),
this.anchor=a);else if(c&&this.anchor){c=this.anchor;dijit.tree._compareNodes(this.anchor.rowNode,a.rowNode)<0?b=c:(b=a,a=c);for(nodes=[];b!=a;)nodes.push(b),b=this.tree._getNextNode(b);nodes.push(a);this.setSelection(nodes)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},forInSelectedItems:function(a,b){var b=b||dojo.global,c;for(c in this.selection)a.call(b,this.getItem(c),c,this)}}));
dojo._hasResource["dijit.Tree"]||(dojo._hasResource["dijit.Tree"]=!0,dojo.provide("dijit.Tree"),dojo.declare("dijit._TreeNode",[dijit._Widget,dijit._Templated,dijit._Container,dijit._Contained,dijit._CssStateMixin],{item:null,isTreeNode:!0,label:"",isExpandable:null,isExpanded:!1,state:"UNCHECKED",templateString:dojo.cache("dijit","templates/TreeNode.html",'<div class="dijitTreeNode" role="presentation"\n\t><div dojoAttachPoint="rowNode" class="dijitTreeRow" role="presentation" dojoAttachEvent="onmouseenter:_onMouseEnter, onmouseleave:_onMouseLeave, onclick:_onClick, ondblclick:_onDblClick"\n\t\t><img src="${_blankGif}" alt="" dojoAttachPoint="expandoNode" class="dijitTreeExpando" role="presentation"\n\t\t/><span dojoAttachPoint="expandoNodeText" class="dijitExpandoText" role="presentation"\n\t\t></span\n\t\t><span dojoAttachPoint="contentNode"\n\t\t\tclass="dijitTreeContent" role="presentation">\n\t\t\t<img src="${_blankGif}" alt="" dojoAttachPoint="iconNode" class="dijitIcon dijitTreeIcon" role="presentation"\n\t\t\t/><span dojoAttachPoint="labelNode" class="dijitTreeLabel" role="treeitem" tabindex="-1" aria-selected="false" dojoAttachEvent="onfocus:_onLabelFocus"></span>\n\t\t</span\n\t></div>\n\t<div dojoAttachPoint="containerNode" class="dijitTreeContainer" role="presentation" style="display: none;"></div>\n</div>\n'),
baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow",labelNode:"dijitTreeLabel"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"labelNode",type:"innerText"},tooltip:{node:"rowNode",type:"attribute",attribute:"title"}}),buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&dijit.setWaiState(this.labelNode,"expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=
Math.max(a,0)*this.tree._nodePixelIndent+"px";dojo.style(this.domNode,"backgroundPosition",b+" 0px");dojo.style(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);dojo.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="LOADING";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,
"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,"row","Row")},_applyClassAndStyle:function(a,b,c){var d="_"+b+"Class";b+="Node";var e=this[d];this[d]=this.tree["get"+c+"Class"](a,this.isExpanded);dojo.replaceClass(this[b],this[d]||"",e||"");dojo.style(this[b],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent();!a||a.rowNode.style.display=="none"?dojo.addClass(this.domNode,"dijitTreeIsRoot"):dojo.toggleClass(this.domNode,
"dijitTreeIsLast",!this.getNextSibling())},_setExpando:function(a){var b=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],a=a?0:this.isExpandable?this.isExpanded?1:2:3;dojo.replaceClass(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return this._expandDeferred;this._wipeOut&&this._wipeOut.stop();this.isExpanded=!0;dijit.setWaiState(this.labelNode,"expanded","true");(this.tree.showRoot||
this!==this.tree.rootNode)&&dijit.setWaiRole(this.containerNode,"group");dojo.addClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&dijit.setWaiState(this.tree.domNode,"expanded","true");var a,b=dojo.fx.wipeIn({node:this.containerNode,duration:dijit.defaultDuration,onEnd:function(){a.callback(!0)}});a=this._expandDeferred=new dojo.Deferred(function(){b.stop()});b.play();return a},collapse:function(){if(this.isExpanded){this._expandDeferred&&
(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;dijit.setWaiState(this.labelNode,"expanded","false");this==this.tree.rootNode&&dijit.setWaiState(this.tree.domNode,"expanded","false");dojo.removeClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(!this._wipeOut)this._wipeOut=dojo.fx.wipeOut({node:this.containerNode,duration:dijit.defaultDuration});this._wipeOut.play()}},indent:0,setChildItems:function(a){var b=this.tree,
c=b.model,d=[];dojo.forEach(this.getChildren(),function(a){dijit._Container.prototype.removeChild.call(this,a)},this);this.state="LOADED";a&&a.length>0?(this.isExpandable=!0,dojo.forEach(a,function(a){var f=c.getIdentity(a),g=b._itemNodesMap[f],h;if(g)for(var j=0;j<g.length;j++)if(g[j]&&!g[j].getParent()){h=g[j];h.set("indent",this.indent+1);break}h||(h=this.tree._createTreeNode({item:a,tree:b,isExpandable:c.mayHaveChildren(a),label:b.getLabel(a),tooltip:b.getTooltip(a),dir:b.dir,lang:b.lang,indent:this.indent+
1}),g?g.push(h):b._itemNodesMap[f]=[h]);this.addChild(h);(this.tree.autoExpand||this.tree._state(a))&&d.push(b._expandNode(h))},this),dojo.forEach(this.getChildren(),function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);if(this==b.rootNode)(a=this.tree.showRoot?this:this.getChildren()[0])?(a.setFocusable(!0),b.lastFocused=a):b.domNode.setAttribute("tabIndex","0");return new dojo.DeferredList(d)},getTreePath:function(){for(var a=
this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();if(b.length==0)this.isExpandable=!1,this.collapse();dojo.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},_onLabelFocus:function(){this.tree._onNodeFocus(this)},setSelected:function(a){dijit.setWaiState(this.labelNode,
"selected",a);dojo.toggleClass(this.rowNode,"dijitTreeRowSelected",a)},setFocusable:function(a){this.labelNode.setAttribute("tabIndex",a?"0":"-1")},_onClick:function(a){this.tree._onClick(this,a)},_onDblClick:function(a){this.tree._onDblClick(this,a)},_onMouseEnter:function(a){this.tree._onNodeMouseEnter(this,a)},_onMouseLeave:function(a){this.tree._onNodeMouseLeave(this,a)}}),dojo.declare("dijit.Tree",[dijit._Widget,dijit._Templated],{store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],
paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:dojo.cache("dijit","templates/Tree.html",'<div class="dijitTree dijitTreeContainer" role="tree"\n\tdojoAttachEvent="onkeypress:_onKeyPress">\n\t<div class="dijitInline dijitTreeIndent" style="position: absolute; top: -9999px" dojoAttachPoint="indentDetector"></div>\n</div>\n'),persist:!0,autoExpand:!1,dndController:"dijit.tree._dndSelector",dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance",
"checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){dojo.publish(this.id,[dojo.mixin({tree:this,event:a},b||{})])},postMixInProperties:function(){this.tree=this;if(this.autoExpand)this.persist=!1;this._itemNodesMap={};if(!this.cookieName)this.cookieName=this.id+"SaveStateCookie";this._loadDeferred=new dojo.Deferred;this.inherited(arguments)},
postCreate:function(){this._initState();this.model||this._store2model();this.connect(this.model,"onChange","_onItemChange");this.connect(this.model,"onChildrenChange","_onItemChildrenChange");this.connect(this.model,"onDelete","_onItemDelete");this._load();this.inherited(arguments);if(this.dndController){if(dojo.isString(this.dndController))this.dndController=dojo.getObject(this.dndController);for(var a={},b=0;b<this.dndParams.length;b++)this[this.dndParams[b]]&&(a[this.dndParams[b]]=this[this.dndParams[b]]);
this.dndController=new this.dndController(this,a)}},_store2model:function(){this._v10Compat=!0;dojo.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren)a.mayHaveChildren=dojo.hitch(this,"mayHaveChildren");if(this.params.getItemChildren)a.getChildren=dojo.hitch(this,function(a,c,d){this.getItemChildren(this._v10Compat&&a===
this.model.root?null:a,c,d)});this.model=new dijit.tree.ForestStoreModel(a);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(dojo.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),indent:this.showRoot?0:-1});if(!this.showRoot)b.rowNode.style.display="none",dijit.setWaiRole(this.domNode,"presentation"),dijit.setWaiRole(b.labelNode,"presentation"),dijit.setWaiRole(b.containerNode,
"tree");this.domNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).addCallback(dojo.hitch(this,function(){this._loadDeferred.callback(!0);this.onLoad()}))}),function(a){console.error(this,": error loading root: ",a)})},getNodesByItem:function(a){return!a?[]:[].concat(this._itemNodesMap[dojo.isString(a)?a:this.model.getIdentity(a)])},_setSelectedItemAttr:function(a){this.set("selectedItems",
[a])},_setSelectedItemsAttr:function(a){var b=this;this._loadDeferred.addCallback(dojo.hitch(this,function(){var c=dojo.map(a,function(a){return!a||dojo.isString(a)?a:b.model.getIdentity(a)}),d=[];dojo.forEach(c,function(a){d=d.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",d)}))},_setPathAttr:function(a){return a.length?this.set("paths",[a]):this.set("paths",[])},_setPathsAttr:function(a){function b(a,e,f){var g=a.shift(),h=dojo.filter(e,function(a){return a.getIdentity()==g})[0];h?a.length?
c._expandNode(h).addCallback(function(){b(a,h.getChildren(),f)}):f.callback(h):f.errback("Could not expand path at "+g)}var c=this;return(new dojo.DeferredList(dojo.map(a,function(a){var e=new dojo.Deferred,a=dojo.map(a,function(a){return dojo.isString(a)?a:c.model.getIdentity(a)});a.length?c._loadDeferred.addCallback(function(){b(a,[c.rootNode],e)}):e.errback("Empty path");return e}))).addCallback(function(a){c.set("selectedNodes",dojo.map(dojo.filter(a,function(a){return a[0]}),function(a){return a[1]}))})},
_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this._loadDeferred.addCallback(dojo.hitch(this,function(){this.dndController.setSelection(a)}))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},
getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onKeyPress:function(a){if(!a.altKey){var b=dojo.keys,c=dijit.getEnclosingWidget(a.target);if(c){var d=a.charOrCode;if(typeof d=="string"&&d!=" ")!a.altKey&&!a.ctrlKey&&!a.shiftKey&&!a.metaKey&&(this._onLetterKeyNav({node:c,key:d.toLowerCase()}),dojo.stopEvent(a));else{this._curSearch&&(clearTimeout(this._curSearch.timer),delete this._curSearch);var e=this._keyHandlerMap;if(!e)e={},e[b.ENTER]="_onEnterKey",e[b.SPACE]=
e[" "]="_onEnterKey",e[this.isLeftToRight()?b.LEFT_ARROW:b.RIGHT_ARROW]="_onLeftArrow",e[this.isLeftToRight()?b.RIGHT_ARROW:b.LEFT_ARROW]="_onRightArrow",e[b.UP_ARROW]="_onUpArrow",e[b.DOWN_ARROW]="_onDownArrow",e[b.HOME]="_onHomeKey",e[b.END]="_onEndKey",this._keyHandlerMap=e;this._keyHandlerMap[d]&&(this[this._keyHandlerMap[d]]({node:c,item:c.item,evt:a}),dojo.stopEvent(a))}}}},_onEnterKey:function(a){this._publish("execute",{item:a.item,node:a.node});this.dndController.userSelect(a.node,dojo.isCopyKey(a.evt),
a.evt.shiftKey);this.onClick(a.item,a.node,a.evt)},_onDownArrow:function(a){(a=this._getNextNode(a.node))&&a.isTreeNode&&this.focusNode(a)},_onUpArrow:function(a){var a=a.node,b=a.getPreviousSibling();if(b)for(a=b;a.isExpandable&&a.isExpanded&&a.hasChildren();)a=a.getChildren(),a=a[a.length-1];else if(b=a.getParent(),this.showRoot||b!==this.rootNode)a=b;a&&a.isTreeNode&&this.focusNode(a)},_onRightArrow:function(a){a=a.node;a.isExpandable&&!a.isExpanded?this._expandNode(a):a.hasChildren()&&(a=a.getChildren()[0])&&
a.isTreeNode&&this.focusNode(a)},_onLeftArrow:function(a){a=a.node;a.isExpandable&&a.isExpanded?this._collapseNode(a):(a=a.getParent())&&a.isTreeNode&&(this.showRoot||a!==this.rootNode)&&this.focusNode(a)},_onHomeKey:function(){var a=this._getRootOrFirstNode();a&&this.focusNode(a)},_onEndKey:function(){for(var a=this.rootNode;a.isExpanded;)a=a.getChildren(),a=a[a.length-1];a&&a.isTreeNode&&this.focusNode(a)},multiCharSearchDuration:250,_onLetterKeyNav:function(a){var b=this._curSearch;b?(b.pattern+=
a.key,clearTimeout(b.timer)):b=this._curSearch={pattern:a.key,startNode:a.node};var c=this;b.timer=setTimeout(function(){delete c._curSearch},this.multiCharSearchDuration);a=b.startNode;do(a=this._getNextNode(a))||(a=this._getRootOrFirstNode());while(a!==b.startNode&&a.label.toLowerCase().substr(0,b.pattern.length)!=b.pattern);a&&a.isTreeNode&&a!==b.startNode&&this.focusNode(a)},isExpandoNode:function(a,b){return dojo.isDescendant(a,b.expandoNode)},_onClick:function(a,b){var c=this.isExpandoNode(b.target,
a);this.openOnClick&&a.isExpandable||c?a.isExpandable&&this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this.onClick(a.item,a,b),this.focusNode(a));dojo.stopEvent(b)},_onDblClick:function(a,b){var c=b.target,c=c==a.expandoNode||c==a.expandoNodeText;this.openOnDblClick&&a.isExpandable||c?a.isExpandable&&this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this.onDblClick(a.item,a,b),this.focusNode(a));dojo.stopEvent(b)},_onExpandoClick:function(a){a=
a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];else{for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null}},_getRootOrFirstNode:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_collapseNode:function(a){a._expandNodeDeferred&&
delete a._expandNodeDeferred;a.isExpandable&&a.state!="LOADING"&&(a.collapse(),this.onClose(a.item,a),a.item&&(this._state(a.item,!1),this._saveState()))},_expandNode:function(a,b){if(a._expandNodeDeferred&&!b)return a._expandNodeDeferred;var c=this.model,d=a.item,e=this;switch(a.state){case "UNCHECKED":a.markProcessing();var f=a._expandNodeDeferred=new dojo.Deferred;c.getChildren(d,function(b){a.unmarkProcessing();var b=a.setChildItems(b),c=e._expandNode(a,!0);b.addCallback(function(){c.addCallback(function(){f.callback()})})},
function(a){console.error(e,": error loading root children: ",a)});break;default:f=a._expandNodeDeferred=a.expand(),this.onOpen(a.item,a),d&&(this._state(d,!0),this._saveState())}return f},focusNode:function(a){dijit.focus(a.labelNode)},_onNodeFocus:function(a){if(a&&a!=this.lastFocused)this.lastFocused&&!this.lastFocused._destroyed&&this.lastFocused.setFocusable(!1),a.setFocusable(!0),this.lastFocused=a},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=
this._itemNodesMap[this.model.getIdentity(a)];if(b){var c=this.getLabel(a),d=this.getTooltip(a);dojo.forEach(b,function(b){b.set({item:a,label:c,tooltip:d});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var c=this._itemNodesMap[this.model.getIdentity(a)];c&&dojo.forEach(c,function(a){a.setChildItems(b)})},_onItemDelete:function(a){var a=this.model.getIdentity(a),b=this._itemNodesMap[a];b&&(dojo.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);
a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){if(this.persist){var a=dojo.cookie(this.cookieName);this._openedItemIds={};a&&dojo.forEach(a.split(","),function(a){this._openedItemIds[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=this.model.getIdentity(a);if(arguments.length===1)return this._openedItemIds[c];b?this._openedItemIds[c]=!0:delete this._openedItemIds[c]},_saveState:function(){if(this.persist){var a=[],b;for(b in this._openedItemIds)a.push(b);
dojo.cookie(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(clearTimeout(this._curSearch.timer),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!dojo.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&dojo.marginBox(this.domNode,a);this._nodePixelIndent=dojo._getMarginSize(this.tree.indentDetector).w;this.tree.rootNode&&
this.tree.rootNode.set("indent",this.showRoot?0:-1)},_createTreeNode:function(a){return new dijit._TreeNode(a)}}));
dojo._hasResource["dijit.form._FormWidget"]||(dojo._hasResource["dijit.form._FormWidget"]=!0,dojo.provide("dijit.form._FormWidget"),dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=
this.name?'name="'+this.name.replace(/'/g,"&quot;")+'"':"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousedown","_onMouseDown")},_setDisabledAttr:function(a){this._set("disabled",a);dojo.attr(this.focusNode,"disabled",a);this.valueNode&&dojo.attr(this.valueNode,"disabled",a);dijit.setWaiState(this.focusNode,"disabled",a);a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"focusNode",
dojo.forEach(dojo.isArray(a)?a:[a],function(a){a=this[a];dojo.isWebKit||dijit.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):this.tabIndex!=""&&this.focusNode.setAttribute("tabIndex",this.tabIndex)},setDisabled:function(a){dojo.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},_onFocus:function(a){this.scrollOnFocus&&dojo.window.scrollIntoView(this.domNode);this.inherited(arguments)},isFocusable:function(){return!this.disabled&&
this.focusNode&&dojo.style(this.domNode,"display")!="none"},focus:function(){this.disabled||dijit.focus(this.focusNode)},compare:function(a,b){return typeof a=="number"&&typeof b=="number"?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(this._lastValueReported==void 0&&(b===null||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||
this.compare(a,this._lastValueReported)!=0;if((this.intermediateChanges||b||b===void 0)&&this._pendingOnChange)if(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive)this._onChangeHandle&&clearTimeout(this._onChangeHandle),this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(a)}),0)},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(clearTimeout(this._onChangeHandle),this.onChange(this._lastValueReported));
this.inherited(arguments)},setValue:function(a){dojo.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_onMouseDown:function(a){if(!a.ctrlKey&&dojo.mouseButtons.isLeft(a)&&this.isFocusable())var b=this.connect(dojo.body(),"onmouseup",function(){this.isFocusable()&&this.focus();
this.disconnect(b)})}}),dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:!1,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function(a){dojo.attr(this.focusNode,"readOnly",a);dijit.setWaiState(this.focusNode,"readonly",a);this._set("readOnly",a)},postCreate:function(){this.inherited(arguments);if(dojo.isIE<9||dojo.isIE&&dojo.isQuirks)this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);
if(this._resetValue===void 0)this._lastValueReported=this._resetValue=this.value},_setValueAttr:function(a,b){this._handleOnChange(a,b)},_handleOnChange:function(a,b){this._set("value",a);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)},_onKeyDown:function(a){if(a.keyCode==dojo.keys.ESCAPE&&!a.ctrlKey&&!a.altKey&&!a.metaKey){var b;if(dojo.isIE)a.preventDefault(),b=document.createEventObject(),
b.keyCode=dojo.keys.ESCAPE,b.shiftKey=a.shiftKey,a.srcElement.fireEvent("onkeypress",b)}},_layoutHackIE7:function(){if(dojo.isIE==7)for(var a=this.domNode,b=a.parentNode,c=a.firstChild||a,d=c.style.filter,e=this;b&&b.clientHeight==0;)(function(){var a=e.connect(b,"onscroll",function(){e.disconnect(a);c.style.filter=(new Date).getMilliseconds();setTimeout(function(){c.style.filter=d},0)})})(),b=b.parentNode}}));
dojo._hasResource["dijit._HasDropDown"]||(dojo._hasResource["dijit._HasDropDown"]=!0,dojo.provide("dijit._HasDropDown"),dojo.declare("dijit._HasDropDown",null,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){if(!this.disabled&&!this.readOnly)dojo.stopEvent(a),this._docHandler=this.connect(dojo.doc,"onmouseup","_onDropDownMouseUp"),
this.toggleDropDown()},_onDropDownMouseUp:function(a){a&&this._docHandler&&this.disconnect(this._docHandler);var b=this.dropDown,c=!1;if(a&&this._opened){var d=dojo.position(this._buttonNode,!0);if(!(a.pageX>=d.x&&a.pageX<=d.x+d.w)||!(a.pageY>=d.y&&a.pageY<=d.y+d.h)){for(d=a.target;d&&!c;)dojo.hasClass(d,"dijitPopup")?c=!0:d=d.parentNode;if(c){d=a.target;if(b.onItemClick){for(var e;d&&!(e=dijit.byNode(d));)d=d.parentNode;if(e&&e.onClick&&e.getParent)e.getParent().onItemClick(e,a)}return}}}this._opened&&
b.focus&&b.autoFocus!==!1&&window.setTimeout(dojo.hitch(b,"focus"),1)},_onDropDownClick:function(a){this._stopClickEvents&&dojo.stopEvent(a)},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||
this.dropDownPosition[0]||"Down";dojo.addClass(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);this.connect(this._buttonNode,"onmousedown","_onDropDownMouseDown");this.connect(this._buttonNode,"onclick","_onDropDownClick");this.connect(this.focusNode,"onkeypress","_onKey");this.connect(this.focusNode,"onkeyup","_onKeyUp")},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);
this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,c=a.target;if(b&&this._opened&&b.handleKey&&b.handleKey(a)===!1)dojo.stopEvent(a);else if(b&&this._opened&&a.charOrCode==dojo.keys.ESCAPE)this.closeDropDown(),dojo.stopEvent(a);else if(!this._opened&&(a.charOrCode==dojo.keys.DOWN_ARROW||(a.charOrCode==dojo.keys.ENTER||a.charOrCode==" ")&&((c.tagName||"").toLowerCase()!=="input"||c.type&&c.type.toLowerCase()!=="text")))this._toggleOnKeyUp=!0,dojo.stopEvent(a)}},
_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&setTimeout(dojo.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(dijit._curFocus&&this.dropDown&&dojo.isDescendant(dijit._curFocus,this.dropDown.domNode));this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown():this.isLoaded()?this.openDropDown():
this.loadDropDown(dojo.hitch(this,"openDropDown")))},openDropDown:function(){var a=this.dropDown,b=a.domNode,c=this._aroundNode||this.domNode,d=this;if(!this._preparedNode){this._preparedNode=!0;if(b.style.width)this._explicitDDWidth=!0;if(b.style.height)this._explicitDDHeight=!0}if(this.maxHeight||this.forceWidth||this.autoWidth){var e={display:"",visibility:"hidden"};if(!this._explicitDDWidth)e.width="";if(!this._explicitDDHeight)e.height="";dojo.style(b,e);e=this.maxHeight;if(e==-1)var e=dojo.window.getBox(),
f=dojo.position(c,!1),e=Math.floor(Math.max(f.y,e.h-(f.y+f.h)));a.startup&&!a._started&&a.startup();dijit.popup.moveOffScreen(a);var f=dojo._getMarginSize(b),g=e&&f.h>e;dojo.style(b,{overflowX:"hidden",overflowY:g?"auto":"hidden"});g?(f.h=e,"w"in f&&(f.w+=16)):delete f.h;this.forceWidth?f.w=c.offsetWidth:this.autoWidth?f.w=Math.max(f.w,c.offsetWidth):delete f.w;dojo.isFunction(a.resize)?a.resize(f):dojo.marginBox(b,f)}a=dijit.popup.open({parent:this,popup:a,around:c,orient:dijit.getPopupAroundAlignment(this.dropDownPosition&&
this.dropDownPosition.length?this.dropDownPosition:["below"],this.isLeftToRight()),onExecute:function(){d.closeDropDown(!0)},onCancel:function(){d.closeDropDown(!0)},onClose:function(){dojo.attr(d._popupStateNode,"popupActive",!1);dojo.removeClass(d._popupStateNode,"dijitHasDropDownOpen");d._opened=!1}});dojo.attr(this._popupStateNode,"popupActive","true");dojo.addClass(d._popupStateNode,"dijitHasDropDownOpen");this._opened=!0;return a},closeDropDown:function(a){if(this._opened)a&&this.focus(),dijit.popup.close(this.dropDown),
this._opened=!1}}));
dojo._hasResource["dijit.form.Button"]||(dojo._hasResource["dijit.form.Button"]=!0,dojo.provide("dijit.form.Button"),dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:!0,iconClass:"",type:"button",baseClass:"dijitButton",templateString:dojo.cache("dijit.form","templates/Button.html",'<span class="dijit dijitReset dijitInline"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdojoAttachEvent="ondijitclick:_onButtonClick"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdojoAttachPoint="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" dojoAttachPoint="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdojoAttachPoint="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdojoAttachPoint="valueNode"\n/></span>\n'),attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,
{value:"valueNode"}),_onClick:function(a){if(this.disabled)return!1;this._clicked();return this.onClick(a)},_onButtonClick:function(a){if(this._onClick(a)===!1)a.preventDefault();else if(this.type=="submit"&&!(this.valueNode||this.focusNode).form)for(var b=this.domNode;b.parentNode;b=b.parentNode){var c=dijit.byNode(b);if(c&&typeof c._onSubmit=="function"){c._onSubmit(a);break}}else this.valueNode&&(this.valueNode.click(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.focusNode,
!1)},_fillContent:function(a){a&&(!this.params||!("label"in this.params))&&this.set("label",a.innerHTML)},_setShowLabelAttr:function(a){this.containerNode&&dojo.toggleClass(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},onClick:function(){return!0},_clicked:function(){},setLabel:function(a){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},_setLabelAttr:function(a){this._set("label",a);this.containerNode.innerHTML=
a;if(this.showLabel==!1&&!this.params.title)this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"")},_setIconClassAttr:function(a){dojo.replaceClass(this.iconNode,a||"dijitNoIcon",this.iconClass||"dijitNoIcon");this._set("iconClass",a)}}),dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container,dijit._HasDropDown],{baseClass:"dijitDropDownButton",templateString:dojo.cache("dijit.form","templates/DropDownButton.html",'<span class="dijit dijitReset dijitInline"\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\tdojoAttachEvent="ondijitclick:_onButtonClick" dojoAttachPoint="_buttonNode"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdojoAttachPoint="focusNode,titleNode,_arrowWrapperNode"\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\n\t\t\t\tdojoAttachPoint="iconNode"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tdojoAttachPoint="containerNode,_popupStateNode"\n\t\t\t\tid="${id}_label"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdojoAttachPoint="valueNode"\n/></span>\n'),
_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(a);delete this.dropDownContainer}this.dropDown&&dijit.popup.hide(this.dropDown);this.inherited(arguments)}},isLoaded:function(){var a=this.dropDown;
return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(){var a=this.dropDown;if(a)if(this.isLoaded())this.openDropDown();else{var b=dojo.connect(a,"onLoad",this,function(){dojo.disconnect(b);this.openDropDown()});a.refresh()}},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}}),dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:dojo.cache("dijit.form","templates/ComboButton.html",'<table class="dijit dijitReset dijitInline dijitLeft"\n\tcellspacing=\'0\' cellpadding=\'0\' role="presentation"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonNode" dojoAttachPoint="buttonNode" dojoAttachEvent="ondijitclick:_onButtonClick,onkeypress:_onButtonKeyPress"\n\t\t><div id="${id}_button" class="dijitReset dijitButtonContents"\n\t\t\tdojoAttachPoint="titleNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><div class="dijitReset dijitInline dijitIcon" dojoAttachPoint="iconNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode" role="presentation"></div\n\t\t></div\n\t\t></td\n\t\t><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\n\t\t\tdojoAttachPoint="_popupStateNode,focusNode,_buttonNode"\n\t\t\tdojoAttachEvent="onkeypress:_onArrowKeyPress"\n\t\t\ttitle="${optionsTitle}"\n\t\t\trole="button" aria-haspopup="true"\n\t\t\t><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\n\t\t\t><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\n\t\t></td\n\t\t><td style="display:none !important;"\n\t\t\t><input ${!nameAttrSetting} type="${type}" value="${value}" dojoAttachPoint="valueNode"\n\t\t/></td></tr></tbody\n></table>\n'),
attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"],title:"titleNode"}),optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(a){if(a.charOrCode==dojo.keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"])dijit.focus(this._popupStateNode),dojo.stopEvent(a)},_onArrowKeyPress:function(a){if(a.charOrCode==
dojo.keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"])dijit.focus(this.titleNode),dojo.stopEvent(a)},focus:function(a){this.disabled||dijit.focus(a=="start"?this.titleNode:this._popupStateNode)}}),dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:!1,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(){this.set("checked",!this.checked)},_setCheckedAttr:function(a,b){this._set("checked",
a);dojo.attr(this.focusNode||this.domNode,"checked",a);dijit.setWaiState(this.focusNode||this.domNode,"pressed",a);this._handleOnChange(a,b)},setChecked:function(a){dojo.deprecated("setChecked("+a+") is deprecated. Use set('checked',"+a+") instead.","","2.0");this.set("checked",a)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}}));
dojo._hasResource["dijit._editor._Plugin"]||(dojo._hasResource["dijit._editor._Plugin"]=!0,dojo.provide("dijit._editor._Plugin"),dojo.declare("dijit._editor._Plugin",null,{constructor:function(a){this.params=a||{};dojo.mixin(this,this.params);this._connects=[];this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:dijit.form.Button,disabled:!1,getLabel:function(a){return this.editor.commands[a]},_initButton:function(){if(this.command.length){var a=
this.getLabel(this.command),b=this.editor,c=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button)this.button=new this.buttonClass(dojo.mixin({label:a,dir:b.dir,lang:b.lang,showLabel:!1,iconClass:c,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);this.dropDown&&this.dropDown.destroyRecursive()},
connect:function(a,b,c){this._connects.push(dojo.connect(a,b,this,c))},updateState:function(){var a=this.editor,b=this.command,c,d;if(a&&a.isLoaded&&b.length){var e=this.get("disabled");if(this.button)try{d=!e&&a.queryCommandEnabled(b);if(this.enabled!==d)this.enabled=d,this.button.set("disabled",!d);if(typeof this.button.checked=="boolean"&&(c=a.queryCommandState(b),this.checked!==c))this.checked=c,this.button.set("checked",a.queryCommandState(b))}catch(f){console.log(f)}}},setEditor:function(a){this.editor=
a;this._initButton();if(this.button&&this.useDefaultCommand)this.editor.queryCommandAvailable(this.command)?this.connect(this.button,"onClick",dojo.hitch(this.editor,"execCommand",this.command,this.commandArg)):this.button.domNode.style.display="none";this.connect(this.editor,"onNormalizedDisplayChanged","updateState")},setToolbar:function(a){this.button&&a.addChild(this.button)},set:function(a,b){if(typeof a==="object"){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);if(this[c.s])var d=
this[c.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(a,b);return d||this},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this[a]},_setDisabledAttr:function(a){this.disabled=a;this.updateState()},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.charAt(0).toUpperCase()+a.substr(1);return b[a]={s:"_set"+c+"Attr",g:"_get"+c+"Attr"}},_set:function(a,b){this[a]=b}}));
if(!dojo._hasResource["dijit._editor.range"]&&(dojo._hasResource["dijit._editor.range"]=!0,dojo.provide("dijit._editor.range"),dijit.range={},dijit.range.getIndex=function(a,b){for(var c=[],d=[],e=a,f,g;a!=b;){var h=0;for(f=a.parentNode;g=f.childNodes[h++];)if(g===a){--h;break}c.unshift(h);d.unshift(h-f.childNodes.length);a=f}if(c.length>0&&e.nodeType==3){for(g=e.previousSibling;g&&g.nodeType==3;)c[c.length-1]--,g=g.previousSibling;for(g=e.nextSibling;g&&g.nodeType==3;)d[d.length-1]++,g=g.nextSibling}return{o:c,
r:d}},dijit.range.getNode=function(a,b){if(!dojo.isArray(a)||a.length==0)return b;var c=b;dojo.every(a,function(a){if(a>=0&&a<c.childNodes.length)c=c.childNodes[a];else return c=null,!1;return!0});return c},dijit.range.getCommonAncestor=function(a,b,c){for(var c=c||a.ownerDocument.body,d=function(a){for(var b=[];a;)if(b.unshift(a),a!==c)a=a.parentNode;else break;return b},a=d(a),b=d(b),d=Math.min(a.length,b.length),e=a[0],f=1;f<d;f++)if(a[f]===b[f])e=a[f];else break;return e},dijit.range.getAncestor=
function(a,b,c){for(c=c||a.ownerDocument.body;a&&a!==c;){var d=a.nodeName.toUpperCase();if(b.test(d))return a;a=a.parentNode}return null},dijit.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,dijit.range.getBlockAncestor=function(a,b,c){for(var c=c||a.ownerDocument.body,b=b||dijit.range.BlockTagNames,d=null,e;a&&a!==c;){var f=a.nodeName.toUpperCase();!d&&b.test(f)&&(d=a);!e&&/^(?:BODY|TD|TH|CAPTION)$/.test(f)&&(e=a);a=a.parentNode}return{blockNode:d,blockContainer:e||
a.ownerDocument.body}},dijit.range.atBeginningOfContainer=function(a,b,c){var d=!1,e=c==0;!e&&b.nodeType==3&&/^[\s\xA0]+$/.test(b.nodeValue.substr(0,c))&&(e=!0);if(e)for(d=!0;b&&b!==a;){if(b.previousSibling){d=!1;break}b=b.parentNode}return d},dijit.range.atEndOfContainer=function(a,b,c){var d=!1,e=c==(b.length||b.childNodes.length);!e&&b.nodeType==3&&/^[\s\xA0]+$/.test(b.nodeValue.substr(c))&&(e=!0);if(e)for(d=!0;b&&b!==a;){if(b.nextSibling){d=!1;break}b=b.parentNode}return d},dijit.range.adjacentNoneTextNode=
function(a,b){for(var c=a,d=0-a.length||0,e=b?"nextSibling":"previousSibling";c;){if(c.nodeType!=3)break;d+=c.length;c=c[e]}return[c,d]},dijit.range._w3c=Boolean(window.getSelection),dijit.range.create=function(a){return dijit.range._w3c?(a||dojo.global).document.createRange():new dijit.range.W3CRange},dijit.range.getSelection=function(a,b){if(dijit.range._w3c)return a.getSelection();else{var c=new dijit.range.ie.selection(a);b||c._getCurrentSelection();return c}},!dijit.range._w3c))dijit.range.ie=
{cachedSelection:{},selection:function(a){this._ranges=[];this.addRange=function(a,c){this._ranges.push(a);c||a._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(a){return this._ranges[a]};this._getCurrentSelection=function(){this.removeAllRanges();var b;b=a.document.selection.createRange();(b=a.document.selection.type.toUpperCase()=="CONTROL"?new dijit.range.W3CRange(dijit.range.ie.decomposeControlRange(b)):
new dijit.range.W3CRange(dijit.range.ie.decomposeTextRange(b)))&&this.addRange(b,!0)}},decomposeControlRange:function(a){var b=a.item(0),c=a.item(a.length-1),a=b.parentNode,d=c.parentNode,b=dijit.range.getIndex(b,a).o,c=dijit.range.getIndex(c,d).o+1;return[a,b,d,c]},getEndPoint:function(a,b){var c=a.duplicate();c.collapse(!b);var d="EndTo"+(b?"End":"Start"),e=c.parentElement(),f,g,h;e.childNodes.length>0?dojo.every(e.childNodes,function(b,j){var p;if(b.nodeType!=3)if(c.moveToElementText(b),c.compareEndPoints(d,
a)>0)if(h&&h.nodeType==3)f=h,p=!0;else return f=e,g=j,!1;else{if(j==e.childNodes.length-1)return f=e,g=e.childNodes.length,!1}else j==e.childNodes.length-1&&(f=b,p=!0);if(p&&f){f=(p=dijit.range.adjacentNoneTextNode(f)[0])?p.nextSibling:e.firstChild;var n=dijit.range.adjacentNoneTextNode(f);p=n[0];n=n[1];p?(c.moveToElementText(p),c.collapse(!1)):c.moveToElementText(e);c.setEndPoint(d,a);g=c.text.length-n;return!1}h=b;return!0}):(f=e,g=0);if(!b&&f.nodeType==1&&g==f.childNodes.length){var j=f.nextSibling;
j&&j.nodeType==3&&(f=j,g=0)}return[f,g]},setEndPoint:function(a,b,c){var a=a.duplicate(),d;if(b.nodeType!=3)if(c>0){if(d=b.childNodes[c-1])if(d.nodeType==3)b=d,c=d.length;else if(d.nextSibling&&d.nextSibling.nodeType==3)b=d.nextSibling,c=0;else{a.moveToElementText(d.nextSibling?d:b);var e=d.parentNode;d=e.insertBefore(d.ownerDocument.createTextNode(" "),d.nextSibling);a.collapse(!1);e.removeChild(d)}}else a.moveToElementText(b),a.collapse(!0);b.nodeType==3&&(d=dijit.range.adjacentNoneTextNode(b),
e=d[0],d=d[1],e?(a.moveToElementText(e),a.collapse(!1),e.contentEditable!="inherit"&&d++):(a.moveToElementText(b.parentNode),a.collapse(!0)),c+=d,c>0&&a.move("character",c)!=c&&console.error("Error when moving!"));return a},decomposeTextRange:function(a){var b=dijit.range.ie.getEndPoint(a),c=b[0],d=b[1],e=b[0],b=b[1];a.htmlText.length&&(a.htmlText==a.text?b=d+a.text.length:(b=dijit.range.ie.getEndPoint(a,!0),e=b[0],b=b[1]));return[c,d,e,b]},setRange:function(a,b,c,d,e,f){b=dijit.range.ie.setEndPoint(a,
b,c);a.setEndPoint("StartToStart",b);if(!f)var g=dijit.range.ie.setEndPoint(a,d,e);a.setEndPoint("EndToEnd",g||b);return a}},dojo.declare("dijit.range.W3CRange",null,{constructor:function(){arguments.length>0?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=this.startContainer!==
this.endContainer?dijit.range.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(a,b){b=parseInt(b);if(!(this.startContainer===a&&this.startOffset==b))delete this._cachedBookmark,this.startContainer=a,this.startOffset=b,this.endContainer?this._updateInternal():this.setEnd(a,b)},setEnd:function(a,b){b=parseInt(b);if(!(this.endContainer===a&&this.endOffset==b))delete this._cachedBookmark,
this.endContainer=a,this.endOffset=b,this.startContainer?this._updateInternal():this.setStart(a,b)},setStartAfter:function(a,b){this._setPoint("setStart",a,b,1)},setStartBefore:function(a,b){this._setPoint("setStart",a,b,0)},setEndAfter:function(a,b){this._setPoint("setEnd",a,b,1)},setEndBefore:function(a,b){this._setPoint("setEnd",a,b,0)},_setPoint:function(a,b,c,d){c=dijit.range.getIndex(b,b.parentNode).o;this[a](b.parentNode,c.pop()+d)},_getIERange:function(){var a=(this._body||this.endContainer.ownerDocument.body).createTextRange();
dijit.range.ie.setRange(a,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return a},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){this._getIERange().pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var a=new dijit.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);
a._body=this._body;return a},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});
dojo._hasResource["dijit._editor.selection"]||(dojo._hasResource["dijit._editor.selection"]=!0,dojo.provide("dijit._editor.selection"),dojo.getObject("_editor.selection",!0,dijit),dojo.mixin(dijit._editor.selection,{getType:function(){if(dojo.isIE<9)return dojo.doc.selection.type.toLowerCase();else{var a="text",b;try{b=dojo.global.getSelection()}catch(c){}b&&b.rangeCount==1&&(b=b.getRangeAt(0),b.startContainer==b.endContainer&&b.endOffset-b.startOffset==1&&b.startContainer.nodeType!=3&&(a="control"));
return a}},getSelectedText:function(){if(dojo.isIE<9)return dijit._editor.selection.getType()=="control"?null:dojo.doc.selection.createRange().text;else{var a=dojo.global.getSelection();if(a)return a.toString()}return""},getSelectedHtml:function(){if(dojo.isIE<9)return dijit._editor.selection.getType()=="control"?null:dojo.doc.selection.createRange().htmlText;else{var a=dojo.global.getSelection();if(a&&a.rangeCount){var b,c="";for(b=0;b<a.rangeCount;b++){var d=a.getRangeAt(b).cloneContents(),e=dojo.doc.createElement("div");
e.appendChild(d);c+=e.innerHTML}return c}return null}},getSelectedElement:function(){if(dijit._editor.selection.getType()=="control")if(dojo.isIE<9){var a=dojo.doc.selection.createRange();if(a&&a.item)return dojo.doc.selection.createRange().item(0)}else return a=dojo.global.getSelection(),a.anchorNode.childNodes[a.anchorOffset];return null},getParentElement:function(){if(dijit._editor.selection.getType()=="control"){var a=this.getSelectedElement();if(a)return a.parentNode}else if(dojo.isIE<9)return a=
dojo.doc.selection.createRange(),a.collapse(!0),a.parentElement();else if(a=dojo.global.getSelection()){for(a=a.anchorNode;a&&a.nodeType!=1;)a=a.parentNode;return a}return null},hasAncestorElement:function(a){return this.getAncestorElement.apply(this,arguments)!=null},getAncestorElement:function(a){return this.getParentOfType(this.getSelectedElement()||this.getParentElement(),arguments)},isTag:function(a,b){if(a&&a.tagName)for(var c=a.tagName.toLowerCase(),d=0;d<b.length;d++){var e=String(b[d]).toLowerCase();
if(c==e)return e}return""},getParentOfType:function(a,b){for(;a;){if(this.isTag(a,b).length)return a;a=a.parentNode}return null},collapse:function(a){if(window.getSelection){var b=dojo.global.getSelection();b.removeAllRanges?a?b.collapseToStart():b.collapseToEnd():b.collapse(a)}else dojo.isIE&&(b=dojo.doc.selection.createRange(),b.collapse(a),b.select())},remove:function(){var a=dojo.doc.selection;dojo.isIE<9?a.type.toLowerCase()!="none"&&a.clear():(a=dojo.global.getSelection(),a.deleteFromDocument());
return a},selectElementChildren:function(a,b){var c=dojo.global,d=dojo.doc,a=dojo.byId(a);if(d.selection&&dojo.isIE<9&&dojo.body().createTextRange){if(d=a.ownerDocument.body.createTextRange(),d.moveToElementText(a),!b)try{d.select()}catch(e){}}else c.getSelection&&(c=dojo.global.getSelection(),dojo.isOpera?(d=c.rangeCount?c.getRangeAt(0):d.createRange(),d.setStart(a,0),d.setEnd(a,a.nodeType==3?a.length:a.childNodes.length),c.addRange(d)):c.selectAllChildren(a))},selectElement:function(a,b){var c,
d=dojo.doc,e=dojo.global,a=dojo.byId(a);if(dojo.isIE<9&&dojo.body().createTextRange)try{var f=a.tagName?a.tagName.toLowerCase():"";c=f==="img"||f==="table"?dojo.body().createControlRange():dojo.body().createRange();c.addElement(a);b||c.select()}catch(g){this.selectElementChildren(a,b)}else dojo.global.getSelection&&(e=e.getSelection(),c=d.createRange(),e.removeAllRanges&&(dojo.isOpera&&e.getRangeAt(0)&&(c=e.getRangeAt(0)),c.selectNode(a),e.removeAllRanges(),e.addRange(c)))},inSelection:function(a){if(a){var b,
c=dojo.doc,d;if(dojo.global.getSelection){var e=dojo.global.getSelection();e&&e.rangeCount>0&&(d=e.getRangeAt(0));if(d&&d.compareBoundaryPoints&&c.createRange)try{if(b=c.createRange(),b.setStart(a,0),d.compareBoundaryPoints(d.START_TO_END,b)===1)return!0}catch(f){}}else if(c.selection){d=c.selection.createRange();try{(b=a.ownerDocument.body.createControlRange())&&b.addElement(a)}catch(g){try{b=a.ownerDocument.body.createTextRange(),b.moveToElementText(a)}catch(h){}}if(d&&b&&d.compareEndPoints("EndToStart",
b)===1)return!0}}return!1}}));
if(!dojo._hasResource["dojo.data.util.sorter"])dojo._hasResource["dojo.data.util.sorter"]=!0,dojo.provide("dojo.data.util.sorter"),dojo.getObject("data.util.sorter",!0,dojo),dojo.data.util.sorter.basicComparator=function(a,b){var c=-1;a===null&&(a=void 0);b===null&&(b=void 0);if(a==b)c=0;else if(a>b||a==null)c=1;return c},dojo.data.util.sorter.createSortFunction=function(a,b){function c(a,b,c,d){return function(e,f){var g=d.getValue(e,a),h=d.getValue(f,a);return b*c(g,h)}}for(var d=[],e,f=b.comparatorMap,
g=dojo.data.util.sorter.basicComparator,h=0;h<a.length;h++){e=a[h];var j=e.attribute;if(j){e=e.descending?-1:1;var k=g;f&&(typeof j!=="string"&&"toString"in j&&(j=j.toString()),k=f[j]||g);d.push(c(j,e,k,b))}}return function(a,b){for(var c=0;c<d.length;){var e=d[c++](a,b);if(e!==0)return e}return 0}};
if(!dojo._hasResource["dojo.data.util.simpleFetch"])dojo._hasResource["dojo.data.util.simpleFetch"]=!0,dojo.provide("dojo.data.util.simpleFetch"),dojo.getObject("data.util.simpleFetch",!0,dojo),dojo.data.util.simpleFetch.fetch=function(a){a=a||{};if(!a.store)a.store=this;var b=this;this._fetchItems(a,function(a,d){var e=d.abort||null,f=!1,g=d.start?d.start:0,h=d.count&&d.count!==Infinity?g+d.count:a.length;d.abort=function(){f=!0;e&&e.call(d)};var j=d.scope||dojo.global;if(!d.store)d.store=b;d.onBegin&&
d.onBegin.call(j,a.length,d);d.sort&&a.sort(dojo.data.util.sorter.createSortFunction(d.sort,b));if(d.onItem)for(var k=g;k<a.length&&k<h;++k){var l=a[k];f||d.onItem.call(j,l,d)}d.onComplete&&!f&&(k=null,d.onItem||(k=a.slice(g,h)),d.onComplete.call(j,k,d))},function(a,b){b.onError&&b.onError.call(b.scope||dojo.global,a,b)});return a};
if(!dojo._hasResource["dojo.data.util.filter"])dojo._hasResource["dojo.data.util.filter"]=!0,dojo.provide("dojo.data.util.filter"),dojo.getObject("data.util.filter",!0,dojo),dojo.data.util.filter.patternToRegExp=function(a,b){for(var c="^",d=null,e=0;e<a.length;e++)switch(d=a.charAt(e),d){case "\\":c+=d;e++;c+=a.charAt(e);break;case "*":c+=".*";break;case "?":c+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":c+="\\";default:c+=
d}c+="$";return b?RegExp(c,"mi"):RegExp(c,"m")};
if(!dojo._hasResource["dijit.form.TextBox"])dojo._hasResource["dijit.form.TextBox"]=!0,dojo.provide("dijit.form.TextBox"),dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",templateString:dojo.cache("dijit.form","templates/TextBox.html",'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" dojoAttachPoint=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n'),_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" dojoAttachPoint="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',
_buttonInputDisabled:dojo.isIE?"disabled":"",baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||(a=="hidden"||a=="file")&&this.templateString==dijit.form.TextBox.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},_setPlaceHolderAttr:function(a){this._set("placeHolder",
a);if(!this._phspan)this._attachPoints.push("_phspan"),this._phspan=dojo.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");this._phspan.innerHTML="";this._phspan.appendChild(document.createTextNode(a));this._updatePlaceHolder()},_updatePlaceHolder:function(){if(this._phspan)this._phspan.style.display=this.placeHolder&&!this._focused&&!this.textbox.value?"":"none"},_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,
b,c){var d;a!==void 0&&(d=this.filter(a),typeof c!="string"&&(c=d!==null&&(typeof d!="number"||!isNaN(d))?this.filter(this.format(d,this.constraints)):""));if(c!=null&&c!=void 0&&(typeof c!="number"||!isNaN(c))&&this.textbox.value!=c)this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"));this._updatePlaceHolder();this.inherited(arguments,[d,b])},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use set('displayedValue') instead.",
"","2.0");return this.get("displayedValue")},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},setDisplayedValue:function(a){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_setDisplayedValueAttr:function(a){a===null||a===void 0?a="":typeof a!="string"&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},
format:function(a){return a==null||a==void 0?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},_onInput:function(a){if(a&&a.type&&/key/i.test(a.type)&&a.keyCode)switch(a.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return}if(this.intermediateChanges){var b=this;setTimeout(function(){b._handleOnChange(b.get("value"),!1)},0)}this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){dojo.isIE&&
setTimeout(dojo.hitch(this,function(){var a=dojo.getComputedStyle(this.domNode);if(a&&(a=a.fontFamily)){var b=this.domNode.getElementsByTagName("INPUT");if(b)for(var c=0;c<b.length;c++)b[c].style.fontFamily=a}}),0);this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);dojo.isMoz||dojo.isOpera?this.connect(this.textbox,"oninput","_onInput"):(this.connect(this.textbox,"onkeydown","_onInput"),this.connect(this.textbox,"onkeyup","_onInput"),this.connect(this.textbox,"onpaste",
"_onInput"),this.connect(this.textbox,"oncut","_onInput"))},_blankValue:"",filter:function(a){if(a===null)return this._blankValue;if(typeof a!="string")return a;this.trim&&(a=dojo.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){if(!this.disabled){this._setBlurValue();
this.inherited(arguments);this._selectOnClickHandle&&this.disconnect(this._selectOnClickHandle);if(this.selectOnClick&&dojo.isMoz)this.textbox.selectionStart=this.textbox.selectionEnd=void 0;this._updatePlaceHolder()}},_onFocus:function(a){if(!this.disabled&&!this.readOnly){if(this.selectOnClick&&a=="mouse")this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);var a;dojo.isIE?(a=dojo.doc.selection.createRange(),a=a.parentElement()==this.textbox&&
a.text.length==0):a=this.textbox.selectionStart==this.textbox.selectionEnd;a&&dijit.selectInputText(this.textbox)});this._updatePlaceHolder();this.inherited(arguments);this._refreshState()}},reset:function(){this.textbox.value="";this.inherited(arguments)}}),dijit.selectInputText=function(a,b,c){var d=dojo.global,e=dojo.doc,a=dojo.byId(a);isNaN(b)&&(b=0);isNaN(c)&&(c=a.value?a.value.length:0);dijit.focus(a);e.selection&&dojo.body().createTextRange?a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),
a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select()):d.getSelection&&a.setSelectionRange&&a.setSelectionRange(b,c)};
if(!dojo._hasResource["dijit.Tooltip"])dojo._hasResource["dijit.Tooltip"]=!0,dojo.provide("dijit.Tooltip"),dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:dojo.cache("dijit","templates/Tooltip.html",'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\n\t><div class="dijitTooltipContainer dijitTooltipContents" dojoAttachPoint="containerNode" role=\'alert\'></div\n\t><div class="dijitTooltipConnector" dojoAttachPoint="connectorNode"></div\n></div>\n'),postCreate:function(){dojo.body().appendChild(this.domNode);
this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")})},show:function(a,b,c,d){if(!(this.aroundNode&&this.aroundNode===b))this.domNode.width="auto",this.fadeOut.status()=="playing"?this._onDeck=arguments:(this.containerNode.innerHTML=a,dijit.placeOnScreenAroundElement(this.domNode,b,dijit.getPopupAroundAlignment(c&&
c.length?c:dijit.Tooltip.defaultPosition,!d),dojo.hitch(this,"orient")),dojo.style(this.domNode,"opacity",0),this.fadeIn.play(),this.isShowingNow=!0,this.aroundNode=b)},orient:function(a,b,c,d,e){this.connectorNode.style.top="";var f=d.w-this.connectorNode.offsetWidth;a.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight",
"BL-BR":"dijitTooltipLeft"}[b+"-"+c];this.domNode.style.width="auto";var g=dojo.contentBox(this.domNode),h=Math.min(Math.max(f,1),g.w),j=h<g.w;this.domNode.style.width=h+"px";if(j&&(this.containerNode.style.overflow="auto",j=this.containerNode.scrollWidth,this.containerNode.style.overflow="visible",j>h))j=j+dojo.style(this.domNode,"paddingLeft")+dojo.style(this.domNode,"paddingRight"),this.domNode.style.width=j+"px";c.charAt(0)=="B"&&b.charAt(0)=="B"?(a=dojo.marginBox(a),b=this.connectorNode.offsetHeight,
a.h>d.h?(this.connectorNode.style.top=d.h-e.h/2-b/2+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(e.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,g.w-f)},_onShow:function(){if(dojo.isIE)this.domNode.style.filter=""},hide:function(a){if(this._onDeck&&this._onDeck[1]==a)this._onDeck=null;else if(this.aroundNode===a)this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play()},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck)this.show.apply(this,this._onDeck),this._onDeck=null}}),dijit.showTooltip=function(a,b,c,d){if(!dijit._masterTT)dijit._masterTT=new dijit._MasterTooltip;return dijit._masterTT.show(a,b,c,d)},dijit.hideTooltip=function(a){if(!dijit._masterTT)dijit._masterTT=new dijit._MasterTooltip;return dijit._masterTT.hide(a)},dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,
connectId:[],position:[],_setConnectIdAttr:function(a){dojo.forEach(this._connections||[],function(a){dojo.forEach(a,dojo.hitch(this,"disconnect"))},this);var b=dojo.isArrayLike(a)?a:a?[a]:[];this._connections=dojo.map(b,function(a){return(a=dojo.byId(a))?[this.connect(a,"onmouseenter","_onTargetMouseEnter"),this.connect(a,"onmouseleave","_onTargetMouseLeave"),this.connect(a,"onfocus","_onTargetFocus"),this.connect(a,"onblur","_onTargetBlur")]:[]},this);this._set("connectId",a);this._connectIds=b},
addTarget:function(a){a=a.id||a;dojo.indexOf(this._connectIds,a)==-1&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=dojo.indexOf(this._connectIds,a.id||a);a>=0&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;dojo.forEach(dojo.isArrayLike(a)?a:[a],this.addTarget,this)},_onTargetMouseEnter:function(a){this._onHover(a)},
_onTargetMouseLeave:function(a){this._onUnHover(a)},_onTargetFocus:function(a){this._focus=!0;this._onHover(a)},_onTargetBlur:function(a){this._focus=!1;this._onUnHover(a)},_onHover:function(a){if(!this._showTimer){var b=a.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(b)}),this.showDelay)}},_onUnHover:function(){this._focus||(this._showTimer&&(clearTimeout(this._showTimer),delete this._showTimer),this.close())},open:function(a){this._showTimer&&(clearTimeout(this._showTimer),
delete this._showTimer);dijit.showTooltip(this.label||this.domNode.innerHTML,a,this.position,!this.isLeftToRight());this._connectNode=a;this.onShow(a,this.position)},close:function(){this._connectNode&&(dijit.hideTooltip(this._connectNode),delete this._connectNode,this.onHide());this._showTimer&&(clearTimeout(this._showTimer),delete this._showTimer)},onShow:function(){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments)}}),dijit.Tooltip.defaultPosition=["after","before"];
dojo._hasResource["dijit.form.ValidationTextBox"]||(dojo._hasResource["dijit.form.ValidationTextBox"]=!0,dojo.provide("dijit.form.ValidationTextBox"),dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:dojo.cache("dijit.form","templates/ValidationTextBox.html",'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" dojoAttachPoint=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n'),
baseClass:"dijitTextBox dijitValidationTextBox",required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},regExp:".*",regExpGen:function(){return this.regExp},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused)},validator:function(a,b){return RegExp("^(?:"+this.regExpGen(b)+")"+(this.required?"":"?")+"$").test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||this.parse(a,b)!==void 0)},
_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0},isValid:function(){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){return this.required&&this._isEmpty(this.textbox.value)?this.missingMessage:this.invalidMessage},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b="",c=this.disabled||this.isValid(a);if(c)this._maskValidSubsetError=
!0;var d=this._isEmpty(this.textbox.value),e=!c&&a&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||a)&&d||e)&&this._maskValidSubsetError?"Incomplete":"Error");dijit.setWaiState(this.focusNode,"invalid",c?"false":"true");this.state=="Error"?(this._maskValidSubsetError=a&&e,b=this.getErrorMessage(a)):this.state=="Incomplete"?(b=this.getPromptMessage(a),this._maskValidSubsetError=!this._hasBeenBlurred||a):d&&(b=this.getPromptMessage(a));this.set("message",b);return c},displayMessage:function(a){dijit.hideTooltip(this.domNode);
a&&this._focused&&dijit.showTooltip(a,this.domNode,this.tooltipPosition,!this.isLeftToRight())},_refreshState:function(){this.validate(this._focused);this.inherited(arguments)},constructor:function(){this.constraints={}},_setConstraintsAttr:function(a){if(!a.locale&&this.lang)a.locale=this.lang;this._set("constraints",a);this._computePartialRE()},_computePartialRE:function(){var a=this.regExpGen(this.constraints);this.regExp=a;var b="";a!=".*"&&this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,
function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":b+=a;break;case ")":b+="|$)";break;default:b+="(?:"+a+"|$)"}});try{"".search(b)}catch(c){b=this.regExp,console.warn("RegExp error in "+this.declaredClass+": "+this.regExp)}this._partialre="^(?:"+b+")$"},postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$")this.invalidMessage=this.messages.invalidMessage;
if(!this.invalidMessage)this.invalidMessage=this.promptMessage;if(this.missingMessage=="$_unset_$")this.missingMessage=this.messages.missingMessage;if(!this.missingMessage)this.missingMessage=this.invalidMessage;this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);dijit.setWaiState(this.focusNode,"required",a);this._refreshState()},_setMessageAttr:function(a){this._set("message",
a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)}}),dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},serialize:function(a){return a.toString?a.toString():""},toString:function(){var a=this.filter(this.get("value"));return a!=null?typeof a=="string"?a:this.serialize(a,this.constraints):
""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.place("<input type='hidden'"+(this.name?" name='"+this.name.replace(/'/g,"&quot;")+"'":"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}}),dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(a,b){return("min"in b?this.compare(a,b.min)>=
0:!0)&&("max"in b?this.compare(a,b.max)<=0:!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var a=this.get("value"),b=!1,c=!1;if("min"in this.constraints)b=this.constraints.min,b=this.compare(a,typeof b=="number"&&b>=0&&a!=0?0:b),b=typeof b=="number"&&b<0;if("max"in this.constraints)c=this.constraints.max,c=this.compare(a,typeof c!="number"||c>0?c:0),c=typeof c=="number"&&c>0;return b||c},_isValidSubset:function(){return this.inherited(arguments)&&
!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(a))},getErrorMessage:function(a){var b=this.get("value");return b!==null&&b!==""&&b!==void 0&&(typeof b!="number"||!isNaN(b))&&!this.isInRange(a)?this.rangeMessage:this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage)this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=
this.messages.rangeMessage},_setConstraintsAttr:function(a){this.inherited(arguments);this.focusNode&&(this.constraints.min!==void 0?dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min):dijit.removeWaiState(this.focusNode,"valuemin"),this.constraints.max!==void 0?dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max):dijit.removeWaiState(this.focusNode,"valuemax"))},_setValueAttr:function(a,b){dijit.setWaiState(this.focusNode,"valuenow",a);this.inherited(arguments)}}));
dojo._hasResource["dijit.form.ComboBox"]||(dojo._hasResource["dijit.form.ComboBox"]=!0,dojo.provide("dijit.form.ComboBox"),dojo.declare("dijit.form.ComboBoxMixin",dijit._HasDropDown,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:!0,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:!0,hasDownArrow:!0,templateString:dojo.cache("dijit.form","templates/DropDownBox.html",'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdojoAttachPoint="_buttonNode, _popupStateNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdojoAttachPoint="textbox,focusNode" role="textbox" aria-haspopup="true"\n\t/></div\n></div>\n'),
baseClass:"dijitTextBox dijitComboBox",dropDownClass:"dijit.form._ComboBoxMenu",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if(typeof a.selectionStart=="number")b=a.selectionStart;else if(dojo.isIE){var c=dojo.doc.selection.createRange().duplicate(),a=a.createTextRange();c.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",c),b=String(a.text).replace(/\r/g,"").length}catch(d){}}return b},_setCaretPos:function(a,
b){b=parseInt(b);dijit.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);dijit.setWaiState(this.domNode,"disabled",a)},_abortQuery:function(){if(this.searchTimer)clearTimeout(this.searchTimer),this.searchTimer=null;if(this._fetchHandle)this._fetchHandle.abort&&this._fetchHandle.abort(),this._fetchHandle=null},_onInput:function(a){if(!this.searchTimer&&(a.type=="paste"||a.type=="input")&&this._lastInput!=this.textbox.value)this.searchTimer=setTimeout(dojo.hitch(this,function(){this._onKey({charOrCode:229})}),
100);this.inherited(arguments)},_onKey:function(a){var b=a.charOrCode;if(!a.altKey&&!((a.ctrlKey||a.metaKey)&&b!="x"&&b!="v"||b==dojo.keys.SHIFT)){var c=!1,d=this.dropDown,e=dojo.keys,f=null;this._prev_key_backspace=!1;this._abortQuery();this.inherited(arguments);this._opened&&(f=d.getHighlightedOption());switch(b){case e.PAGE_DOWN:case e.DOWN_ARROW:case e.PAGE_UP:case e.UP_ARROW:this._opened&&this._announceOption(f);dojo.stopEvent(a);break;case e.ENTER:if(f)if(f==d.nextButton){this._nextSearch(1);
dojo.stopEvent(a);break}else{if(f==d.previousButton){this._nextSearch(-1);dojo.stopEvent(a);break}}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);(this._opened||this._fetchHandle)&&a.preventDefault();case e.TAB:b=this.get("displayedValue");if(d&&(b==d._messages.previousMessage||b==d._messages.nextMessage))break;f&&this._selectOption();if(this._opened)this._lastQuery=null,this.closeDropDown();break;case " ":f?(dojo.stopEvent(a),this._selectOption(),this.closeDropDown()):
c=!0;break;case e.DELETE:case e.BACKSPACE:c=this._prev_key_backspace=!0;break;default:c=typeof b=="string"||b==229}if(c)this.item=void 0,this.searchTimer=setTimeout(dojo.hitch(this,"_startSearchFromInput"),1)}},_autoCompleteText:function(a){var b=this.focusNode;dijit.selectInputText(b,b.value.length);var c=this.ignoreCase?"toLowerCase":"substr";if(a[c](0).indexOf(this.focusNode.value[c](0))==0){if(c=this._getCaretPos(b),c+1>b.value.length)b.value=a,dijit.selectInputText(b,c)}else b.value=a,dijit.selectInputText(b)},
_openResultList:function(a,b){this._fetchHandle=null;if(!this.disabled&&!(this.readOnly||b.query[this.searchAttr]!=this._lastQuery)){var c=this.dropDown._highlighted_option&&dojo.hasClass(this.dropDown._highlighted_option,"dijitMenuItemSelected");this.dropDown.clearResultList();if(!a.length&&!this._maxOptions)this.closeDropDown();else{b._maxOptions=this._maxOptions;var d=this.dropDown.createOptions(a,b,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();b.direction?(1==b.direction?this.dropDown.highlightFirstOption():
-1==b.direction&&this.dropDown.highlightLastOption(),c&&this._announceOption(this.dropDown.getHighlightedOption())):this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(b.query[this.searchAttr])&&this._announceOption(d[1])}}},_showResultList:function(){this.closeDropDown(!0);this.displayMessage("");this.openDropDown();dijit.setWaiState(this.domNode,"expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();
this._opened&&(this.inherited(arguments),dijit.setWaiState(this.domNode,"expanded","false"),dijit.removeWaiState(this.focusNode,"activedescendant"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;b&&(a==b._messages.previousMessage||a==b._messages.nextMessage)?this._setValueAttr(this._lastValueReported,!0):typeof this.item=="undefined"?(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&dijit.form._FormValueWidget.prototype._setValueAttr.call(this,
this.value,!0),this._refreshState())},_onBlur:function(){this.closeDropDown();this.inherited(arguments)},_setItemAttr:function(a,b,c){c||(c=this.store.getValue(a,this.searchAttr));var d=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c;this._set("item",a);dijit.form.ComboBox.superclass._setValueAttr.call(this,d,b,c)},_announceOption:function(a){if(a){var b;a==this.dropDown.nextButton||a==this.dropDown.previousButton?(b=a.innerHTML,this.item=void 0,this.value=""):(b=this.store.getValue(a.item,
this.searchAttr).toString(),this.set("item",a.item,!1,b));this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){a&&this._announceOption(a.target);this.closeDropDown();this._setCaretPos(this.focusNode,this.focusNode.value.length);dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,!0)},_startSearchAll:function(){this._startSearch("")},
_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_getQueryString:function(a){return dojo.string.substitute(this.queryExpr,[a])},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (dojo.getObject(this.dropDownClass,!1))({onChange:dojo.hitch(this,this._selectOption),id:b,dir:this.dir});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",b)}b=dojo.clone(this.query);this._lastInput=
a;this._lastQuery=b[this.searchAttr]=this._getQueryString(a);this.searchTimer=setTimeout(dojo.hitch(this,function(a,b){this.searchTimer=null;var e={queryOptions:{ignoreCase:this.ignoreCase,deep:!0},query:a,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(a){b._fetchHandle=null;console.error("dijit.form.ComboBox: "+a);b.closeDropDown()},start:0,count:this.pageSize};dojo.mixin(e,b.fetchProperties);this._fetchHandle=b.store.fetch(e);this._nextSearch=
this.dropDown.onPage=dojo.hitch(this,function(a,b){a.start+=a.count*b;a.direction=b;this._fetchHandle=this.store.fetch(a);this.focus()},this._fetchHandle)},b,this),this.searchDelay)},_setMaxOptions:function(a){this._maxOptions=a},_getValueField:function(){return this.searchAttr},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store&&(this.store=new dijit.form._ComboBoxDataStore(this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();
if(a){var b=this._getValueField();this.value=this.store.getValue(a,b)}}this.inherited(arguments)},postCreate:function(){var a=dojo.query('label[for="'+this.id+'"]');if(a.length)a[0].id=this.id+"_label",dijit.setWaiState(this.domNode,"labelledby",a[0].id);this.inherited(arguments)},_setHasDownArrowAttr:function(a){this.hasDownArrow=a;this._buttonNode.style.display=a?"":"none"},_getMenuLabelFromItem:function(a){var a=this.labelFunc(a,this.store),b=this.labelType;this.highlightMatch!="none"&&this.labelType==
"text"&&this._lastInput&&(a=this.doHighlight(a,this._escapeHtml(this._lastInput)),b="html");return{html:b=="html",label:a}},doHighlight:function(a,b){var c=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),d=this.queryExpr.indexOf("${0}"),b=dojo.regexp.escapeString(b);return this._escapeHtml(a).replace(RegExp((d==0?"^":"")+"("+b+")"+(d==this.queryExpr.length-4?"$":""),c),'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"&amp;").replace(/</gm,
"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(a,b){return b.getValue(a,this.labelAttr||this.searchAttr).toString()}}),dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' style='overflow: \"auto\"; overflow-x: \"hidden\";'><li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' role='option'></li><li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' role='option'></li></ul>",
_messages:null,baseClass:"dijitComboBoxMenu",postMixInProperties:function(){this.inherited(arguments);this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(a){this.value=a;this.onChange(a)},onChange:function(){},onPage:function(){},onClose:function(){this._blurOptionNode()},_createOption:function(a,
b){var c=dojo.create("li",{"class":"dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl"),role:"option"}),d=b(a);d.html?c.innerHTML=d.label:c.appendChild(dojo.doc.createTextNode(d.label));if(c.innerHTML=="")c.innerHTML="&nbsp;";c.item=a;return c},createOptions:function(a,b,c){this.previousButton.style.display=b.start==0?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(a,function(a,b){var d=this._createOption(a,c);dojo.attr(d,"id",this.id+b);this.domNode.insertBefore(d,
this.nextButton)},this);var d=!1;b._maxOptions&&b._maxOptions!=-1?b.start+b.count<b._maxOptions?d=!0:b.start+b.count>b._maxOptions&&b.count==a.length&&(d=!0):b.count==a.length&&(d=!0);this.nextButton.style.display=d?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next");return this.domNode.childNodes},clearResultList:function(){for(;this.domNode.childNodes.length>2;)this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2]);this._blurOptionNode()},_onMouseDown:function(a){dojo.stopEvent(a)},
_onMouseUp:function(a){if(a.target!==this.domNode&&this._highlighted_option)if(a.target==this.previousButton)this._blurOptionNode(),this.onPage(-1);else if(a.target==this.nextButton)this._blurOptionNode(),this.onPage(1);else{for(a=a.target;!a.item;)a=a.parentNode;this._setValueAttr({target:a},!0)}},_onMouseOver:function(a){if(a.target!==this.domNode){a=a.target;if(!(a==this.previousButton||a==this.nextButton))for(;!a.item;)a=a.parentNode;this._focusOptionNode(a)}},_onMouseOut:function(a){a.target!==
this.domNode&&this._blurOptionNode()},_focusOptionNode:function(a){if(this._highlighted_option!=a)this._blurOptionNode(),this._highlighted_option=a,dojo.addClass(this._highlighted_option,"dijitMenuItemSelected")},_blurOptionNode:function(){if(this._highlighted_option)dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected"),this._highlighted_option=null},_highlightNextOption:function(){if(this.getHighlightedOption()){var a=this._highlighted_option.nextSibling;a&&a.style.display!="none"?this._focusOptionNode(a):
this.highlightFirstOption()}else a=this.domNode.firstChild,this._focusOptionNode(a.style.display=="none"?a.nextSibling:a);dojo.window.scrollIntoView(this._highlighted_option)},highlightFirstOption:function(){var a=this.domNode.firstChild,b=a.nextSibling;this._focusOptionNode(b.style.display=="none"?a:b);dojo.window.scrollIntoView(this._highlighted_option)},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dojo.window.scrollIntoView(this._highlighted_option)},
_highlightPrevOption:function(){if(this.getHighlightedOption()){var a=this._highlighted_option.previousSibling;a&&a.style.display!="none"?this._focusOptionNode(a):this.highlightLastOption()}else a=this.domNode.lastChild,this._focusOptionNode(a.style.display=="none"?a.previousSibling:a);dojo.window.scrollIntoView(this._highlighted_option)},_page:function(a){var b=0,c=this.domNode.scrollTop,d=dojo.style(this.domNode,"height");for(this.getHighlightedOption()||this._highlightNextOption();b<d;){if(a){if(!this.getHighlightedOption().previousSibling||
this._highlighted_option.previousSibling.style.display=="none")break;this._highlightPrevOption()}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none")break;this._highlightNextOption()}var e=this.domNode.scrollTop;b+=(e-c)*(a?-1:1);c=e}},pageUp:function(){this._page(!0)},pageDown:function(){this._page(!1)},getHighlightedOption:function(){var a=this._highlighted_option;return a&&a.parentNode?a:null},handleKey:function(a){switch(a.charOrCode){case dojo.keys.DOWN_ARROW:return this._highlightNextOption(),
!1;case dojo.keys.PAGE_DOWN:return this.pageDown(),!1;case dojo.keys.UP_ARROW:return this._highlightPrevOption(),!1;case dojo.keys.PAGE_UP:return this.pageUp(),!1;default:return!0}}}),dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(a,b,c){this._set("item",null);a||(a="");dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,a,b,c)}}),dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(a){this.root=a;if(a.tagName!=
"SELECT"&&a.firstChild)a=dojo.query("select",a),a.length>0?a=a[0]:(this.root.innerHTML="<SELECT>"+this.root.innerHTML+"</SELECT>",a=this.root.firstChild),this.root=a;dojo.query("> option",a).forEach(function(a){a.innerHTML=dojo.trim(a.innerHTML)})},getValue:function(a,b){return b=="value"?a.value:a.innerText||a.textContent||""},isItemLoaded:function(){return!0},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0}},_fetchItems:function(a,b){if(!a.query)a.query={};if(!a.query.name)a.query.name=
"";if(!a.queryOptions)a.queryOptions={};var c=dojo.data.util.filter.patternToRegExp(a.query.name,a.queryOptions.ignoreCase),d=dojo.query("> option",this.root).filter(function(a){return(a.innerText||a.textContent||"").match(c)});a.sort&&d.sort(dojo.data.util.sorter.createSortFunction(a.sort,this));b(d,a)},close:function(){},getLabel:function(a){return a.innerHTML},getIdentity:function(a){return dojo.attr(a,"value")},fetchItemByIdentity:function(a){var b=dojo.query("> option[value='"+a.identity+"']",
this.root)[0];a.onItem(b)},fetchSelectedItem:function(){var a=this.root,b=a.selectedIndex;return typeof b=="number"?dojo.query("> option:nth-child("+(b!=-1?b+1:1)+")",a)[0]:null}}),dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch));
dojo._hasResource["dijit.form.FilteringSelect"]||(dojo._hasResource["dijit.form.FilteringSelect"]=!0,dojo.provide("dijit.form.FilteringSelect"),dojo.declare("dijit.form.FilteringSelect",[dijit.form.MappedTextBox,dijit.form.ComboBoxMixin],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return this.item||!this.required&&this.get("displayedValue")==""},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(a,
b,c){if(!(b&&b.query[this.searchAttr]!=this._lastQuery||!b&&a.length&&this.store.getIdentity(a[0])!=this._lastQuery))a.length?this.set("item",a[0],c):(this.valueNode.value="",dijit.form.TextBox.superclass._setValueAttr.call(this,"",c||c===void 0&&!this._focused),this._set("item",null),this.validate(this._focused))},_openResultList:function(a,b){b.query[this.searchAttr]==this._lastQuery&&(dijit.form.ComboBoxMixin.prototype._openResultList.apply(this,arguments),this.item===void 0&&this.validate(!0))},
_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(a,b){this._onChangeActive||(b=null);this._lastQuery=a;if(a===null||a==="")this._setDisplayedValueAttr("",b);else{var c=this;this.store.fetchItemByIdentity({identity:a,onItem:function(a){c._callbackSetLabel(a?[a]:[],void 0,b)}})}},_setItemAttr:function(a,b,c){this.inherited(arguments);this.valueNode.value=this.value;this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(a){return a.replace(/([\\\*\?])/g,
"\\$1")},_setDisplayedValueAttr:function(a,b){a==null&&(a="");if(!this._created){if(!("displayedValue"in this.params))return;b=!1}if(this.store){this.closeDropDown();var c=dojo.clone(this.query);this._lastQuery=c[this.searchAttr]=this._getDisplayQueryString(a);this._lastDisplayedValue=this.textbox.value=a;this._set("displayedValue",a);var d=this,c={query:c,queryOptions:{ignoreCase:this.ignoreCase,deep:!0},onComplete:function(a,c){d._fetchHandle=null;dojo.hitch(d,"_callbackSetLabel")(a,c,b)},onError:function(a){d._fetchHandle=
null;console.error("dijit.form.FilteringSelect: "+a);dojo.hitch(d,"_callbackSetLabel")([],void 0,!1)}};dojo.mixin(c,this.fetchProperties);this._fetchHandle=this.store.fetch(c)}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}}));
dojo._hasResource["dojo.data.ItemFileReadStore"]||(dojo._hasResource["dojo.data.ItemFileReadStore"]=!0,dojo.provide("dojo.data.ItemFileReadStore"),dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=a.url;this._jsonData=a.data;this.data=null;this._datatypeMap=a.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(a){return dojo.date.stamp.fromISOString(a)}});
this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];if(a.urlPreventCache!==void 0)this.urlPreventCache=a.urlPreventCache?!0:!1;if(a.hierarchical!==void 0)this.hierarchical=a.hierarchical?!0:!1;if(a.clearOnClose)this.clearOnClose=!0;if("failOk"in a)this.failOk=a.failOk?!0:!1},url:"",_ccUrl:"",data:null,
typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(a){if(!this.isItem(a))throw Error("dojo.data.ItemFileReadStore: Invalid item argument.");},_assertIsAttribute:function(a){if(typeof a!=="string")throw Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");},getValue:function(a,b,c){a=this.getValues(a,b);return a.length>0?a[0]:c},getValues:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return(a[b]||[]).slice(0)},getAttributes:function(a){this._assertIsItem(a);
var b=[],c;for(c in a)c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._rootItemPropName&&c!==this._reverseRefMap&&b.push(c);return b},hasAttribute:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return b in a},containsValue:function(a,b,c){var d=void 0;typeof c==="string"&&(d=dojo.data.util.filter.patternToRegExp(c,!1));return this._containsValue(a,b,c,d)},_containsValue:function(a,b,c,d){return dojo.some(this.getValues(a,b),function(a){if(a!==null&&!dojo.isObject(a)&&
d){if(a.toString().match(d))return!0}else if(c===a)return!0})},isItem:function(a){return a&&a[this._storeRefPropName]===this&&this._arrayOfAllItems[a[this._itemNumPropName]]===a?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(){return this._labelAttr?[this._labelAttr]:null},
_fetchItems:function(a,b,c){var d=this,e=function(a,c){var e=[],f,g;if(a.query){var h;f=a.queryOptions?a.queryOptions.ignoreCase:!1;var m={};for(g in a.query)h=a.query[g],typeof h==="string"?m[g]=dojo.data.util.filter.patternToRegExp(h,f):h instanceof RegExp&&(m[g]=h);for(f=0;f<c.length;++f){var q=!0,r=c[f];if(r===null)q=!1;else for(g in a.query)h=a.query[g],d._containsValue(r,g,h,m[g])||(q=!1);q&&e.push(r)}}else for(f=0;f<c.length;++f)g=c[f],g!==null&&e.push(g);b(e,a)};if(this._loadFinished)e(a,
this._getItemsArray(a.queryOptions));else{if(this._jsonFileUrl!==this._ccUrl)dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl;else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(this.data!=null)this._jsonData=this.data,this.data=null;if(this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,filter:e});
else{this._loadInProgress=!0;var f=dojo.xhrGet({url:d._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});f.addCallback(function(b){try{d._getItemsFromLoadedData(b),d._loadFinished=!0,d._loadInProgress=!1,e(a,d._getItemsArray(a.queryOptions)),d._handleQueuedFetches()}catch(f){d._loadFinished=!0,d._loadInProgress=!1,c(f,a)}});f.addErrback(function(b){d._loadInProgress=!1;c(b,a)});var g=null;if(a.abort)g=a.abort;a.abort=function(){f&&f.fired===-1&&f.cancel();
g&&g.call(a)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,e(a,this._getItemsArray(a.queryOptions))}catch(h){c(h,a)}else c(Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),a)}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var a=0;a<this._queuedFetches.length;a++){var b=this._queuedFetches[a],c=b.args;(b=b.filter)?b(c,this._getItemsArray(c.queryOptions)):
this.fetchItemByIdentity(c)}this._queuedFetches=[]}},_getItemsArray:function(a){return a&&a.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress)(this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null)&&this.data==null&&console.debug("dojo.data.ItemFileReadStore: WARNING!  Data reload  information has not been provided.  Please set 'url' or 'data' to the appropriate value before the next fetch"),
this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[]},_getItemsFromLoadedData:function(a){function b(a){return a!==null&&typeof a==="object"&&(!dojo.isArray(a)||d)&&!dojo.isFunction(a)&&(a.constructor==Object||dojo.isArray(a))&&typeof a._reference==="undefined"&&typeof a._type==="undefined"&&typeof a._value==="undefined"&&e.hierarchical}function c(a){e._arrayOfAllItems.push(a);for(var d in a){var f=a[d];
if(f)if(dojo.isArray(f))for(var g=0;g<f.length;++g){var h=f[g];b(h)&&c(h)}else b(f)&&c(f)}}var d=!1,e=this;this._labelAttr=a.label;var f,g;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(f=0;f<this._arrayOfTopLevelItems.length;++f)g=this._arrayOfTopLevelItems[f],dojo.isArray(g)&&(d=!0),c(g),g[this._rootItemPropName]=!0;var h={},j;for(f=0;f<this._arrayOfAllItems.length;++f)for(j in g=this._arrayOfAllItems[f],g){if(j!==this._rootItemPropName){var k=g[j];k!==null?dojo.isArray(k)||(g[j]=
[k]):g[j]=[null]}h[j]=j}for(;h[this._storeRefPropName];)this._storeRefPropName+="_";for(;h[this._itemNumPropName];)this._itemNumPropName+="_";for(;h[this._reverseRefMap];)this._reverseRefMap+="_";if(h=a.identifier){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=h;for(f=0;f<this._arrayOfAllItems.length;++f)if(g=this._arrayOfAllItems[f],a=g[h],a=a[0],Object.hasOwnProperty.call(this._itemsByIdentity,a))if(this._jsonFileUrl)throw Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+
this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+h+"].  Value collided: ["+a+"]");else{if(this._jsonData)throw Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+h+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=g}else this._features["dojo.data.api.Identity"]=Number;for(f=0;f<this._arrayOfAllItems.length;++f)g=this._arrayOfAllItems[f],g[this._storeRefPropName]=this,
g[this._itemNumPropName]=f;for(f=0;f<this._arrayOfAllItems.length;++f)for(j in g=this._arrayOfAllItems[f],g){a=g[j];for(h=0;h<a.length;++h)if(k=a[h],k!==null&&typeof k=="object"){if("_type"in k&&"_value"in k){var l=k._type,p=this._datatypeMap[l];if(p)if(dojo.isFunction(p))a[h]=new p(k._value);else if(dojo.isFunction(p.deserialize))a[h]=p.deserialize(k._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");
else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+l+"'");}if(k._reference){k=k._reference;if(dojo.isObject(k))for(l=0;l<this._arrayOfAllItems.length;++l){var p=this._arrayOfAllItems[l],n=!0,o;for(o in k)p[o]!=k[o]&&(n=!1);n&&(a[h]=p)}else a[h]=this._getItemByIdentity(k);this.referenceIntegrity&&(k=a[h],this.isItem(k)&&this._addReferenceToMap(k,g,j))}else this.isItem(k)&&this.referenceIntegrity&&this._addReferenceToMap(k,
g,j)}}},_addReferenceToMap:function(){},getIdentity:function(a){var b=this._features["dojo.data.api.Identity"];if(b===Number)return a[this._itemNumPropName];else if(a=a[b])return a[0];return null},fetchItemByIdentity:function(a){var b,c;if(this._loadFinished)b=this._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:dojo.global,a.onItem.call(c,b));else{var d=this;if(this._jsonFileUrl!==this._ccUrl)dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),
this.url=this._ccUrl=this._jsonFileUrl;else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(this.data!=null&&this._jsonData==null)this._jsonData=this.data,this.data=null;if(this._jsonFileUrl)this._loadInProgress?this._queuedFetches.push({args:a}):(this._loadInProgress=!0,c=dojo.xhrGet({url:d._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),c.addCallback(function(c){var f=a.scope?a.scope:dojo.global;try{d._getItemsFromLoadedData(c),
d._loadFinished=!0,d._loadInProgress=!1,b=d._getItemByIdentity(a.identity),a.onItem&&a.onItem.call(f,b),d._handleQueuedFetches()}catch(g){d._loadInProgress=!1,a.onError&&a.onError.call(f,g)}}),c.addErrback(function(b){d._loadInProgress=!1;a.onError&&a.onError.call(a.scope?a.scope:dojo.global,b)}));else if(this._jsonData)d._getItemsFromLoadedData(d._jsonData),d._jsonData=null,d._loadFinished=!0,b=d._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:dojo.global,a.onItem.call(c,b))}},_getItemByIdentity:function(a){var b=
null;this._itemsByIdentity&&Object.hasOwnProperty.call(this._itemsByIdentity,a)?b=this._itemsByIdentity[a]:Object.hasOwnProperty.call(this._arrayOfAllItems,a)&&(b=this._arrayOfAllItems[a]);b===void 0&&(b=null);return b},getIdentityAttributes:function(){var a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;if(this._jsonFileUrl!==this._ccUrl)dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),
this.url=this._ccUrl=this._jsonFileUrl;else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(this.data!=null)this._jsonData=this.data,this.data=null;if(this._jsonFileUrl){var b=dojo.xhrGet({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:!0});b.addCallback(function(b){try{if(a._loadInProgress!==!0&&!a._loadFinished)a._getItemsFromLoadedData(b),a._loadFinished=!0;else if(a._loadInProgress)throw Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");
}catch(d){throw console.log(d),d;}});b.addErrback(function(a){throw a;})}else if(this._jsonData)a._getItemsFromLoadedData(a._jsonData),a._jsonData=null,a._loadFinished=!0}}),dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch));
dojo._hasResource["dijit._editor.plugins.FontChoice"]||(dojo._hasResource["dijit._editor.plugins.FontChoice"]=!0,dojo.provide("dijit._editor.plugins.FontChoice"),dojo.declare("dijit._editor.plugins._FontDropDown",[dijit._Widget,dijit._Templated],{label:"",widgetsInTemplate:!0,plainText:!1,templateString:"<span style='white-space: nowrap' class='dijit dijitReset dijitInline'><label class='dijitLeft dijitInline' for='${selectId}'>${label}</label><input dojoType='dijit.form.FilteringSelect' required='false' labelType='html' labelAttr='label' searchAttr='name' tabIndex='-1' id='${selectId}' dojoAttachPoint='select' value=''/></span>",
postMixInProperties:function(){this.inherited(arguments);this.strings=dojo.i18n.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){var a=dojo.map(this.values,function(a){var c=this.strings[a]||a;return{label:this.getLabel(a,c),name:c,value:a}},this);this.select.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",
items:a}});this.select.set("value","",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(a,b){b=b!==!1?!0:!1;this.select.set("value",dojo.indexOf(this.values,a)<0?"":a,b);if(!b)this.select._lastValueReported=null},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(a){this.disabled=a;this.select.set("disabled",a)}}),dojo.declare("dijit._editor.plugins._FontNameDropDown",dijit._editor.plugins._FontDropDown,{generic:!1,
command:"fontName",postMixInProperties:function(){if(!this.values)this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"];this.inherited(arguments)},getLabel:function(a,b){return this.plainText?b:"<div style='font-family: "+a+"'>"+b+"</div>"},_setValueAttr:function(a,b){this.generic&&(a={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",
Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy"}[a]||a);this.inherited(arguments,[a,b!==!1?!0:!1])}}),dojo.declare("dijit._editor.plugins._FontSizeDropDown",dijit._editor.plugins._FontDropDown,{command:"fontSize",values:[1,2,3,4,5,6,7],getLabel:function(a,b){return this.plainText?b:"<font size="+a+"'>"+b+"</font>"},_setValueAttr:function(a,b){b=b!==!1?!0:!1;a.indexOf&&a.indexOf("px")!=-1&&(a={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(a,10)]||a);this.inherited(arguments,[a,b])}}),
dojo.declare("dijit._editor.plugins._FormatBlockDropDown",dijit._editor.plugins._FontDropDown,{command:"formatBlock",values:["noFormat","p","h1","h2","h3","pre"],postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(a,b){return this.plainText||a=="noFormat"?b:"<"+a+">"+b+"</"+a+">"},_execCommand:function(a,b,c){if(c==="noFormat"){var d;if((b=dijit.range.getSelection(a.window))&&b.rangeCount>0){var c=b.getRangeAt(0),e;if(c){b=c.startContainer;for(d=c.endContainer;b&&
b!==a.editNode&&b!==a.document.body&&b.nodeType!==1;)b=b.parentNode;for(;d&&d!==a.editNode&&d!==a.document.body&&d.nodeType!==1;)d=d.parentNode;var f=dojo.hitch(this,function(b,c){if(b.childNodes&&b.childNodes.length){var d;for(d=0;d<b.childNodes.length;d++){var e=b.childNodes[d];if(e.nodeType==1&&dojo.withGlobal(a.window,"inSelection",dijit._editor.selection,[e])){var g=e.tagName?e.tagName.toLowerCase():"";dojo.indexOf(this.values,g)!==-1&&c.push(e);f(e,c)}}}}),c=dojo.hitch(this,function(b){if(b&&
b.length){for(a.beginEditing();b.length;)this._removeFormat(a,b.pop());a.endEditing()}}),g=[];if(b==d){var h;for(d=b;d&&d!==a.editNode&&d!==a.document.body;){if(d.nodeType==1&&(e=d.tagName?d.tagName.toLowerCase():"",dojo.indexOf(this.values,e)!==-1)){h=d;break}d=d.parentNode}f(b,g);h&&(g=[h].concat(g))}else for(d=b;dojo.withGlobal(a.window,"inSelection",dijit._editor.selection,[d]);)d.nodeType==1&&(e=d.tagName?d.tagName.toLowerCase():"",dojo.indexOf(this.values,e)!==-1&&g.push(d),f(d,g)),d=d.nextSibling;
c(g);a.onDisplayChanged()}}}else a.execCommand(b,c)},_removeFormat:function(a,b){if(a.customUndo){for(;b.firstChild;)dojo.place(b.firstChild,b,"before");b.parentNode.removeChild(b)}else{dojo.withGlobal(a.window,"selectElementChildren",dijit._editor.selection,[b]);var c=dojo.withGlobal(a.window,"getSelectedHtml",dijit._editor.selection,[null]);dojo.withGlobal(a.window,"selectElement",dijit._editor.selection,[b]);a.execCommand("inserthtml",c||"")}}}),dojo.declare("dijit._editor.plugins.FontChoice",
dijit._editor._Plugin,{useDefaultCommand:!1,_initButton:function(){var a={fontName:dijit._editor.plugins._FontNameDropDown,fontSize:dijit._editor.plugins._FontSizeDropDown,formatBlock:dijit._editor.plugins._FormatBlockDropDown}[this.command],b=this.params;if(this.params.custom)b.values=this.params.custom;var c=this.editor;this.button=new a(dojo.delegate({dir:c.dir,lang:c.lang},b));this.connect(this.button.select,"onChange",function(a){this.editor.focus();this.command=="fontName"&&a.indexOf(" ")!=
-1&&(a="'"+a+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,a):this.editor.execCommand(this.command,a)})},updateState:function(){var a=this.editor,b=this.command;if(a&&a.isLoaded&&b.length&&this.button){var c=this.get("disabled");this.button.set("disabled",c);if(!c){var d;try{d=a.queryCommandValue(b)||""}catch(e){d=""}(c=dojo.isString(d)&&d.match(/'([^']*)'/))&&(d=c[1]);if(b==="formatBlock")if(!d||d=="p"){d=null;var f;if((b=dijit.range.getSelection(this.editor.window))&&
b.rangeCount>0)if(b=b.getRangeAt(0))f=b.endContainer;for(;f&&f!==a.editNode&&f!==a.document;){if((b=f.tagName?f.tagName.toLowerCase():"")&&dojo.indexOf(this.button.values,b)>-1){d=b;break}f=f.parentNode}d||(d="noFormat")}else dojo.indexOf(this.button.values,d)<0&&(d="noFormat");d!==this.button.get("value")&&this.button.set("value",d,!1)}}}}),dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "fontName":case "fontSize":case "formatBlock":a.plugin=
new dijit._editor.plugins.FontChoice({command:a.args.name,plainText:a.args.plainText?a.args.plainText:!1})}}));dojo._hasResource["dijit.form.DropDownButton"]||(dojo._hasResource["dijit.form.DropDownButton"]=!0,dojo.provide("dijit.form.DropDownButton"));
dojo._hasResource["dijit.form._FormSelectWidget"]||(dojo._hasResource["dijit.form._FormSelectWidget"]=!0,dojo.provide("dijit.form._FormSelectWidget"),dojo.declare("dijit.form._FormSelectWidget",dijit.form._FormValueWidget,{multiple:!1,options:null,store:null,query:null,queryOptions:null,onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,getOptions:function(a){var b=a,c=this.options||[],d=c.length;if(b===void 0)return c;if(dojo.isArray(b))return dojo.map(b,"return this.getOptions(item);",this);dojo.isObject(a)&&
(dojo.some(this.options,function(a,c){return a===b||a.value&&a.value===b.value?(b=c,!0):!1})||(b=-1));if(typeof b=="string")for(a=0;a<d;a++)if(c[a].value===b){b=a;break}return typeof b=="number"&&b>=0&&b<d?this.options[b]:null},addOption:function(a){dojo.isArray(a)||(a=[a]);dojo.forEach(a,function(a){a&&dojo.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){dojo.isArray(a)||(a=[a]);a=this.getOptions(a);dojo.forEach(a,function(a){if(a)this.options=dojo.filter(this.options,
function(c){return c.value!==a.value||c.label!==a.label}),this._removeOptionItem(a)},this);this._loadChildren()},updateOption:function(a){dojo.isArray(a)||(a=[a]);dojo.forEach(a,function(a){var c=this.getOptions(a),d;if(c)for(d in a)c[d]=a[d]},this);this._loadChildren()},setStore:function(a,b,c){var d=this.store,c=c||{};if(d!==a){dojo.forEach(this._notifyConnections||[],dojo.disconnect);delete this._notifyConnections;if(a&&a.getFeatures()["dojo.data.api.Notification"])this._notifyConnections=[dojo.connect(a,
"onNew",this,"_onNewItem"),dojo.connect(a,"onDelete",this,"_onDeleteItem"),dojo.connect(a,"onSet",this,"_onSetItem")];this._set("store",a)}this._onChangeActive=!1;this.options&&this.options.length&&this.removeOption(this.options);a?(this._loadingStore=!0,a.fetch(dojo.delegate(c,{onComplete:function(d,f){this.sortByLabel&&!c.sort&&d.length&&d.sort(dojo.data.util.sorter.createSortFunction([{attribute:a.getLabelAttributes(d[0])[0]}],a));c.onFetch&&(d=c.onFetch.call(this,d,f));dojo.forEach(d,function(a){this._addOptionForItem(a)},
this);this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:b);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(d):this._loadChildren();this._fetchedWith=f;this._lastValueReported=this.multiple?[]:null;this._onChangeActive=!0;this.onSetStore();this._handleOnChange(this.value)},scope:this}))):delete this._fetchedWith;return d},_setValueAttr:function(a,b){if(this._loadingStore)this._pendingValue=a;else{var c=this.getOptions()||[];dojo.isArray(a)||
(a=[a]);dojo.forEach(a,function(b,d){dojo.isObject(b)||(b+="");typeof b==="string"&&(a[d]=dojo.filter(c,function(a){return a.value===b})[0]||{value:"",label:""})},this);a=dojo.filter(a,function(a){return a&&a.value});if(!this.multiple&&(!a[0]||!a[0].value)&&c.length)a[0]=c[0];dojo.forEach(c,function(b){b.selected=dojo.some(a,function(a){return a.value===b.value})});var d=dojo.map(a,function(a){return a.value}),e=dojo.map(a,function(a){return a.label});this._set("value",this.multiple?d:d[0]);this._setDisplay(this.multiple?
e:e[0]);this._updateSelection();this._handleOnChange(this.value,b)}},_getDisplayedValueAttr:function(){var a=this.get("value");dojo.isArray(a)||(a=[a]);a=dojo.map(this.getOptions(a),function(a){if(a&&"label"in a)return a.label;else if(a)return a.value;return null},this);return this.multiple?a:a[0]},_loadChildren:function(){this._loadingStore||(dojo.forEach(this._getChildren(),function(a){a.destroyRecursive()}),dojo.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this._set("value",
this._getValueFromOpts());var a=this.value;dojo.isArray(a)||(a=[a]);a&&a[0]&&dojo.forEach(this._getChildren(),function(b){var c=dojo.some(a,function(a){return b.option&&a===b.option.value});dojo.toggleClass(b.domNode,this.baseClass+"SelectedOption",c);dijit.setWaiState(b.domNode,"selected",c)},this)},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var b=dojo.filter(a,function(a){return a.selected})[0];return b&&b.value?b.value:(a[0].selected=!0,a[0].value)}else if(this.multiple)return dojo.map(dojo.filter(a,
function(a){return a.selected}),function(a){return a.value})||[];return""},_onNewItem:function(a,b){(!b||!b.parent)&&this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption(this.store.getIdentity(a))},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=this.store,c=b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded(a)?this.addOption(this._getOptionObjForItem(a)):
b.loadItem({item:a,onComplete:function(){this._addOptionForItem(a)},scope:this})},constructor:function(a){this._oValue=(a||{}).value||null},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.focusNode,!1)},_fillContent:function(){var a=this.options;if(!a)a=this.options=this.srcNodeRef?dojo.query(">",this.srcNodeRef).map(function(a){return a.getAttribute("type")==="separator"?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+dojo._scopeName+"-value")||
a.getAttribute("value"),label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[];this.value?this.multiple&&typeof this.value=="string"&&this_set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);this.connect(this,"onChange","_updateSelection");this.connect(this,"startup","_loadChildren");this._setValueAttr(this.value,null)},startup:function(){this.inherited(arguments);
var a=this.store,b={};dojo.forEach(["query","queryOptions","onFetch"],function(a){this[a]&&(b[a]=this[a]);delete this[a]},this);if(a&&a.getFeatures()["dojo.data.api.Identity"])this.store=null,this.setStore(a,this._oValue,b)},destroy:function(){dojo.forEach(this._notifyConnections||[],dojo.disconnect);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions(this.get("value"))},
_pseudoLoadChildren:function(){},onSetStore:function(){}}));
dojo._hasResource["dijit.form.Select"]||(dojo._hasResource["dijit.form.Select"]=!0,dojo.provide("dijit.form.Select"),dojo.declare("dijit.form._SelectMenu",dijit.Menu,{buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,b=this.domNode=dojo.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});a.parentNode&&a.parentNode.replaceChild(b,a);dojo.removeClass(a,"dijitMenuTable");b.className=a.className+" dijitSelectMenu";a.className="dijitReset dijitMenuTable";
dijit.setWaiRole(a,"listbox");dijit.setWaiRole(b,"presentation");b.appendChild(a)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousemove",dojo.stopEvent)},resize:function(a){if(a&&(dojo.marginBox(this.domNode,a),"w"in a))this.menuTableNode.style.width="100%"}}),dojo.declare("dijit.form.Select",[dijit.form._FormSelectWidget,dijit._HasDropDown],{baseClass:"dijitSelect",templateString:dojo.cache("dijit.form","templates/Select.html",'<table class="dijit dijitReset dijitInline dijitLeft"\n\tdojoAttachPoint="_buttonNode,tableNode,focusNode" cellspacing=\'0\' cellpadding=\'0\'\n\trole="combobox" aria-haspopup="true"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonContents dijitButtonNode" role="presentation"\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"  dojoAttachPoint="containerNode,_popupStateNode"></span\n\t\t\t><input type="hidden" ${!nameAttrSetting} dojoAttachPoint="valueNode" value="${value}" aria-hidden="true"\n\t\t/></td><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\t\tdojoAttachPoint="titleNode" role="presentation"\n\t\t\t><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\n\t\t\t><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\n\t\t></td\n\t></tr></tbody\n></table>\n'),
attributeMap:dojo.mixin(dojo.clone(dijit.form._FormSelectWidget.prototype.attributeMap),{style:"tableNode"}),required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&nbsp;",_isLoaded:!1,_childrenLoaded:!1,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[a>=0?a:0].value}this.dropDown=new dijit.form._SelectMenu({id:this.id+"_menu"});dojo.addClass(this.dropDown.domNode,this.baseClass+
"Menu")},_getMenuItemForOption:function(a){if(!a.value&&!a.label)return new dijit.MenuSeparator;else{var b=dojo.hitch(this,"_setValueAttr",a),a=new dijit.MenuItem({option:a,label:a.label||this.emptyLabel,onClick:b,disabled:a.disabled||!1});dijit.setWaiRole(a.focusNode,"listitem");return a}},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return!this.dropDown?[]:this.dropDown.getChildren()},_loadChildren:function(a){a===!0?(this.dropDown&&
delete this.dropDown.focusedChild,this.options.length?this.inherited(arguments):(dojo.forEach(this._getChildren(),function(a){a.destroyRecursive()}),this.dropDown.addChild(new dijit.MenuItem({label:"&nbsp;"})))):this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value)},_setValueAttr:function(a){this.inherited(arguments);dojo.attr(this.valueNode,"value",this.get("value"))},_setDisplay:function(a){a=a||this.emptyLabel;this.containerNode.innerHTML=
'<span class="dijitReset dijitInline '+this.baseClass+'Label">'+a+"</span>";dijit.setWaiState(this.focusNode,"valuetext",a)},validate:function(a){a=this.isValid(a);this._set("state",a?"":"Error");dijit.setWaiState(this.focusNode,"invalid",a?"false":"true");var b=a?"":this._missingMsg;this.message!==b&&(this._set("message",b),dijit.hideTooltip(this.domNode),b&&dijit.showTooltip(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()));return a},isValid:function(){return!this.required||this.value===
0||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);dijit.hideTooltip(this.domNode);this._set("state","");this._set("message","")},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=dojo.i18n.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousemove",dojo.stopEvent)},_setStyleAttr:function(a){this.inherited(arguments);dojo.toggleClass(this.domNode,this.baseClass+
"FixedWidth",!!this.tableNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},closeDropDown:function(){this.inherited(arguments);if(this.dropDown&&this.dropDown.menuTableNode)this.dropDown.menuTableNode.style.width=""},uninitialize:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);this.inherited(arguments)}}));
dojo._hasResource["dijit._editor.plugins.LinkDialog"]||(dojo._hasResource["dijit._editor.plugins.LinkDialog"]=!0,dojo.provide("dijit._editor.plugins.LinkDialog"),dojo.declare("dijit._editor.plugins.LinkDialog",dijit._editor._Plugin,{buttonClass:dijit.form.DropDownButton,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:'<a href="${urlInput}" _djrealurl="${urlInput}" target="${targetSelect}">${textInput}</a>',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,linkDialogTemplate:"<table><tr><td><label for='${id}_urlInput'>${url}</label></td><td><input dojoType='dijit.form.ValidationTextBox' required='true' id='${id}_urlInput' name='urlInput' intermediateChanges='true'/></td></tr><tr><td><label for='${id}_textInput'>${text}</label></td><td><input dojoType='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' name='textInput' intermediateChanges='true'/></td></tr><tr><td><label for='${id}_targetSelect'>${target}</label></td><td><select id='${id}_targetSelect' name='targetSelect' dojoType='dijit.form.Select'><option selected='selected' value='_self'>${currentWindow}</option><option value='_blank'>${newWindow}</option><option value='_top'>${topWindow}</option><option value='_parent'>${parentWindow}</option></select></td></tr><tr><td colspan='2'><button dojoType='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button><button dojoType='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button></td></tr></table>",
_initButton:function(){var a=this;this.tag=this.command=="insertImage"?"img":"a";var b=dojo.mixin(dojo.i18n.getLocalization("dijit","common",this.lang),dojo.i18n.getLocalization("dijit._editor","LinkDialog",this.lang)),c=this.dropDown=new dijit.TooltipDialog({title:b[this.command+"Title"],execute:dojo.hitch(this,"setValue"),onOpen:function(){a._onOpenDialog();dijit.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(dojo.hitch(a,"_onCloseDialog"),0)}});b.urlRegExp=
this.urlRegExp;b.id=dijit.getUniqueId(this.editor.id);this._uniqueId=b.id;this._setContent(c.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+dojo.string.substitute(this.linkDialogTemplate,b));c.startup();this._urlInput=dijit.byId(this._uniqueId+"_urlInput");this._textInput=dijit.byId(this._uniqueId+"_textInput");this._setButton=dijit.byId(this._uniqueId+"_setButton");this.connect(dijit.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._urlInput&&this.connect(this._urlInput,"onChange","_checkAndFixInput");this._textInput&&this.connect(this._textInput,"onChange","_checkAndFixInput");this._urlRegExp=RegExp("^"+this.urlRegExp+"$","i");this._emailRegExp=RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=dojo.hitch(this,function(){var a=this._urlInput.get("value");return this._urlRegExp.test(a)||this._emailRegExp.test(a)});this._connectTagEvents();this.inherited(arguments)},_checkAndFixInput:function(){var a=this,b=this._urlInput.get("value");
if(this._delayedCheck)clearTimeout(this._delayedCheck),this._delayedCheck=null;this._delayedCheck=setTimeout(function(){var c=b,d=!1,e=!1;c&&c.length>1&&(c=dojo.trim(c),c.indexOf("mailto:")!==0&&(c.indexOf("/")>0?c.indexOf("://")===-1&&c.charAt(0)!=="/"&&c.indexOf("./")!==0&&a._hostRxp.test(c)&&(d=!0):a._userAtRxp.test(c)&&(e=!0)));d&&a._urlInput.set("value","http://"+c);e&&a._urlInput.set("value","mailto:"+c);a._setButton.set("disabled",!a._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.addCallback(dojo.hitch(this,
function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick)}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(a){this.dropDown.set({parserScope:"dojo",content:a})},_checkValues:function(a){if(a&&a.urlInput)a.urlInput=a.urlInput.replace(/"/g,"&quot;");return a},setValue:function(a){this._onCloseDialog();if(dojo.isIE<9){var b=dijit.range.getSelection(this.editor.window).getRangeAt(0).endContainer;if(b.nodeType===3)b=b.parentNode;
b&&b.nodeName&&b.nodeName.toLowerCase()!==this.tag&&(b=dojo.withGlobal(this.editor.window,"getSelectedElement",dijit._editor.selection,[this.tag]));b&&b.nodeName&&b.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(dojo.withGlobal(this.editor.window,"selectElementChildren",dijit._editor.selection,[b]),this.editor.execCommand("unlink"))}a=this._checkValues(a);this.editor.execCommand("inserthtml",dojo.string.substitute(this.htmlTemplate,a))},_onCloseDialog:function(){this.editor.focus()},
_getCurrentValues:function(a){var b,c,d;a&&a.tagName.toLowerCase()===this.tag?(b=a.getAttribute("_djrealurl")||a.getAttribute("href"),d=a.getAttribute("target")||"_self",c=a.textContent||a.innerText,dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[a,!0])):c=dojo.withGlobal(this.editor.window,dijit._editor.selection.getSelectedText);return{urlInput:b||"",textInput:c||"",targetSelect:d||""}},_onOpenDialog:function(){var a;if(dojo.isIE<9){a=dijit.range.getSelection(this.editor.window).getRangeAt(0).endContainer;
if(a.nodeType===3)a=a.parentNode;a&&a.nodeName&&a.nodeName.toLowerCase()!==this.tag&&(a=dojo.withGlobal(this.editor.window,"getSelectedElement",dijit._editor.selection,[this.tag]))}else a=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.tag]);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(a))},_onDblClick:function(a){if(a&&a.target&&(a=a.target,(a.tagName?a.tagName.toLowerCase():"")===this.tag&&dojo.attr(a,
"href")))dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[a]),this.editor.onDisplayChanged(),setTimeout(dojo.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown()}),10)}}),dojo.declare("dijit._editor.plugins.ImgLinkDialog",[dijit._editor.plugins.LinkDialog],{linkDialogTemplate:"<table><tr><td><label for='${id}_urlInput'>${url}</label></td><td><input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' required='true' id='${id}_urlInput' name='urlInput' intermediateChanges='true'/></td></tr><tr><td><label for='${id}_textInput'>${text}</label></td><td><input dojoType='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' name='textInput' intermediateChanges='true'/></td></tr><tr><td></td><td></td></tr><tr><td colspan='2'><button dojoType='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button><button dojoType='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button></td></tr></table>",
htmlTemplate:'<img src="${urlInput}" _djrealurl="${urlInput}" alt="${textInput}" />',tag:"img",_getCurrentValues:function(a){var b,c;a&&a.tagName.toLowerCase()===this.tag?(b=a.getAttribute("_djrealurl")||a.getAttribute("src"),c=a.getAttribute("alt"),dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[a,!0])):c=dojo.withGlobal(this.editor.window,dijit._editor.selection.getSelectedText);return{urlInput:b||"",textInput:c||""}},_isValid:function(){return this._urlInput.isValid()},
_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.connect(this.editor.editNode,"onmousedown",this._selectTag)}))},_selectTag:function(a){if(a&&a.target)a=a.target,(a.tagName?a.tagName.toLowerCase():"")===this.tag&&dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[a])},_checkValues:function(a){if(a&&a.urlInput)a.urlInput=a.urlInput.replace(/"/g,"&quot;");if(a&&a.textInput)a.textInput=a.textInput.replace(/"/g,
"&quot;");return a},_onDblClick:function(a){if(a&&a.target&&(a=a.target,(a.tagName?a.tagName.toLowerCase():"")===this.tag&&dojo.attr(a,"src")))dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[a]),this.editor.onDisplayChanged(),setTimeout(dojo.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown()}),10)}}),dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "createLink":a.plugin=new dijit._editor.plugins.LinkDialog({command:a.args.name});
break;case "insertImage":a.plugin=new dijit._editor.plugins.ImgLinkDialog({command:a.args.name})}}));
if(!dojo._hasResource["dojo.colors"])dojo._hasResource["dojo.colors"]=!0,dojo.provide("dojo.colors"),dojo.getObject("colors",!0,dojo),function(){var a=function(a,b,e){e<0&&++e;e>1&&--e;var f=6*e;return f<1?a+(b-a)*f:2*e<1?b:3*e<2?a+(b-a)*(2/3-e)*6:a};dojo.colorFromRgb=function(b,d){var e=b.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(e){var f=e[2].split(/\s*,\s*/),g=f.length,e=e[1];if(e=="rgb"&&g==3||e=="rgba"&&g==4)return e=f[0],e.charAt(e.length-1)=="%"?(e=dojo.map(f,function(a){return parseFloat(a)*
2.56}),g==4&&(e[3]=f[3]),dojo.colorFromArray(e,d)):dojo.colorFromArray(f,d);if(e=="hsl"&&g==3||e=="hsla"&&g==4){var e=(parseFloat(f[0])%360+360)%360/360,h=parseFloat(f[1])/100,j=parseFloat(f[2])/100,h=j<=0.5?j*(h+1):j+h-j*h,j=2*j-h,e=[a(j,h,e+1/3)*256,a(j,h,e)*256,a(j,h,e-1/3)*256,1];g==4&&(e[3]=f[3]);return dojo.colorFromArray(e,d)}}return null};var b=function(a,b,e){a=Number(a);return isNaN(a)?e:a<b?b:a>e?e:a};dojo.Color.prototype.sanitize=function(){this.r=Math.round(b(this.r,0,255));this.g=Math.round(b(this.g,
0,255));this.b=Math.round(b(this.b,0,255));this.a=b(this.a,0,1);return this}}(),dojo.colors.makeGrey=function(a,b){return dojo.colorFromArray([a,a,a,b])},dojo.mixin(dojo.Color.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],
cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,
206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,
240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,
0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,
250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],transparent:[0,0,0,0],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});
dojo._hasResource["dijit._PaletteMixin"]||(dojo._hasResource["dijit._PaletteMixin"]=!0,dojo.provide("dijit._PaletteMixin"),dojo.declare("dijit._PaletteMixin",[dijit._CssStateMixin],{defaultTimeout:500,timeoutChangeRate:0.9,value:null,_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:"",_preparePalette:function(a,b,c){this._cells=[];for(var d=this._blankGif,c=c||dojo.getObject(this.dyeClass),e=0;e<a.length;e++)for(var f=dojo.create("tr",{tabIndex:"-1"},this.gridNode),g=0;g<a[e].length;g++){var h=
a[e][g];if(h){var j=new c(h,e,g),h=dojo.create("td",{"class":this.cellClass,tabIndex:"-1",title:b[h]});j.fillCell(h,d);this.connect(h,"ondijitclick","_onCellClick");this._trackMouseState(h,this.cellClass);dojo.place(h,f);h.index=this._cells.length;this._cells.push({node:h,dye:j})}}this._xDim=a[0].length;this._yDim=a.length;var k={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1},l;for(l in k)this._connects.push(dijit.typematic.addKeyListener(this.domNode,
{charOrCode:dojo.keys[l],ctrlKey:!1,altKey:!1,shiftKey:!1},this,function(){var a=k[l];return function(b){this._navigateByKey(a,b)}}(),this.timeoutChangeRate,this.defaultTimeout))},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node)},focus:function(){dijit.focus(this._currentFocus)},_onCellClick:function(a){var b=a.currentTarget,c=this._getDye(b).getValue();this._setCurrent(b);setTimeout(dojo.hitch(this,function(){dijit.focus(b);this._setValueAttr(c,!0)}));dojo.removeClass(b,
"dijitPaletteCellHover");dojo.stopEvent(a)},_setCurrent:function(a){"_currentFocus"in this&&dojo.attr(this._currentFocus,"tabIndex","-1");(this._currentFocus=a)&&dojo.attr(a,"tabIndex",this.tabIndex)},_setValueAttr:function(a,b){this._selectedCell>=0&&dojo.removeClass(this._cells[this._selectedCell].node,"dijitPaletteCellSelected");this._selectedCell=-1;if(a)for(var c=0;c<this._cells.length;c++)if(a==this._cells[c].dye.getValue()){this._selectedCell=c;dojo.addClass(this._cells[c].node,"dijitPaletteCellSelected");
break}this._set("value",this._selectedCell>=0?a:null);if(b||b===void 0)this.onChange(a)},onChange:function(){},_navigateByKey:function(a,b){if(b!=-1){var c=this._currentFocus.index+a;if(c<this._cells.length&&c>-1)c=this._cells[c].node,this._setCurrent(c),setTimeout(dojo.hitch(dijit,"focus",c),0)}},_getDye:function(a){return this._cells[a.index].dye}}));
dojo._hasResource["dijit.ColorPalette"]||(dojo._hasResource["dijit.ColorPalette"]=!0,dojo.provide("dijit.ColorPalette"),dojo.declare("dijit.ColorPalette",[dijit._Widget,dijit._Templated,dijit._PaletteMixin],{palette:"7x10",_palettes:{"7x10":[["white","seashell","cornsilk","lemonchiffon","lightyellow","palegreen","paleturquoise","lightcyan","lavender","plum"],["lightgray","pink","bisque","moccasin","khaki","lightgreen","lightseagreen","lightskyblue","cornflowerblue","violet"],["silver","lightcoral",
"sandybrown","orange","palegoldenrod","chartreuse","mediumturquoise","skyblue","mediumslateblue","orchid"],["gray","red","orangered","darkorange","yellow","limegreen","darkseagreen","royalblue","slateblue","mediumorchid"],["dimgray","crimson","chocolate","coral","gold","forestgreen","seagreen","blue","blueviolet","darkorchid"],["darkslategray","firebrick","saddlebrown","sienna","olive","green","darkcyan","mediumblue","darkslateblue","darkmagenta"],["black","darkred","maroon","brown","darkolivegreen",
"darkgreen","midnightblue","navy","indigo","purple"]],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:dojo.cache("dijit","templates/ColorPalette.html",'<div class="dijitInline dijitColorPalette">\n\t<table class="dijitPaletteTable" cellSpacing="0" cellPadding="0">\n\t\t<tbody dojoAttachPoint="gridNode"></tbody>\n\t</table>\n</div>\n'),baseClass:"dijitColorPalette",buildRendering:function(){this.inherited(arguments);this._preparePalette(this._palettes[this.palette],
dojo.i18n.getLocalization("dojo","colors",this.lang),dojo.declare(dijit._Color,{hc:dojo.hasClass(dojo.body(),"dijit_a11y"),palette:this.palette}))}}),dojo.declare("dijit._Color",dojo.Color,{template:"<span class='dijitInline dijitPaletteImg'><img src='${blankGif}' alt='${alt}' class='dijitColorPaletteSwatch' style='background-color: ${color}'/></span>",hcTemplate:"<span class='dijitInline dijitPaletteImg' style='position: relative; overflow: hidden; height: 12px; width: 14px;'><img src='${image}' alt='${alt}' style='position: absolute; left: ${left}px; top: ${top}px; ${size}'/></span>",
_imagePaths:{"7x10":dojo.moduleUrl("dijit.themes","a11y/colors7x10.png"),"3x4":dojo.moduleUrl("dijit.themes","a11y/colors3x4.png")},constructor:function(a,b,c){this._alias=a;this._row=b;this._col=c;this.setColor(dojo.Color.named[a])},getValue:function(){return this.toHex()},fillCell:function(a,b){var c=dojo.string.substitute(this.hc?this.hcTemplate:this.template,{color:this.toHex(),blankGif:b,alt:this._alias,image:this._imagePaths[this.palette].toString(),left:this._col*-20-5,top:this._row*-20-5,
size:this.palette=="7x10"?"height: 145px; width: 206px":"height: 64px; width: 86px"});dojo.place(c,a)}}));
dojo._hasResource["dijit._editor.plugins.TextColor"]||(dojo._hasResource["dijit._editor.plugins.TextColor"]=!0,dojo.provide("dijit._editor.plugins.TextColor"),dojo.declare("dijit._editor.plugins.TextColor",dijit._editor._Plugin,{buttonClass:dijit.form.DropDownButton,useDefaultCommand:!1,constructor:function(){this.dropDown=new dijit.ColorPalette;this.connect(this.dropDown,"onChange",function(a){this.editor.execCommand(this.command,a)})},updateState:function(){var a=this.editor,b=this.command;if(a&&
a.isLoaded&&b.length){if(this.button){var c=this.get("disabled");this.button.set("disabled",c);if(c)return;var d;try{d=a.queryCommandValue(b)||""}catch(e){d=""}}d==""&&(d="#000000");d=="transparent"&&(d="#ffffff");typeof d=="string"?d.indexOf("rgb")>-1&&(d=dojo.colorFromRgb(d).toHex()):(d=((d&255)<<16|d&65280|(d&16711680)>>>16).toString(16),d="#000000".slice(0,7-d.length)+d);d!==this.dropDown.get("value")&&this.dropDown.set("value",d,!1)}}}),dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,
function(a){if(!a.plugin)switch(a.args.name){case "foreColor":case "hiliteColor":a.plugin=new dijit._editor.plugins.TextColor({command:a.args.name})}}));dojo._hasResource["dijit.dijit"]||(dojo._hasResource["dijit.dijit"]=!0,dojo.provide("dijit.dijit"));dojo._hasResource["dijit.form.ToggleButton"]||(dojo._hasResource["dijit.form.ToggleButton"]=!0,dojo.provide("dijit.form.ToggleButton"));
dojo._hasResource["dijit.form.CheckBox"]||(dojo._hasResource["dijit.form.CheckBox"]=!0,dojo.provide("dijit.form.CheckBox"),dojo.declare("dijit.form.CheckBox",dijit.form.ToggleButton,{templateString:dojo.cache("dijit.form","templates/CheckBox.html",'<div class="dijit dijitReset dijitInline" role="presentation"\n\t><input\n\t \t${!nameAttrSetting} type="${type}" ${checkedAttrSetting}\n\t\tclass="dijitReset dijitCheckBoxInput"\n\t\tdojoAttachPoint="focusNode"\n\t \tdojoAttachEvent="onclick:_onClick"\n/></div>\n'),
baseClass:"dijitCheckBox",type:"checkbox",value:"on",readOnly:!1,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{readOnly:"focusNode"}),_setReadOnlyAttr:function(a){this._set("readOnly",a);dojo.attr(this.focusNode,"readOnly",a);dijit.setWaiState(this.focusNode,"readonly",a)},_setValueAttr:function(a,b){typeof a=="string"&&(this._set("value",a),dojo.attr(this.focusNode,"value",a),a=!0);this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked?this.value:
!1},_setLabelAttr:void 0,postMixInProperties:function(){if(this.value=="")this.value="on";this.checkedAttrSetting=this.checked?"checked":"";this.inherited(arguments)},_fillContent:function(){},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1);this._set("value",this.params.value||"on");dojo.attr(this.focusNode,"value",this.value)},_onFocus:function(){this.id&&dojo.query("label[for='"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&
dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)},_onClick:function(a){return this.readOnly?(dojo.stopEvent(a),!1):this.inherited(arguments)}}),dojo.declare("dijit.form.RadioButton",dijit.form.CheckBox,{type:"radio",baseClass:"dijitRadio",_setCheckedAttr:function(a){this.inherited(arguments);if(this._created&&a){var b=this;dojo.query("INPUT[type=radio]",this.focusNode.form||dojo.doc).forEach(function(a){a.name==b.name&&a!=b.focusNode&&a.form==b.focusNode.form&&
(a=dijit.getEnclosingWidget(a))&&a.checked&&a.set("checked",!1)})}},_clicked:function(){this.checked||this.set("checked",!0)}}));
if(!dojo._hasResource["dojo.cldr.supplemental"])dojo._hasResource["dojo.cldr.supplemental"]=!0,dojo.provide("dojo.cldr.supplemental"),dojo.getObject("cldr.supplemental",!0,dojo),dojo.cldr.supplemental.getFirstDayOfWeek=function(a){a={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,sy:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,il:0,"in":0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,
tw:0,um:0,us:0,uz:0,vi:0,zw:0}[dojo.cldr.supplemental._region(a)];return a===void 0?1:a},dojo.cldr.supplemental._region=function(a){var a=dojo.i18n.normalizeLocale(a),a=a.split("-"),b=a[1];b?b.length==4&&(b=a[2]):b={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[a[0]];return b},dojo.cldr.supplemental.getWeekend=function(a){var b=dojo.cldr.supplemental._region(a),a={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,
kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[b],b={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[b];a===void 0&&(a=6);b===void 0&&(b=0);return{start:a,end:b}};
if(!dojo._hasResource["dojo.date"])dojo._hasResource["dojo.date"]=!0,dojo.provide("dojo.date"),dojo.getObject("date",!0,dojo),dojo.date.getDaysInMonth=function(a){var b=a.getMonth(),c=[31,28,31,30,31,30,31,31,30,31,30,31];return b==1&&dojo.date.isLeapYear(a)?29:c[b]},dojo.date.isLeapYear=function(a){a=a.getFullYear();return!(a%400)||!(a%4)&&!!(a%100)},dojo.date.getTimezoneName=function(a){var b=a.toString(),c="",d=b.indexOf("(");if(d>-1)c=b.substring(++d,b.indexOf(")"));else if(d=/([A-Z\/]+) \d{4}$/,
b=b.match(d))c=b[1];else if(b=a.toLocaleString(),d=/ ([A-Z\/]+)$/,b=b.match(d))c=b[1];return c=="AM"||c=="PM"?"":c},dojo.date.compare=function(a,b,c){a=new Date(+a);b=new Date(+(b||new Date));c=="date"?(a.setHours(0,0,0,0),b.setHours(0,0,0,0)):c=="time"&&(a.setFullYear(0,0,0),b.setFullYear(0,0,0));return a>b?1:a<b?-1:0},dojo.date.add=function(a,b,c){var d=new Date(+a),e=!1,f="Date";switch(b){case "day":break;case "weekday":var g;(b=c%5)?g=parseInt(c/5):(b=c>0?5:-5,g=c>0?(c-5)/5:(c+5)/5);var h=a.getDay(),
j=0;h==6&&c>0?j=1:h==0&&c<0&&(j=-1);h+=b;if(h==0||h==6)j=c>0?2:-2;c=7*g+b+j;break;case "year":f="FullYear";e=!0;break;case "week":c*=7;break;case "quarter":c*=3;case "month":e=!0;f="Month";break;default:f="UTC"+b.charAt(0).toUpperCase()+b.substring(1)+"s"}if(f)d["set"+f](d["get"+f]()+c);e&&d.getDate()<a.getDate()&&d.setDate(0);return d},dojo.date.difference=function(a,b,c){var b=b||new Date,c=c||"day",d=b.getFullYear()-a.getFullYear(),e=1;switch(c){case "quarter":a=a.getMonth();b=b.getMonth();a=Math.floor(a/
3)+1;b=Math.floor(b/3)+1;b+=d*4;e=b-a;break;case "weekday":d=Math.round(dojo.date.difference(a,b,"day"));c=parseInt(dojo.date.difference(a,b,"week"));if(d%7==0)d=c*5;else{var e=0,f=a.getDay(),g=b.getDay(),c=parseInt(d/7),b=d%7,a=new Date(a);a.setDate(a.getDate()+c*7);a=a.getDay();if(d>0)switch(!0){case f==6:e=-1;break;case f==0:e=0;break;case g==6:e=-1;break;case g==0:e=-2;break;case a+b>5:e=-2}else if(d<0)switch(!0){case f==6:e=0;break;case f==0:e=1;break;case g==6:e=2;break;case g==0:e=1;break;
case a+b<0:e=2}d+=e;d-=c*2}e=d;break;case "year":e=d;break;case "month":e=b.getMonth()-a.getMonth()+d*12;break;case "week":e=parseInt(dojo.date.difference(a,b,"day")/7);break;case "day":e/=24;case "hour":e/=60;case "minute":e/=60;case "second":e/=1E3;case "millisecond":e*=b.getTime()-a.getTime()}return Math.round(e)};
if(!dojo._hasResource["dojo.date.locale"])dojo._hasResource["dojo.date.locale"]=!0,dojo.provide("dojo.date.locale"),dojo.getObject("date.locale",!0,dojo),function(){function a(a,b,c,g){return g.replace(/([a-z])\1*/ig,function(h){var j,k,l=h.charAt(0),h=h.length,p=["abbr","wide","narrow"];switch(l){case "G":j=b[h<4?"eraAbbr":"eraNames"][a.getFullYear()<0?0:1];break;case "y":j=a.getFullYear();switch(h){case 1:break;case 2:if(!c.fullYear){j=String(j);j=j.substr(j.length-2);break}default:k=!0}break;case "Q":case "q":j=
Math.ceil((a.getMonth()+1)/3);k=!0;break;case "M":j=a.getMonth();h<3?(j+=1,k=!0):(l=["months-format",p[h-3]].join("-"),j=b[l][j]);break;case "w":j=dojo.date.locale._getWeekOfYear(a,0);k=!0;break;case "d":j=a.getDate();k=!0;break;case "D":j=dojo.date.locale._getDayOfYear(a);k=!0;break;case "E":j=a.getDay();h<3?(j+=1,k=!0):(l=["days-format",p[h-3]].join("-"),j=b[l][j]);break;case "a":j=a.getHours()<12?"am":"pm";j=c[j]||b["dayPeriods-format-wide-"+j];break;case "h":case "H":case "K":case "k":k=a.getHours();
switch(l){case "h":j=k%12||12;break;case "H":j=k;break;case "K":j=k%12;break;case "k":j=k||24}k=!0;break;case "m":j=a.getMinutes();k=!0;break;case "s":j=a.getSeconds();k=!0;break;case "S":j=Math.round(a.getMilliseconds()*Math.pow(10,h-3));k=!0;break;case "v":case "z":if(j=dojo.date.locale._getZone(a,!0,c))break;h=4;case "Z":j=dojo.date.locale._getZone(a,!1,c);j=[j<=0?"+":"-",dojo.string.pad(Math.floor(Math.abs(j)/60),2),dojo.string.pad(Math.abs(j)%60,2)];h==4&&(j.splice(0,0,"GMT"),j.splice(3,0,":"));
j=j.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+g);}k&&(j=dojo.string.pad(j,h));return j})}function b(a,b,c,g){var h=function(a){return a},b=b||h,c=c||h,g=g||h,j=a.match(/(''|[^'])+/g),k=a.charAt(0)=="'";dojo.forEach(j,function(a,d){a?(j[d]=(k?c:b)(a.replace(/''/g,"'")),k=!k):j[d]=""});return g(j.join(""))}function c(a,b,c,g){g=dojo.regexp.escapeString(g);c.strict||(g=g.replace(" a"," ?a"));return g.replace(/([a-z])\1*/ig,function(g){var j;j=g.charAt(0);var k=
g.length,l="",p="";c.strict?(k>1&&(l="0{"+(k-1)+"}"),k>2&&(p="0{"+(k-2)+"}")):(l="0?",p="0{0,2}");switch(j){case "y":j="\\d{2,4}";break;case "M":j=k>2?"\\S+?":"1[0-2]|"+l+"[1-9]";break;case "D":j="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p+"[1-9][0-9]|"+l+"[1-9]";break;case "d":j="3[01]|[12]\\d|"+l+"[1-9]";break;case "w":j="[1-4][0-9]|5[0-3]|"+l+"[1-9]";break;case "E":j="\\S+";break;case "h":j="1[0-2]|"+l+"[1-9]";break;case "k":j="1[01]|"+l+"\\d";break;case "H":j="1\\d|2[0-3]|"+l+"\\d";break;case "K":j=
"1\\d|2[0-4]|"+l+"[1-9]";break;case "m":case "s":j="[0-5]\\d";break;case "S":j="\\d{"+k+"}";break;case "a":k=c.am||b["dayPeriods-format-wide-am"];l=c.pm||b["dayPeriods-format-wide-pm"];j=k+"|"+l;c.strict||(k!=k.toLowerCase()&&(j+="|"+k.toLowerCase()),l!=l.toLowerCase()&&(j+="|"+l.toLowerCase()),j.indexOf(".")!=-1&&(j+="|"+j.replace(/\./g,"")));j=j.replace(/\./g,"\\.");break;default:j=".*"}a&&a.push(g);return"("+j+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}dojo.date.locale._getZone=function(a,b){return b?
dojo.date.getTimezoneName(a):a.getTimezoneOffset()};dojo.date.locale.format=function(c,e){var e=e||{},f=dojo.i18n.normalizeLocale(e.locale),g=e.formatLength||"short",f=dojo.date.locale._getGregorianBundle(f),h=[],j=dojo.hitch(this,a,c,f,e);if(e.selector=="year")return b(f["dateFormatItem-yyyy"]||"yyyy",j);var k;e.selector!="date"&&(k=e.timePattern||f["timeFormat-"+g])&&h.push(b(k,j));e.selector!="time"&&(k=e.datePattern||f["dateFormat-"+g])&&h.push(b(k,j));return h.length==1?h[0]:f["dateTimeFormat-"+
g].replace(/\{(\d+)\}/g,function(a,b){return h[b]})};dojo.date.locale.regexp=function(a){return dojo.date.locale._parseInfo(a).regexp};dojo.date.locale._parseInfo=function(a){var a=a||{},e=dojo.i18n.normalizeLocale(a.locale),e=dojo.date.locale._getGregorianBundle(e),f=a.formatLength||"short",g=a.datePattern||e["dateFormat-"+f],h=a.timePattern||e["timeFormat-"+f],f=a.selector=="date"?g:a.selector=="time"?h:e["dateTimeFormat-"+f].replace(/\{(\d+)\}/g,function(a,b){return[h,g][b]}),j=[];return{regexp:b(f,
dojo.hitch(this,c,j,e,a)),tokens:j,bundle:e}};dojo.date.locale.parse=function(a,b){var c=/[\u200E\u200F\u202A\u202E]/g,g=dojo.date.locale._parseInfo(b),h=g.tokens,j=g.bundle,c=RegExp("^"+g.regexp.replace(c,"")+"$",g.strict?"":"i").exec(a&&a.replace(c,""));if(!c)return null;var k=["abbr","wide","narrow"],l=[1970,0,1,0,0,0,0],p="",c=dojo.every(c,function(a,c){if(!c)return!0;var d=h[c-1],f=d.length;switch(d.charAt(0)){case "y":if(f!=2&&b.strict)l[0]=a;else if(a<100)a=Number(a),f=""+(new Date).getFullYear(),
d=f.substring(0,2)*100,f=Math.min(Number(f.substring(2,4))+20,99),l[0]=a<f?d+a:d-100+a;else{if(b.strict)return!1;l[0]=a}break;case "M":if(f>2){if(d=j["months-format-"+k[f-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),d=dojo.map(d,function(a){return a.replace(".","").toLowerCase()})),a=dojo.indexOf(d,a),a==-1)return!1}else a--;l[1]=a;break;case "E":case "e":d=j["days-format-"+k[f-3]].concat();b.strict||(a=a.toLowerCase(),d=dojo.map(d,function(a){return a.toLowerCase()}));a=dojo.indexOf(d,
a);if(a==-1)return!1;break;case "D":l[1]=0;case "d":l[2]=a;break;case "a":d=b.am||j["dayPeriods-format-wide-am"];f=b.pm||j["dayPeriods-format-wide-pm"];if(!b.strict)var g=/\./g,a=a.replace(g,"").toLowerCase(),d=d.replace(g,"").toLowerCase(),f=f.replace(g,"").toLowerCase();if(b.strict&&a!=d&&a!=f)return!1;p=a==f?"p":a==d?"a":"";break;case "K":a==24&&(a=0);case "h":case "H":case "k":if(a>23)return!1;l[3]=a;break;case "m":l[4]=a;break;case "s":l[5]=a;break;case "S":l[6]=a}return!0}),g=+l[3];p==="p"&&
g<12?l[3]=g+12:p==="a"&&g==12&&(l[3]=0);g=new Date(l[0],l[1],l[2],l[3],l[4],l[5],l[6]);b.strict&&g.setFullYear(l[0]);var n=h.join(""),o=n.indexOf("d")!=-1,n=n.indexOf("M")!=-1;if(!c||n&&g.getMonth()>l[1]||o&&g.getDate()>l[2])return null;if(n&&g.getMonth()<l[1]||o&&g.getDate()<l[2])g=dojo.date.add(g,"hour",1);return g}}(),function(){var a=[];dojo.date.locale.addCustomFormats=function(b,c){a.push({pkg:b,name:c})};dojo.date.locale._getGregorianBundle=function(b){var c={};dojo.forEach(a,function(a){a=
dojo.i18n.getLocalization(a.pkg,a.name,b);c=dojo.mixin(c,a)},this);return c}}(),dojo.date.locale.addCustomFormats("dojo.cldr","gregorian"),dojo.date.locale.getNames=function(a,b,c,d){var e,d=dojo.date.locale._getGregorianBundle(d),a=[a,c,b];c=="standAlone"&&(c=a.join("-"),e=d[c],e[0]==1&&(e=void 0));a[1]="format";return(e||d[a.join("-")]).concat()},dojo.date.locale.isWeekend=function(a,b){var c=dojo.cldr.supplemental.getWeekend(b),d=(a||new Date).getDay();c.end<c.start&&(c.end+=7,d<c.start&&(d+=7));
return d>=c.start&&d<=c.end},dojo.date.locale._getDayOfYear=function(a){return dojo.date.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1},dojo.date.locale._getWeekOfYear=function(a,b){arguments.length==1&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),d=Math.floor((dojo.date.locale._getDayOfYear(a)+(c-b+7)%7-1)/7);c==b&&d++;return d};
dojo._hasResource["dijit.Calendar"]||(dojo._hasResource["dijit.Calendar"]=!0,dojo.provide("dijit.Calendar"),dojo.declare("dijit.Calendar",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/Calendar.html",'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" dojoAttachEvent="onkeypress: _onKeyPress" aria-labelledby="${id}_year">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' dojoAttachPoint="decrementMonth">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"/>\n\t\t\t\t<span dojoAttachPoint="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5">\n\t\t\t\t<div dojoType="dijit.form.DropDownButton" dojoAttachPoint="monthDropDownButton"\n\t\t\t\t\tid="${id}_mddb" tabIndex="-1">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' dojoAttachPoint="incrementMonth">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"/>\n\t\t\t\t<span dojoAttachPoint="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader"><span class="dijitCalendarDayLabel"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent="onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp" class="dijitReset dijitCalendarBodyContainer">\n\t\t<tr class="dijitReset dijitCalendarWeekTemplate" role="row">\n\t\t\t<td class="dijitReset dijitCalendarDateTemplate" role="gridcell"><span class="dijitCalendarDateLabel"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7">\n\t\t\t\t<h3 class="dijitCalendarYearLabel">\n\t\t\t\t\t<span dojoAttachPoint="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear"></span>\n\t\t\t\t\t<span dojoAttachPoint="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" id="${id}_year"></span>\n\t\t\t\t\t<span dojoAttachPoint="nextYearLabelNode" class="dijitInline dijitCalendarNextYear"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n'),
widgetsInTemplate:!0,value:new Date(""),datePackage:"dojo.date",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},_isValidDate:function(a){return a&&!isNaN(a)&&typeof a=="object"&&a.toString()!=this.constructor.prototype.value.toString()},setValue:function(a){dojo.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.",
"","2.0");this.set("value",a)},_getValueAttr:function(){var a=new this.dateClassObj(this.value);a.setHours(0,0,0,0);a.getDate()<this.value.getDate()&&(a=this.dateFuncObj.add(a,"hour",1));return a},_setValueAttr:function(a,b){a&&(a=new this.dateClassObj(a));if(this._isValidDate(a)){if(!this._isValidDate(this.value)||this.dateFuncObj.compare(a,this.value))if(a.setHours(1,0,0,0),!this.isDisabledDate(a,this.lang)&&(this._set("value",a),this.set("currentFocus",a),b||typeof b=="undefined"))this.onChange(this.get("value")),
this.onValueSelected(this.get("value"))}else this._set("value",null),this.set("currentFocus",this.currentFocus)},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(dojo.doc.createTextNode(b))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var b=a.getDay(),c=this.dateFuncObj.getDaysInMonth(a),d=this.dateFuncObj.getDaysInMonth(this.dateFuncObj.add(a,"month",-1)),e=new this.dateClassObj,f=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);
f>b&&(f-=7);dojo.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(g,h){h+=f;var j=new this.dateClassObj(a),n,o="dijitCalendar",m=0;h<b?(n=d-b+h+1,m=-1,o+="Previous"):h>=b+c?(n=h-b-c+1,m=1,o+="Next"):(n=h-b+1,o+="Current");m&&(j=this.dateFuncObj.add(j,"month",m));j.setDate(n);this.dateFuncObj.compare(j,e,"date")||(o="dijitCalendarCurrentDate "+o);this._isSelectedDate(j,this.lang)&&(o="dijitCalendarSelectedDate "+o);this.isDisabledDate(j,this.lang)&&(o="dijitCalendarDisabledDate "+
o);(n=this.getClassForDate(j,this.lang))&&(o=n+" "+o);g.className=o+"Month dijitCalendarDateTemplate";g.dijitDateValue=j.valueOf();dojo.attr(g,"dijitDateValue",j.valueOf());o=dojo.query(".dijitCalendarDateLabel",g)[0];j=j.getDateLocalized?j.getDateLocalized(this.lang):j.getDate();this._setText(o,j)},this);var g=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.monthDropDownButton.dropDown.set("months",g);this.monthDropDownButton.containerNode.innerHTML=(dojo.isIE==6?"":
"<div class='dijitSpacer'>"+this.monthDropDownButton.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+g[a.getMonth()]+"</div>";var h=a.getFullYear()-1,j=new this.dateClassObj;dojo.forEach(["previous","current","next"],function(a){j.setFullYear(h++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(j,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateClassObj=
dojo.getObject(a.datePackage&&a.datePackage!="dojo.date"?a.datePackage+".Date":"Date",!1);this.datePackage=a.datePackage||this.datePackage;this.dateFuncObj=dojo.getObject(this.datePackage,!1);this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",!1)},postMixInProperties:function(){isNaN(this.value)&&delete this.value;this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,!1);var a=dojo.hitch(this,function(a,b){for(var c=dojo.query(a,
this.domNode)[0],d=0;d<b;d++)c.parentNode.appendChild(c.cloneNode(!0))});a(".dijitCalendarDayLabelTemplate",6);a(".dijitCalendarDateTemplate",6);a(".dijitCalendarWeekTemplate",5);var b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);dojo.query(".dijitCalendarDayLabel",this.domNode).forEach(function(a,d){this._setText(a,b[(d+c)%7])},this);a=new this.dateClassObj(this.currentFocus);this.monthDropDownButton.dropDown=new dijit.Calendar._MonthDropDown({id:this.id+
"_mdd",onChange:dojo.hitch(this,"_onMonthSelect")});this.set("currentFocus",a,!1);var d=this,a=function(a,b,c){d._connects.push(dijit.typematic.addMouseListener(d[a],d,function(a){a>=0&&d._adjustDisplay(b,c)},0.8,500))};a("incrementMonth","month",1);a("decrementMonth","month",-1);a("nextYearLabelNode","year",1);a("previousYearLabelNode","year",-1)},_adjustDisplay:function(a,b){this._setCurrentFocusAttr(this.dateFuncObj.add(this.currentFocus,a,b))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,
c=c?dojo.query("[dijitDateValue="+c.valueOf()+"]",this.domNode)[0]:null,a=new this.dateClassObj(a);a.setHours(1,0,0,0);this._set("currentFocus",a);this._populateGrid();var d=dojo.query("[dijitDateValue="+a.valueOf()+"]",this.domNode)[0];d.setAttribute("tabIndex",this.tabIndex);(this._focused||b)&&d.focus();c&&c!=d&&(dojo.isWebKit?c.setAttribute("tabIndex","-1"):c.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onMonthSelect:function(a){this.currentFocus=
this.dateFuncObj.add(this.currentFocus,"month",a-this.currentFocus.getMonth());this._populateGrid()},_onDayClick:function(a){dojo.stopEvent(a);for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!dojo.hasClass(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_onDayMouseOver:function(a){if((a=dojo.hasClass(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue||a==this.previousYearLabelNode||a==this.nextYearLabelNode))dojo.addClass(a,"dijitCalendarHoveredDate"),
this._currentNode=a},_onDayMouseOut:function(a){if(this._currentNode&&!(a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode))a="dijitCalendarHoveredDate",dojo.hasClass(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),dojo.removeClass(this._currentNode,a),this._currentNode=null},_onDayMouseDown:function(a){if((a=a.target.parentNode)&&a.dijitDateValue)dojo.addClass(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&
a.dijitDateValue&&dojo.removeClass(a,"dijitCalendarActiveDate")},handleKey:function(a){var b=dojo.keys,c=-1,d,e=this.currentFocus;switch(a.keyCode){case b.RIGHT_ARROW:c=1;case b.LEFT_ARROW:d="day";this.isLeftToRight()||(c*=-1);break;case b.DOWN_ARROW:c=1;case b.UP_ARROW:d="week";break;case b.PAGE_DOWN:c=1;case b.PAGE_UP:d=a.ctrlKey||a.altKey?"year":"month";break;case b.END:e=this.dateFuncObj.add(e,"month",1),d="day";case b.HOME:e=new this.dateClassObj(e);e.setDate(1);break;case b.ENTER:case b.SPACE:this.set("value",
this.currentFocus);break;default:return!0}d&&(e=this.dateFuncObj.add(e,d,c));this._setCurrentFocusAttr(e);return!1},_onKeyPress:function(a){this.handleKey(a)||dojo.stopEvent(a)},onValueSelected:function(){},onChange:function(){},_isSelectedDate:function(a){return this._isValidDate(this.value)&&!this.dateFuncObj.compare(a,this.value,"date")},isDisabledDate:function(){},getClassForDate:function(){}}),dojo.declare("dijit.Calendar._MonthDropDown",[dijit._Widget,dijit._Templated],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' dojoAttachEvent='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",
_setMonthsAttr:function(a){this.domNode.innerHTML=dojo.map(a,function(a,c){return a?"<div class='dijitCalendarMonthLabel' month='"+c+"'>"+a+"</div>":""}).join("")},_onClick:function(a){this.onChange(dojo.attr(a.target,"month"))},onChange:function(){},_onMenuHover:function(a){dojo.toggleClass(a.target,"dijitCalendarMonthLabelHover",a.type=="mouseover")}}));
dojo._hasResource["dijit.form._DateTimeTextBox"]||(dojo._hasResource["dijit.form._DateTimeTextBox"]=!0,dojo.provide("dijit.form._DateTimeTextBox"),dojo.declare("dijit.form._DateTimeTextBox",[dijit.form.RangeBoundTextBox,dijit._HasDropDown],{templateString:dojo.cache("dijit.form","templates/DropDownBox.html",'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdojoAttachPoint="_buttonNode, _popupStateNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdojoAttachPoint="textbox,focusNode" role="textbox" aria-haspopup="true"\n\t/></div\n></div>\n'),
hasDownArrow:!0,openOnClick:!0,regExpGen:dojo.date.locale.regexp,datePackage:"dojo.date",compare:function(a,b){var c=this._isInvalidDate(a),d=this._isInvalidDate(b);return c?d?0:-1:d?1:dojo.date.compare(a,b,this._selector)},forceWidth:!0,format:function(a,b){return!a?"":this.dateLocaleModule.format(a,b)},parse:function(a,b){return this.dateLocaleModule.parse(a,b)||(this._isEmpty(a)?null:void 0)},serialize:function(a,b){a.toGregorian&&(a=a.toGregorian());return dojo.date.stamp.toISOString(a,b)},dropDownDefaultValue:new Date,
value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(a){this.dateClassObj=dojo.getObject(a.datePackage?a.datePackage+".Date":"Date",!1);this.value=new this.dateClassObj("");this.datePackage=a.datePackage||this.datePackage;this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",!1);this.regExpGen=this.dateLocaleModule.regexp;this._invalidDate=dijit.form._DateTimeTextBox.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow)this._buttonNode.style.display=
"none";if(this.openOnClick||!this.hasDownArrow)this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick"},_setConstraintsAttr:function(a){a.selector=this._selector;a.fullYear=!0;var b=dojo.date.stamp.fromISOString;if(typeof a.min=="string")a.min=b(a.min);if(typeof a.max=="string")a.max=b(a.max);this.inherited(arguments)},_isInvalidDate:function(a){return!a||isNaN(a)||typeof a!="object"||a.toString()==this._invalidDate},_setValueAttr:function(a,b,c){a!==void 0&&(typeof a=="string"&&
(a=dojo.date.stamp.fromISOString(a)),this._isInvalidDate(a)&&(a=null),a instanceof Date&&!(this.dateClassObj instanceof Date)&&(a=new this.dateClassObj(a)));this.inherited(arguments);this.dropDown&&this.dropDown.set("value",a,!1)},_set:function(a,b){a=="value"&&this.value instanceof Date&&this.compare(b,this.value)==0||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj);this.dropDownDefaultValue=a},openDropDown:function(a){this.dropDown&&
this.dropDown.destroy();var b=dojo.getObject(this.popupClass,!1),c=this,d=this.get("value");this.dropDown=new b({onChange:function(a){dijit.form._DateTimeTextBox.superclass._setValueAttr.call(c,a,!0)},id:this.id+"_popup",dir:c.dir,lang:c.lang,value:d,currentFocus:!this._isInvalidDate(d)?d:this.dropDownDefaultValue,constraints:c.constraints,filterString:c.filterString,datePackage:c.datePackage,isDisabledDate:function(a){return!c.rangeCheck(a,c.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},
_setDisplayedValueAttr:function(a,b){this._setValueAttr(this.parse(a,this.constraints),b,a)}}));dojo._hasResource["dijit.form.DateTextBox"]||(dojo._hasResource["dijit.form.DateTextBox"]=!0,dojo.provide("dijit.form.DateTextBox"),dojo.declare("dijit.form.DateTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:"dijit.Calendar",_selector:"date",value:new Date("")}));
dojo._hasResource["dijit.form.Form"]||(dojo._hasResource["dijit.form.Form"]=!0,dojo.provide("dijit.form.Form"),dojo.declare("dijit.form.Form",[dijit._Widget,dijit._Templated,dijit.form._FormMixin,dijit.layout._ContentPaneResizeMixin],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form dojoAttachPoint='containerNode' dojoAttachEvent='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,
{action:"",method:"",encType:"","accept-charset":"",accept:"",target:""}),postMixInProperties:function(){this.nameAttrSetting=this.name?"name='"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){this.encType=a;dojo.attr(this.domNode,"encType",a);if(dojo.isIE)this.domNode.encoding=a},postCreate:function(){if(dojo.isIE&&this.srcNodeRef&&this.srcNodeRef.attributes){var a=this.srcNodeRef.attributes.getNamedItem("encType");a&&!a.specified&&
typeof a.value=="string"&&this.set("encType",a.value)}this.inherited(arguments)},reset:function(a){var b={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};this.onReset(b)!==!1&&b.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(a){this.reset(a);dojo.stopEvent(a);return!1},_onSubmit:function(a){var b=dijit.form.Form.prototype;if(this.execute!=b.execute||
this.onExecute!=b.onExecute)dojo.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());this.onSubmit(a)===!1&&dojo.stopEvent(a)},onSubmit:function(){return this.isValid()},submit:function(){this.onSubmit()!==!1&&this.containerNode.submit()}}));
dojo._hasResource["dijit.form.HorizontalRule"]||(dojo._hasResource["dijit.form.HorizontalRule"]=!0,dojo.provide("dijit.form.HorizontalRule"),dojo.declare("dijit.form.HorizontalRule",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitRuleContainer dijitRuleContainerH"></div>',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'<div class="dijitRuleMark dijitRuleMarkH" style="left:',_positionSuffix:"%;",_suffix:'"></div>',_genHTML:function(a){return this._positionPrefix+
a+this._positionSuffix+this.ruleStyle+this._suffix},_isHorizontal:!0,buildRendering:function(){this.inherited(arguments);var a;if(this.count==1)a=this._genHTML(50,0);else{var b,c=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){a=this._genHTML(0,0);for(b=1;b<this.count-1;b++)a+=this._genHTML(c*b,b);a+=this._genHTML(100,this.count-1)}else{a=this._genHTML(100,0);for(b=1;b<this.count-1;b++)a+=this._genHTML(100-c*b,b);a+=this._genHTML(0,this.count-1)}}this.domNode.innerHTML=a}}));
dojo._hasResource["dijit.form.HorizontalRuleLabels"]||(dojo._hasResource["dijit.form.HorizontalRuleLabels"]=!0,dojo.provide("dijit.form.HorizontalRuleLabels"),dojo.declare("dijit.form.HorizontalRuleLabels",dijit.form.HorizontalRule,{templateString:'<div class="dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"></div>',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'<div class="dijitRuleLabelContainer dijitRuleLabelContainerH" style="left:',
_labelPrefix:'"><div class="dijitRuleLabel dijitRuleLabelH">',_suffix:"</div></div>",_calcPosition:function(a){return a},_genHTML:function(a,b){return this._positionPrefix+this._calcPosition(a)+this._positionSuffix+this.labelStyle+this._labelPrefix+this.labels[b]+this._suffix},getLabels:function(){var a=this.labels;a.length||(a=dojo.query("> li",this.srcNodeRef).map(function(a){return String(a.innerHTML)}));this.srcNodeRef.innerHTML="";if(!a.length&&this.count>1)for(var b=this.minimum,c=(this.maximum-
b)/(this.count-1),d=0;d<this.count;d++)a.push(d<this.numericMargin||d>=this.count-this.numericMargin?"":dojo.number.format(b,this.constraints)),b+=c;return a},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}}));
if(!dojo._hasResource["dojo.number"])dojo._hasResource["dojo.number"]=!0,dojo.provide("dojo.number"),dojo.getObject("number",!0,dojo),dojo.number.format=function(a,b){var b=dojo.mixin({},b||{}),c=dojo.i18n.normalizeLocale(b.locale),c=dojo.i18n.getLocalization("dojo.cldr","number",c);b.customs=c;c=b.pattern||c[(b.type||"decimal")+"Format"];return isNaN(a)||Math.abs(a)==Infinity?null:dojo.number._applyPattern(a,c,b)},dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,dojo.number._applyPattern=function(a,
b,c){var c=c||{},d=c.customs.group,e=c.customs.decimal,b=b.split(";"),f=b[0],b=b[a<0?1:0]||"-"+f;if(b.indexOf("%")!=-1)a*=100;else if(b.indexOf("\u2030")!=-1)a*=1E3;else if(b.indexOf("\u00a4")!=-1)d=c.customs.currencyGroup||d,e=c.customs.currencyDecimal||e,b=b.replace(/\u00a4{1,3}/,function(a){return c[["symbol","currency","displayName"][a.length-1]]||c.currency||""});else if(b.indexOf("E")!=-1)throw Error("exponential notation not supported");var g=dojo.number._numberPatternRE,f=f.match(g);if(!f)throw Error("unable to find a number expression in pattern: "+
b);if(c.fractional===!1)c.places=0;return b.replace(g,dojo.number._formatAbsolute(a,f[0],{decimal:e,group:d,places:c.places,round:c.round}))},dojo.number.round=function(a,b,c){c=10/(c||10);return(c*+a).toFixed(b)/c},(0.9).toFixed()==0&&function(){var a=dojo.number.round;dojo.number.round=function(b,c,d){var e=Math.pow(10,-c||0),f=Math.abs(b);if(!b||f>=e||f*Math.pow(10,c+1)<5)e=0;return a(b,c,d)+(b>0?e:-e)}}(),dojo.number._formatAbsolute=function(a,b,c){c=c||{};if(c.places===!0)c.places=0;if(c.places===
Infinity)c.places=6;var b=b.split("."),d=typeof c.places=="string"&&c.places.indexOf(","),e=c.places;if(d)e=c.places.substring(d+1);else if(!(e>=0))e=(b[1]||[]).length;c.round<0||(a=dojo.number.round(a,e,c.round));var a=String(Math.abs(a)).split("."),f=a[1]||"";if(b[1]||c.places){if(d)c.places=c.places.substring(0,d);d=c.places!==void 0?c.places:b[1]&&b[1].lastIndexOf("0")+1;d>f.length&&(a[1]=dojo.string.pad(f,d,"0",!0));e<f.length&&(a[1]=f.substr(0,e))}else a[1]&&a.pop();e=b[0].replace(",","");d=
e.indexOf("0");d!=-1&&(d=e.length-d,d>a[0].length&&(a[0]=dojo.string.pad(a[0],d)),e.indexOf("#")==-1&&(a[0]=a[0].substr(a[0].length-d)));var e=b[0].lastIndexOf(","),g,h;e!=-1&&(g=b[0].length-e-1,b=b[0].substr(0,e),e=b.lastIndexOf(","),e!=-1&&(h=b.length-e-1));b=[];for(e=a[0];e;)d=e.length-g,b.push(d>0?e.substr(d):e),e=d>0?e.slice(0,d):"",h&&(g=h,delete h);a[0]=b.reverse().join(c.group||",");return a.join(c.decimal||".")},dojo.number.regexp=function(a){return dojo.number._parseInfo(a).regexp},dojo.number._parseInfo=
function(a){var a=a||{},b=dojo.i18n.normalizeLocale(a.locale),b=dojo.i18n.getLocalization("dojo.cldr","number",b),c=a.pattern||b[(a.type||"decimal")+"Format"],d=b.group,e=b.decimal,f=1;if(c.indexOf("%")!=-1)f/=100;else if(c.indexOf("\u2030")!=-1)f/=1E3;else{var g=c.indexOf("\u00a4")!=-1;g&&(d=b.currencyGroup||d,e=b.currencyDecimal||e)}b=c.split(";");b.length==1&&b.push("-"+b[0]);b=dojo.regexp.buildGroupRE(b,function(b){b="(?:"+dojo.regexp.escapeString(b,".")+")";return b.replace(dojo.number._numberPatternRE,
function(b){var c={signed:!1,separator:a.strict?d:[d,""],fractional:a.fractional,decimal:e,exponent:!1},b=b.split("."),g=a.places;b.length==1&&f!=1&&(b[1]="###");if(b.length==1||g===0)c.fractional=!1;else{g===void 0&&(g=a.pattern?b[1].lastIndexOf("0")+1:Infinity);if(g&&a.fractional==void 0)c.fractional=!0;!a.places&&g<b[1].length&&(g+=","+b[1].length);c.places=g}b=b[0].split(",");if(b.length>1&&(c.groupSize=b.pop().length,b.length>1))c.groupSize2=b.pop().length;return"("+dojo.number._realNumberRegexp(c)+
")"})},!0);g&&(b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(b,c,d,e){b=dojo.regexp.escapeString(a[["symbol","currency","displayName"][d.length-1]]||a.currency||"");c=c?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return!a.strict?(c&&(c+="*"),e&&(e+="*"),"(?:"+c+b+e+")?"):c+b+e}));return{regexp:b.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:d,decimal:e,factor:f}},dojo.number.parse=function(a,b){var c=dojo.number._parseInfo(b),d=RegExp("^"+c.regexp+"$").exec(a);if(!d)return NaN;var e=d[1];if(!d[1]){if(!d[2])return NaN;
e=d[2];c.factor*=-1}e=e.replace(RegExp("["+c.group+"\\s\\xa0]","g"),"").replace(c.decimal,".");return e*c.factor},dojo.number._realNumberRegexp=function(a){a=a||{};if(!("places"in a))a.places=Infinity;if(typeof a.decimal!="string")a.decimal=".";if(!("fractional"in a)||/^0/.test(a.places))a.fractional=[!0,!1];if(!("exponent"in a))a.exponent=[!0,!1];if(!("eSigned"in a))a.eSigned=[!0,!1];var b=dojo.number._integerRegexp(a),c=dojo.regexp.buildGroupRE(a.fractional,function(b){var c="";b&&a.places!==0&&
(c="\\"+a.decimal,a.places==Infinity?c="(?:"+c+"\\d+)?":c+="\\d{"+a.places+"}");return c},!0),d=dojo.regexp.buildGroupRE(a.exponent,function(b){return b?"([eE]"+dojo.number._integerRegexp({signed:a.eSigned})+")":""});b+=c;c&&(b="(?:(?:"+b+")|(?:"+c+"))");return b+d},dojo.number._integerRegexp=function(a){a=a||{};if(!("signed"in a))a.signed=[!0,!1];if("separator"in a){if(!("groupSize"in a))a.groupSize=3}else a.separator="";var b=dojo.regexp.buildGroupRE(a.signed,function(a){return a?"[-+]":""},!0),
c=dojo.regexp.buildGroupRE(a.separator,function(b){if(!b)return"(?:\\d+)";b=dojo.regexp.escapeString(b);b==" "?b="\\s":b=="\u00a0"&&(b="\\s\\xa0");var c=a.groupSize,f=a.groupSize2;return f?(b="(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+b+"]\\d{"+f+"})*["+b+"]\\d{"+c+"})",c-f>0?"(?:"+b+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":b):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+b+"]\\d{"+c+"})*)"},!0);return b+c};
dojo._hasResource["dijit.form.HorizontalSlider"]||(dojo._hasResource["dijit.form.HorizontalSlider"]=!0,dojo.provide("dijit.form.HorizontalSlider"),dojo.declare("dijit.form.HorizontalSlider",[dijit.form._FormValueWidget,dijit._Container],{templateString:dojo.cache("dijit.form","templates/HorizontalSlider.html",'<table class="dijit dijitReset dijitSlider dijitSliderH" cellspacing="0" cellpadding="0" border="0" rules="none" dojoAttachEvent="onkeypress:_onKeyPress,onkeyup:_onKeyUp"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td dojoAttachPoint="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderDecrementIconH" style="display:none" dojoAttachPoint="decrementButton"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent="onmousedown:_onClkDecBumper"></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" ${!nameAttrSetting}\n\t\t\t/><div class="dijitReset dijitSliderBarContainerH" role="presentation" dojoAttachPoint="sliderBarContainer"\n\t\t\t\t><div role="presentation" dojoAttachPoint="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent="onmousedown:_onBarClick"\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableH"\n\t\t\t\t\t\t><div dojoAttachPoint="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachEvent="onmousedown:_onHandleClick" role="slider" valuemin="${minimum}" valuemax="${maximum}"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent="onmousedown:_onBarClick"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent="onmousedown:_onClkIncBumper"></div\n\t\t></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderIncrementIconH" style="display:none" dojoAttachPoint="incrementButton"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td dojoAttachPoint="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n></table>\n'),
value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:!0,slideDuration:dijit.defaultDuration,widgetsInTemplate:!0,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{id:""}),baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",
_progressPixelSize:"width",_onKeyUp:function(a){!this.disabled&&!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey&&this._setValueAttr(this.value,!0)},_onKeyPress:function(a){if(!this.disabled&&!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey){switch(a.charOrCode){case dojo.keys.HOME:this._setValueAttr(this.minimum,!1);break;case dojo.keys.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?dojo.keys.RIGHT_ARROW:dojo.keys.LEFT_ARROW:case this._descending===!1?
dojo.keys.DOWN_ARROW:dojo.keys.UP_ARROW:case this._descending===!1?dojo.keys.PAGE_DOWN:dojo.keys.PAGE_UP:this.increment(a);break;case this._descending||this.isLeftToRight()?dojo.keys.LEFT_ARROW:dojo.keys.RIGHT_ARROW:case this._descending===!1?dojo.keys.UP_ARROW:dojo.keys.DOWN_ARROW:case this._descending===!1?dojo.keys.PAGE_UP:dojo.keys.PAGE_DOWN:this.decrement(a);break;default:return}dojo.stopEvent(a)}},_onHandleClick:function(a){!this.disabled&&!this.readOnly&&(dojo.isIE||dijit.focus(this.sliderHandle),
dojo.stopEvent(a))},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&!this.readOnly&&this.clickSelect){dijit.focus(this.sliderHandle);dojo.stopEvent(a);var b=dojo.position(this.sliderBarContainer,!0),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var d=this.discreteValues;
if(d<=1||d==Infinity)d=b;d--;this._setValueAttr((this.maximum-this.minimum)*Math.round((a<0?0:b<a?b:a)/(b/d))/d+this.minimum,c)}},_setValueAttr:function(a,b){this._set("value",a);this.valueNode.value=a;dijit.setWaiState(this.focusNode,"valuenow",a);this.inherited(arguments);var c=(a-this.minimum)/(this.maximum-this.minimum),d=this._descending===!1?this.remainingBar:this.progressBar,e=this._descending===!1?this.progressBar:this.remainingBar;this._inProgressAnim&&this._inProgressAnim.status!="stopped"&&
this._inProgressAnim.stop(!0);if(b&&this.slideDuration>0&&d.style[this._progressPixelSize]){var f=this,g={},h=parseFloat(d.style[this._progressPixelSize]),j=this.slideDuration*(c-h/100);if(j!=0)j<0&&(j=0-j),g[this._progressPixelSize]={start:h,end:c*100,units:"%"},this._inProgressAnim=dojo.animateProperty({node:d,duration:j,onAnimate:function(a){e.style[f._progressPixelSize]=100-parseFloat(a[f._progressPixelSize])+"%"},onEnd:function(){delete f._inProgressAnim},properties:g}),this._inProgressAnim.play()}else d.style[this._progressPixelSize]=
c*100+"%",e.style[this._progressPixelSize]=(1-c)*100+"%"},_bumpValue:function(a,b){if(!this.disabled&&!this.readOnly){var c=dojo.getComputedStyle(this.sliderBarContainer),d=dojo._getContentBox(this.sliderBarContainer,c),c=this.discreteValues;if(c<=1||c==Infinity)c=d[this._pixelCount];c--;d=(this.value-this.minimum)*c/(this.maximum-this.minimum)+a;d<0&&(d=0);d>c&&(d=c);d=d*(this.maximum-this.minimum)/c+this.minimum;this._setValueAttr(d,b)}},_onClkBumper:function(a){!this.disabled&&!this.readOnly&&
this.clickSelect&&this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(this._descending===!1?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(this._descending===!1?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.charOrCode==dojo.keys.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.charOrCode==dojo.keys.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){dojo.stopEvent(a);var b=!dojo.isMozilla;this._bumpValue(a[b?
"wheelDelta":"detail"]*(b?1:-1)<0?-1:1,!0)},startup:function(){this._started||(dojo.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},_typematicCallback:function(a,b,c){if(a==-1)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](c)},buildRendering:function(){this.inherited(arguments);if(this.showButtons)this.incrementButton.style.display=
"",this.decrementButton.style.display="";var a=dojo.query('label[for="'+this.id+'"]');if(a.length)a[0].id=this.id+"_label",dijit.setWaiState(this.focusNode,"labelledby",a[0].id);dijit.setWaiState(this.focusNode,"valuemin",this.minimum);dijit.setWaiState(this.focusNode,"valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&(this._connects.push(dijit.typematic.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500)),this._connects.push(dijit.typematic.addMouseListener(this.incrementButton,
this,"_typematicCallback",25,500)));this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var a=dojo.declare(dijit.form._SliderMover,{widget:this});this._movable=new dojo.dnd.Moveable(this.sliderHandle,{mover:a});this._layoutHackIE7()},destroy:function(){this._movable.destroy();this._inProgressAnim&&this._inProgressAnim.status!="stopped"&&this._inProgressAnim.stop(!0);this._supportingWidgets=dijit.findWidgets(this.domNode);this.inherited(arguments)}}),dojo.declare("dijit.form._SliderMover",
dojo.dnd.Mover,{onMouseMove:function(a){var b=this.widget,c=b._abspos;if(!c)c=b._abspos=dojo.position(b.sliderBarContainer,!0),b._setPixelValue_=dojo.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed();a=(a.touches?a.touches[0]:a)[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-a:a,c[b._pixelCount],!1)},destroy:function(a){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,!0)}}));
dojo._hasResource["dijit.form.SimpleTextarea"]||(dojo._hasResource["dijit.form.SimpleTextarea"]=!0,dojo.provide("dijit.form.SimpleTextarea"),dojo.declare("dijit.form.SimpleTextarea",dijit.form.TextBox,{baseClass:"dijitTextBox dijitTextArea",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{rows:"textbox",cols:"textbox"}),rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&
this.srcNodeRef)this.value=this.srcNodeRef.value;this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);dojo.isIE&&this.cols&&dojo.addClass(this.textbox,"dijitTextAreaCols")},filter:function(a){a&&(a=a.replace(/\r/g,""));return this.inherited(arguments)},_previousValue:"",_onInput:function(a){if(this.maxLength){var b=parseInt(this.maxLength),c=this.textbox.value.replace(/\r/g,""),b=c.length-b;if(b>0){a&&dojo.stopEvent(a);var d=this.textbox;if(d.selectionStart){var e=d.selectionStart,
f=0;if(dojo.isOpera)f=(this.textbox.value.substring(0,e).match(/\r/g)||[]).length;this.textbox.value=c.substring(0,e-b-f)+c.substring(e-f);d.setSelectionRange(e-b,e-b)}else if(dojo.doc.selection)d.focus(),c=dojo.doc.selection.createRange(),c.moveStart("character",-b),c.text="",c.select()}this._previousValue=this.textbox.value}this.inherited(arguments)}}));
dojo._hasResource["dijit.form.Textarea"]||(dojo._hasResource["dijit.form.Textarea"]=!0,dojo.provide("dijit.form.Textarea"),dojo.declare("dijit.form.Textarea",dijit.form.SimpleTextarea,{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",_previousNewlines:0,_strictMode:dojo.doc.compatMode!="BackCompat",_getHeight:function(a){var b=a.scrollHeight;b+=dojo.isIE?a.offsetHeight-a.clientHeight-(dojo.isIE<8&&this._strictMode?dojo._getPadBorderExtents(a).h:0):dojo.isMoz?a.offsetHeight-a.clientHeight:
dojo.isWebKit?dojo._getBorderExtents(a).h:dojo._getPadBorderExtents(a).h;return b},_estimateHeight:function(a){a.style.maxHeight="";a.style.height="auto";a.rows=(a.value.match(/\n/g)||[]).length+1},_needsHelpShrinking:dojo.isMoz||dojo.isWebKit,_onInput:function(){this.inherited(arguments);if(!this._busyResizing){this._busyResizing=!0;var a=this.textbox;if(a.scrollHeight&&a.offsetHeight&&a.clientHeight){var b=this._getHeight(a)+"px";if(a.style.height!=b)a.style.maxHeight=a.style.height=b;if(this._needsHelpShrinking)this._setTimeoutHandle&&
clearTimeout(this._setTimeoutHandle),this._setTimeoutHandle=setTimeout(dojo.hitch(this,"_shrink"),0)}else this._estimateHeight(a);this._busyResizing=!1}},_busyResizing:!1,_shrink:function(){this._setTimeoutHandle=null;if(this._needsHelpShrinking&&!this._busyResizing){this._busyResizing=!0;var a=this.textbox,b=!1;if(a.value=="")a.value=" ",b=!0;var c=a.scrollHeight;if(c){var d=a.style.paddingBottom,e=dojo._getPadExtents(a),e=e.h-e.t;a.style.paddingBottom=e+1+"px";var f=this._getHeight(a)-1+"px";if(a.style.maxHeight!=
f)a.style.paddingBottom=e+c+"px",a.scrollTop=0,a.style.maxHeight=this._getHeight(a)-c+"px";a.style.paddingBottom=d}else this._estimateHeight(a);if(b)a.value="";this._busyResizing=!1}},resize:function(){this._onInput()},_setValueAttr:function(){this.inherited(arguments);this.resize()},buildRendering:function(){this.inherited(arguments);dojo.style(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})},
postCreate:function(){this.inherited(arguments);this.connect(this.textbox,"onscroll","_onInput");this.connect(this.textbox,"onresize","_onInput");this.connect(this.textbox,"onfocus","_onInput");this._setTimeoutHandle=setTimeout(dojo.hitch(this,"resize"),0)},uninitialize:function(){this._setTimeoutHandle&&clearTimeout(this._setTimeoutHandle);this.inherited(arguments)}}));
dojo._hasResource["dijit.layout.BorderContainer"]||(dojo._hasResource["dijit.layout.BorderContainer"]=!0,dojo.provide("dijit.layout.BorderContainer"),dojo.declare("dijit.layout.BorderContainer",dijit.layout._LayoutWidget,{design:"headline",gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:"dijit.layout._Splitter",postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},startup:function(){this._started||(dojo.forEach(this.getChildren(),
this._setupChild,this),this.inherited(arguments))},_setupChild:function(a){var b=a.region;if(b){this.inherited(arguments);dojo.addClass(a.domNode,this.baseClass+"Pane");var c=this.isLeftToRight();b=="leading"&&(b=c?"left":"right");b=="trailing"&&(b=c?"right":"left");if(b!="center"&&(a.splitter||this.gutters)&&!a._splitterWidget)c=new (dojo.getObject(a.splitter?this._splitterClass:"dijit.layout._Gutter"))({id:a.id+"_splitter",container:this,child:a,region:b,live:this.liveSplitters}),c.isSplitter=!0,
a._splitterWidget=c,dojo.place(c.domNode,a.domNode,"after"),c.startup();a.region=b}},layout:function(){this._layoutChildren()},addChild:function(a,b){this.inherited(arguments);this._started&&this.layout()},removeChild:function(a){var b=a.region,c=a._splitterWidget;c&&(c.destroy(),delete a._splitterWidget);this.inherited(arguments);this._started&&this._layoutChildren();dojo.removeClass(a.domNode,this.baseClass+"Pane");dojo.style(a.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});
dojo.style(a.domNode,b=="top"||b=="bottom"?"width":"height","auto")},getChildren:function(){return dojo.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return dojo.filter(this.getChildren(),function(b){return b.region==a})[0]._splitterWidget},resize:function(a,b){if(!this.cs||!this.pe){var c=this.domNode;this.cs=dojo.getComputedStyle(c);this.pe=dojo._getPadExtents(c,this.cs);this.pe.r=dojo._toPixelValue(c,this.cs.paddingRight);this.pe.b=dojo._toPixelValue(c,
this.cs.paddingBottom);dojo.style(c,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=dojo.map(this.getChildren(),function(a,b){return{pane:a,weight:[a.region=="center"?Infinity:0,a.layoutPriority,(this.design=="sidebar"?1:-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);c.sort(function(a,b){for(var c=a.weight,d=b.weight,j=0;j<c.length;j++)if(c[j]!=d[j])return c[j]-d[j];return 0});var d=[];dojo.forEach(c,function(a){a=a.pane;d.push(a);
a._splitterWidget&&d.push(a._splitterWidget)});dijit.layout.layoutChildren(this.domNode,{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},d,a,b)}},destroyRecursive:function(){dojo.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}}),dojo.extend(dijit._Widget,{region:"",layoutPriority:0,splitter:!1,minSize:0,maxSize:Infinity}),dojo.declare("dijit.layout._Splitter",[dijit._Widget,dijit._Templated],
{live:!0,templateString:'<div class="dijitSplitter" dojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,
"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=dojo.cookie(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=this.horizontal?"h":"w",b=dojo.marginBox(this.child.domNode)[a],c=dojo.filter(this.container.getChildren(),function(a){return a.region=="center"})[0],a=dojo.marginBox(c.domNode)[a];return Math.min(this.child.maxSize,b+a)},_startDrag:function(a){if(!this.cover)this.cover=dojo.doc.createElement("div"),
dojo.addClass(this.cover,"dijitSplitterCover"),dojo.place(this.cover,this.child.domNode,"after");dojo.addClass(this.cover,"dijitSplitterCoverActive");this.fake&&dojo.destroy(this.fake);if(!(this._resize=this.live))(this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),dojo.addClass(this.domNode,"dijitSplitterShadow"),dojo.place(this.fake,this.domNode,"after");dojo.addClass(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");this.fake&&dojo.removeClass(this.fake,
"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var b=this._factor,c=this.horizontal,d=c?"pageY":"pageX",e=a[d],f=this.domNode.style,g=dojo.marginBox(this.child.domNode)[c?"h":"w"],h=this._computeMaxSize(),j=this.child.minSize||20,c=this.region,k=c=="top"||c=="bottom"?"top":"left",l=parseInt(f[k],10),p=this._resize,n=dojo.hitch(this.container,"_layoutChildren",this.child.id),c=dojo.doc;this._handlers=(this._handlers||[]).concat([dojo.connect(c,"onmousemove",this._drag=function(a,
c){var q=a[d]-e,r=b*q+g,s=Math.max(Math.min(r,h),j);(p||c)&&n(s);f[k]=q+l+b*(s-r)+"px"}),dojo.connect(c,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent),dojo.connect(c,"onmouseup",this,"_stopDrag")]);dojo.stopEvent(a)},_onMouse:function(a){a=a.type=="mouseover"||a.type=="mouseenter";dojo.toggleClass(this.domNode,"dijitSplitterHover",a);dojo.toggleClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&dojo.removeClass(this.cover,
"dijitSplitterCoverActive"),this.fake&&dojo.destroy(this.fake),dojo.removeClass(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&dojo.cookie(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){dojo.forEach(this._handlers,dojo.disconnect);delete this._handlers},_onKeyPress:function(a){this._resize=
!0;var b=this.horizontal,c=1,d=dojo.keys;switch(a.charOrCode){case b?d.UP_ARROW:d.LEFT_ARROW:c*=-1;case b?d.DOWN_ARROW:d.RIGHT_ARROW:break;default:return}b=dojo._getMarginSize(this.child.domNode)[b?"h":"w"]+this._factor*c;this.container._layoutChildren(this.child.id,Math.max(Math.min(b,this._computeMaxSize()),this.child.minSize));dojo.stopEvent(a)},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),dojo.declare("dijit.layout._Gutter",
[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitGutter" role="presentation"></div>',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}}));
dojo._hasResource["dijit.layout.StackController"]||(dojo._hasResource["dijit.layout.StackController"]=!0,dojo.provide("dijit.layout.StackController"),dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span role='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",constructor:function(){this.pane2button={};this.pane2connects={};this.pane2watches={}},buildRendering:function(){this.inherited(arguments);
dijit.setWaiRole(this.domNode,"tablist")},postCreate:function(){this.inherited(arguments);this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress")},onStartup:function(a){dojo.forEach(a.children,this.onAddChild,this);if(a.selected)this.onSelectChild(a.selected)},
destroy:function(){for(var a in this.pane2button)this.onRemoveChild(dijit.byId(a));this.inherited(arguments)},onAddChild:function(a,b){var c=new (dojo.getObject(this.buttonWidget))({id:this.id+"_"+a.id,label:a.title,dir:a.dir,lang:a.lang,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,title:a.tooltip});dijit.setWaiState(c.focusNode,"selected","false");var d=["label","showLabel","iconClass","closeButton","title"];this.pane2watches[a.id]=dojo.map(["title","showTitle","iconClass",
"closable","tooltip"],function(b,f){return a.watch(b,function(a,b,e){c.set(d[f],e)})});this.pane2connects[a.id]=[this.connect(c,"onClick",dojo.hitch(this,"onButtonClick",a)),this.connect(c,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",a))];this.addChild(c,b);this.pane2button[a.id]=c;a.controlButton=c;if(!this._currentChild)c.focusNode.setAttribute("tabIndex","0"),dijit.setWaiState(c.focusNode,"selected","true"),this._currentChild=a;!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList&&
this._rectifyRtlTabList()},onRemoveChild:function(a){if(this._currentChild===a)this._currentChild=null;dojo.forEach(this.pane2connects[a.id],dojo.hitch(this,"disconnect"));delete this.pane2connects[a.id];dojo.forEach(this.pane2watches[a.id],function(a){a.unwatch()});delete this.pane2watches[a.id];var b=this.pane2button[a.id];b&&(this.removeChild(b),delete this.pane2button[a.id],b.destroy());delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var b=this.pane2button[this._currentChild.id];
b.set("checked",!1);dijit.setWaiState(b.focusNode,"selected","false");b.focusNode.setAttribute("tabIndex","-1")}b=this.pane2button[a.id];b.set("checked",!0);dijit.setWaiState(b.focusNode,"selected","true");this._currentChild=a;b.focusNode.setAttribute("tabIndex","0");a=dijit.byId(this.containerId);dijit.setWaiState(a.containerNode,"labelledby",b.id)}},onButtonClick:function(a){dijit.byId(this.containerId).selectChild(a)},onCloseButtonClick:function(a){dijit.byId(this.containerId).closeChild(a);this._currentChild&&
(a=this.pane2button[this._currentChild.id])&&dijit.focus(a.focusNode||a.domNode)},adjacent:function(a){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition)))a=!a;var b=this.getChildren(),c=dojo.indexOf(b,this.pane2button[this._currentChild.id]);return b[(c+(a?1:b.length-1))%b.length]},onkeypress:function(a){if(!this.disabled&&!a.altKey){var b=null;if(a.ctrlKey||!a._djpage){var c=dojo.keys;switch(a.charOrCode){case c.LEFT_ARROW:case c.UP_ARROW:a._djpage||(b=!1);break;case c.PAGE_UP:a.ctrlKey&&
(b=!1);break;case c.RIGHT_ARROW:case c.DOWN_ARROW:a._djpage||(b=!0);break;case c.PAGE_DOWN:a.ctrlKey&&(b=!0);break;case c.HOME:case c.END:var d=this.getChildren();if(d&&d.length)d[a.charOrCode==c.HOME?0:d.length-1].onClick();dojo.stopEvent(a);break;case c.DELETE:if(this._currentChild.closable)this.onCloseButtonClick(this._currentChild);dojo.stopEvent(a);break;default:if(a.ctrlKey)if(a.charOrCode===c.TAB)this.adjacent(!a.shiftKey).onClick(),dojo.stopEvent(a);else if(a.charOrCode=="w"){if(this._currentChild.closable)this.onCloseButtonClick(this._currentChild);
dojo.stopEvent(a)}}b!==null&&(this.adjacent(b).onClick(),dojo.stopEvent(a))}}},onContainerKeyPress:function(a){a.e._djpage=a.page;this.onkeypress(a.e)}}),dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",buildRendering:function(a){this.inherited(arguments);dijit.setWaiRole(this.focusNode||this.domNode,"tab")},onClick:function(){dijit.focus(this.focusNode)},onClickCloseButton:function(a){a.stopPropagation()}}));
dojo._hasResource["dijit.layout.StackContainer"]||(dojo._hasResource["dijit.layout.StackContainer"]=!0,dojo.provide("dijit.layout.StackContainer"),dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel")},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeypress",
this._onKeyPress)},startup:function(){if(!this._started){var a=this.getChildren();dojo.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild")):dojo.some(a,function(a){if(a.selected)this.selectedChildWidget=a;return a.selected},this);var b=this.selectedChildWidget;if(!b&&a[0])b=this.selectedChildWidget=a[0],b.selected=!0;dojo.publish(this.id+"-startup",[{children:a,selected:b}]);this.inherited(arguments)}},resize:function(){var a=this.selectedChildWidget;
if(a&&!this._hasBeenShown)this._hasBeenShown=!0,this._showChild(a);this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);dojo.replaceClass(a.domNode,"dijitHidden","dijitVisible");a.domNode.title=""},addChild:function(a,b){this.inherited(arguments);this._started&&(dojo.publish(this.id+"-addChild",[a,b]),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(a){this.inherited(arguments);this._started&&dojo.publish(this.id+"-removeChild",[a]);if(!this._beingDestroyed){if(this.selectedChildWidget===
a&&(this.selectedChildWidget=void 0,this._started)){var b=this.getChildren();b.length&&this.selectChild(b[0])}this._started&&this.layout()}},selectChild:function(a,b){a=dijit.byId(a);if(this.selectedChildWidget!=a){var c=this._transition(a,this.selectedChildWidget,b);this._set("selectedChildWidget",a);dojo.publish(this.id+"-selectChild",[a]);this.persist&&dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id)}return c},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);
a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),c=dojo.indexOf(b,this.selectedChildWidget);c+=a?1:b.length-1;return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyPress:function(a){dojo.publish(this.id+"-containerKeyPress",[{e:a,page:this}])},layout:function(){this.doLayout&&this.selectedChildWidget&&
this.selectedChildWidget.resize&&this.selectedChildWidget.resize(this._containerContentBox||this._contentBox)},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);dojo.replaceClass(a.domNode,"dijitVisible","dijitHidden");return a._onShow()||!0},_hideChild:function(a){a._set("selected",!1);dojo.replaceClass(a.domNode,"dijitHidden","dijitVisible");a.onHide()},closeChild:function(a){a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},
destroyDescendants:function(a){dojo.forEach(this.getChildren(),function(b){this.removeChild(b);b.destroyRecursive(a)},this)}}),dojo.extend(dijit._Widget,{selected:!1,closable:!1,iconClass:"",showTitle:!0}));
dojo._hasResource["dijit.layout._TabContainerBase"]||(dojo._hasResource["dijit.layout._TabContainerBase"]=!0,dojo.provide("dijit.layout._TabContainerBase"),dojo.declare("dijit.layout._TabContainerBase",[dijit.layout.StackContainer,dijit._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:dojo.cache("dijit.layout","templates/TabContainer.html",'<div class="dijitTabContainer">\n\t<div class="dijitTabListWrapper" dojoAttachPoint="tablistNode"></div>\n\t<div dojoAttachPoint="tablistSpacer" class="dijitTabSpacer ${baseClass}-spacer"></div>\n\t<div class="dijitTabPaneWrapper ${baseClass}-container" dojoAttachPoint="containerNode"></div>\n</div>\n'),
postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&dojo.style(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||dojo.addClass(this.domNode,"dijitTabContainerNoLayout");this.nested?(dojo.addClass(this.domNode,"dijitTabContainerNested"),dojo.addClass(this.tablist.containerNode,
"dijitTabContainerTabListNested"),dojo.addClass(this.tablistSpacer,"dijitTabContainerSpacerNested"),dojo.addClass(this.containerNode,"dijitTabPaneWrapperNested")):dojo.addClass(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(a){dojo.addClass(a.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&typeof this._contentBox.l!="undefined"){var a=
this.selectedChildWidget;if(this.doLayout){var b=this.tabPosition.replace(/-h/,"");this.tablist.layoutAlign=b;b=[this.tablist,{domNode:this.tablistSpacer,layoutAlign:b},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,b);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,b[2]);a&&a.resize&&a.resize(this._containerContentBox)}else{if(this.tablist.resize){b=this.tablist.domNode.style;b.width="0";var c=dojo.contentBox(this.domNode).w;
b.width="";this.tablist.resize({w:c})}a&&a.resize&&a.resize()}}},destroy:function(){this.tablist&&this.tablist.destroy();this.inherited(arguments)}}));
dojo._hasResource["dijit.layout.TabController"]||(dojo._hasResource["dijit.layout.TabController"]=!0,dojo.provide("dijit.layout.TabController"),dojo.declare("dijit.layout.TabController",dijit.layout.StackController,{templateString:"<div role='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(!(0>=this.tabPosition.indexOf("-h"))&&this.pane2button){var a=0,b;for(b in this.pane2button)a=Math.max(a,this.pane2button[b].innerDiv.scrollWidth);
for(b in this.pane2button)this.pane2button[b].innerDiv.style.width=a+"px"}}}),dojo.declare("dijit.layout._TabButton",dijit.layout._StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:dojo.cache("dijit.layout","templates/_TabButton.html","<div role=\"presentation\" dojoAttachPoint=\"titleNode\" dojoAttachEvent='onclick:onClick'>\n    <div role=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\n        <div role=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent'>\n        \t<div role=\"presentation\" dojoAttachPoint='focusNode'>\n\t\t        <img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitTabButtonIcon\" dojoAttachPoint='iconNode' />\n\t\t        <span dojoAttachPoint='containerNode' class='tabLabel'></span>\n\t\t        <span class=\"dijitInline dijitTabCloseButton dijitTabCloseIcon\" dojoAttachPoint='closeNode'\n\t\t        \t\tdojoAttachEvent='onclick: onClickCloseButton' role=\"presentation\">\n\t\t            <span dojoAttachPoint='closeText' class='dijitTabCloseText'>[x]</span\n\t\t        ></span>\n\t\t\t</div>\n        </div>\n    </div>\n</div>\n"),
scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var a=this.domNode;setTimeout(function(){a.className=a.className},1)},_setCloseButtonAttr:function(a){this._set("closeButton",a);dojo.toggleClass(this.innerDiv,"dijitClosable",a);this.closeNode.style.display=a?"":"none";a?(a=dojo.i18n.getLocalization("dijit","common"),this.closeNode&&dojo.attr(this.closeNode,"title",a.itemClose),a=dojo.i18n.getLocalization("dijit",
"common"),this._closeMenu=new dijit.Menu({id:this.id+"_Menu",dir:this.dir,lang:this.lang,targetNodeIds:[this.domNode]}),this._closeMenu.addChild(new dijit.MenuItem({label:a.itemClose,dir:this.dir,lang:this.lang,onClick:dojo.hitch(this,"onClickCloseButton")}))):this._closeMenu&&(this._closeMenu.destroyRecursive(),delete this._closeMenu)},_setLabelAttr:function(a){this.inherited(arguments);if(this.showLabel==!1&&!this.params.title)this.iconNode.alt=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||
"")},destroy:function(){this._closeMenu&&(this._closeMenu.destroyRecursive(),delete this._closeMenu);this.inherited(arguments)}}));
dojo._hasResource["dijit.layout.ScrollingTabController"]||(dojo._hasResource["dijit.layout.ScrollingTabController"]=!0,dojo.provide("dijit.layout.ScrollingTabController"),dojo.declare("dijit.layout.ScrollingTabController",dijit.layout.TabController,{templateString:dojo.cache("dijit.layout","templates/ScrollingTabController.html",'<div class="dijitTabListContainer-${tabPosition}" style="visibility:hidden">\n\t<div dojoType="dijit.layout._ScrollingTabControllerMenuButton"\n\t\t\tclass="tabStripButton-${tabPosition}"\n\t\t\tid="${id}_menuBtn" containerId="${containerId}" iconClass="dijitTabStripMenuIcon"\n\t\t\tdropDownPosition="below-alt, above-alt"\n\t\t\tdojoAttachPoint="_menuBtn" showLabel="false">&#9660;</div>\n\t<div dojoType="dijit.layout._ScrollingTabControllerButton"\n\t\t\tclass="tabStripButton-${tabPosition}"\n\t\t\tid="${id}_leftBtn" iconClass="dijitTabStripSlideLeftIcon"\n\t\t\tdojoAttachPoint="_leftBtn" dojoAttachEvent="onClick: doSlideLeft" showLabel="false">&#9664;</div>\n\t<div dojoType="dijit.layout._ScrollingTabControllerButton"\n\t\t\tclass="tabStripButton-${tabPosition}"\n\t\t\tid="${id}_rightBtn" iconClass="dijitTabStripSlideRightIcon"\n\t\t\tdojoAttachPoint="_rightBtn" dojoAttachEvent="onClick: doSlideRight" showLabel="false">&#9654;</div>\n\t<div class=\'dijitTabListWrapper\' dojoAttachPoint=\'tablistWrapper\'>\n\t\t<div role=\'tablist\' dojoAttachEvent=\'onkeypress:onkeypress\'\n\t\t\t\tdojoAttachPoint=\'containerNode\' class=\'nowrapTabStrip\'></div>\n\t</div>\n</div>\n'),useMenu:!0,
useSlider:!0,tabStripClass:"",widgetsInTemplate:!0,_minScroll:5,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{"class":"containerNode"}),buildRendering:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();if(!this.tabStripClass)this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None",dojo.addClass(a,"tabStrip-disabled");dojo.addClass(this.tablistWrapper,
this.tabStripClass)},onStartup:function(){this.inherited(arguments);dojo.style(this.domNode,"visibility","visible");this._postStartup=!0},onAddChild:function(a,b){this.inherited(arguments);dojo.forEach(["label","iconClass"],function(b){this.pane2watches[a.id].push(this.pane2button[a.id].watch(b,dojo.hitch(this,function(){this._postStartup&&this._dim&&this.resize(this._dim)})))},this);dojo.style(this.containerNode,"width",dojo.style(this.containerNode,"width")+200+"px")},onRemoveChild:function(a,b){if(this._selectedTab===
this.pane2button[a.id].domNode)this._selectedTab=null;this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=dojo.query("> .tabStripButton",this.domNode).filter(function(a){return this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode)?(this._btnWidth+=dojo._getMarginSize(a).w,!0):(dojo.style(a,"display","none"),!1)},this)},_getTabsWidth:function(){var a=this.getChildren();if(a.length){var b=a[this.isLeftToRight()?0:
a.length-1].domNode,a=a[this.isLeftToRight()?a.length-1:0].domNode;return a.offsetLeft+dojo.style(a,"width")-b.offsetLeft}else return 0},_enableBtn:function(a){var b=this._getTabsWidth(),a=a||dojo.style(this.scrollNode,"width");return b>0&&a<b},resize:function(a){if(this.domNode.offsetWidth!=0){this._dim=a;this.scrollNode.style.height="auto";this._contentBox=dijit.layout.marginBox2contentBox(this.domNode,{h:0,w:a.w});this._contentBox.h=this.scrollNode.offsetHeight;dojo.contentBox(this.domNode,this._contentBox);
this._buttons.style("display",this._enableBtn(this._contentBox.w)?"":"none");this._leftBtn.layoutAlign="left";this._rightBtn.layoutAlign="right";this._menuBtn.layoutAlign=this.isLeftToRight()?"right":"left";dijit.layout.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,layoutAlign:"client"}]);if(this._selectedTab){this._anim&&this._anim.status()=="playing"&&this._anim.stop();var b=this.scrollNode,c=this._convertToScrollLeft(this._getScrollForSelectedTab());
b.scrollLeft=c}this._setButtonClass(this._getScroll());this._postResize=!0;return{h:this._contentBox.h,w:a.w}}},_getScroll:function(){return this.isLeftToRight()||dojo.isIE<8||dojo.isIE&&dojo.isQuirks||dojo.isWebKit?this.scrollNode.scrollLeft:dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width")+(dojo.isIE==8?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(a){if(this.isLeftToRight()||dojo.isIE<8||dojo.isIE&&dojo.isQuirks||dojo.isWebKit)return a;else{var b=dojo.style(this.containerNode,
"width")-dojo.style(this.scrollNode,"width");return(dojo.isIE==8?-1:1)*(a-b)}},onSelectChild:function(a){var b=this.pane2button[a.id];if(b&&a){b=b.domNode;if(this._postResize&&b!=this._selectedTab){this._selectedTab=b;var c=this._getScroll();(c>b.offsetLeft||c+dojo.style(this.scrollNode,"width")<b.offsetLeft+dojo.style(b,"width"))&&this.createSmoothScroll().play()}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=dojo.style(this.scrollNode,"width"),c=dojo.style(this.containerNode,
"width")-b,d=this._getTabsWidth();return a.length&&d>b?{min:this.isLeftToRight()?0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+dojo.style(a[a.length-1].domNode,"width")-b:c}:(a=this.isLeftToRight()?0:c,{min:a,max:a})},_getScrollForSelectedTab:function(){var a=this._selectedTab,b=dojo.style(this.scrollNode,"width"),c=this._getScrollBounds(),a=a.offsetLeft+dojo.style(a,"width")/2-b/2;return a=Math.min(Math.max(a,c.min),c.max)},createSmoothScroll:function(a){if(arguments.length>
0)var b=this._getScrollBounds(),a=Math.min(Math.max(a,b.min),b.max);else a=this._getScrollForSelectedTab();this._anim&&this._anim.status()=="playing"&&this._anim.stop();var c=this,d=this.scrollNode,e=new dojo._Animation({beforeBegin:function(){this.curve&&delete this.curve;var b=d.scrollLeft,g=c._convertToScrollLeft(a);e.curve=new dojo._Line(b,g)},onAnimate:function(a){d.scrollLeft=a}});this._anim=e;this._setButtonClass(a);return e},_getBtnNode:function(a){for(a=a.target;a&&!dojo.hasClass(a,"tabStripButton");)a=
a.parentNode;return a},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!b||!dojo.hasClass(b,"dijitTabDisabled")){var c=dojo.style(this.scrollNode,"width")*0.75*a,c=this._getScroll()+c;this._setButtonClass(c);this.createSmoothScroll(c).play()}},_setButtonClass:function(a){var b=this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min);this._rightBtn.set("disabled",a>=b.max)}}),dojo.declare("dijit.layout._ScrollingTabControllerButtonMixin",
null,{baseClass:"dijitTab tabStripButton",templateString:dojo.cache("dijit.layout","templates/_ScrollingTabControllerButton.html",'<div dojoAttachEvent="onclick:_onButtonClick">\n\t<div role="presentation" class="dijitTabInnerDiv" dojoattachpoint="innerDiv,focusNode">\n\t\t<div role="presentation" class="dijitTabContent dijitButtonContents" dojoattachpoint="tabContent">\n\t\t\t<img role="presentation" alt="" src="${_blankGif}" class="dijitTabStripIcon" dojoAttachPoint="iconNode"/>\n\t\t\t<span dojoAttachPoint="containerNode,titleNode" class="dijitButtonText"></span>\n\t\t</div>\n\t</div>\n</div>\n'),
tabIndex:"",isFocusable:function(){return!1}}),dojo.declare("dijit.layout._ScrollingTabControllerButton",[dijit.form.Button,dijit.layout._ScrollingTabControllerButtonMixin]),dojo.declare("dijit.layout._ScrollingTabControllerMenuButton",[dijit.form.Button,dijit._HasDropDown,dijit.layout._ScrollingTabControllerButtonMixin],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(a){this.dropDown=new dijit.Menu({id:this.containerId+"_menu",dir:this.dir,lang:this.lang});var b=
dijit.byId(this.containerId);dojo.forEach(b.getChildren(),function(a){this.dropDown.addChild(new dijit.MenuItem({id:a.id+"_stcMi",label:a.title,iconClass:a.iconClass,dir:a.dir,lang:a.lang,onClick:function(){b.selectChild(a)}}))},this);a()},closeDropDown:function(a){this.inherited(arguments);this.dropDown&&(this.dropDown.destroyRecursive(),delete this.dropDown)}}));
dojo._hasResource["dijit.layout.TabContainer"]||(dojo._hasResource["dijit.layout.TabContainer"]=!0,dojo.provide("dijit.layout.TabContainer"),dojo.declare("dijit.layout.TabContainer",dijit.layout._TabContainerBase,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(a){var b=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new (dojo.getObject(this.controllerWidget))({id:this.id+"_tablist",dir:this.dir,lang:this.lang,tabPosition:this.tabPosition,doLayout:this.doLayout,
containerId:this.id,"class":b,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},a)},postMixInProperties:function(){this.inherited(arguments);if(!this.controllerWidget)this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"dijit.layout.ScrollingTabController":"dijit.layout.TabController"}}));
dojo._hasResource["dojo.NodeList-traverse"]||(dojo._hasResource["dojo.NodeList-traverse"]=!0,dojo.provide("dojo.NodeList-traverse"),dojo.extend(dojo.NodeList,{_buildArrayFromCallback:function(a){for(var b=[],c=0;c<this.length;c++){var d=a.call(this[c],this[c],b);d&&(b=b.concat(d))}return b},_getUniqueAsNodeList:function(a){for(var b=[],c=0,d;d=a[c];c++)d.nodeType==1&&dojo.indexOf(b,d)==-1&&b.push(d);return this._wrap(b,null,this._NodeListCtor)},_getUniqueNodeListWithParent:function(a,b){var c=this._getUniqueAsNodeList(a),
c=b?dojo._filterQueryResult(c,b):c;return c._stash(this)},_getRelatedUniqueNodes:function(a,b){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(b),a)},children:function(a){return this._getRelatedUniqueNodes(a,function(a){return dojo._toArray(a.childNodes)})},closest:function(a,b){return this._getRelatedUniqueNodes(null,function(c){do if(dojo._filterQueryResult([c],a,b).length)return c;while(c!=b&&(c=c.parentNode)&&c.nodeType==1);return null})},parent:function(a){return this._getRelatedUniqueNodes(a,
function(a){return a.parentNode})},parents:function(a){return this._getRelatedUniqueNodes(a,function(a){for(var c=[];a.parentNode;)a=a.parentNode,c.push(a);return c})},siblings:function(a){return this._getRelatedUniqueNodes(a,function(a){for(var c=[],d=a.parentNode&&a.parentNode.childNodes,e=0;e<d.length;e++)d[e]!=a&&c.push(d[e]);return c})},next:function(a){return this._getRelatedUniqueNodes(a,function(a){for(a=a.nextSibling;a&&a.nodeType!=1;)a=a.nextSibling;return a})},nextAll:function(a){return this._getRelatedUniqueNodes(a,
function(a){for(var c=[];a=a.nextSibling;)a.nodeType==1&&c.push(a);return c})},prev:function(a){return this._getRelatedUniqueNodes(a,function(a){for(a=a.previousSibling;a&&a.nodeType!=1;)a=a.previousSibling;return a})},prevAll:function(a){return this._getRelatedUniqueNodes(a,function(a){for(var c=[];a=a.previousSibling;)a.nodeType==1&&c.push(a);return c})},andSelf:function(){return this.concat(this._parent)},first:function(){return this._wrap(this[0]&&[this[0]]||[],this)},last:function(){return this._wrap(this.length?
[this[this.length-1]]:[],this)},even:function(){return this.filter(function(a,b){return b%2!=0})},odd:function(){return this.filter(function(a,b){return b%2==0})}}));
dojo._hasResource["dojo.data.ItemFileWriteStore"]||(dojo._hasResource["dojo.data.ItemFileWriteStore"]=!0,dojo.provide("dojo.data.ItemFileWriteStore"),dojo.declare("dojo.data.ItemFileWriteStore",dojo.data.ItemFileReadStore,{constructor:function(a){this._features["dojo.data.api.Write"]=!0;this._features["dojo.data.api.Notification"]=!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap.Date.serialize)this._datatypeMap.Date.serialize=function(a){return dojo.date.stamp.toISOString(a,
{zulu:!0})};if(a&&a.referenceIntegrity===!1)this.referenceIntegrity=!1;this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(a){if(!a)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(a,b){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if(typeof a!="object"&&typeof a!="undefined")throw Error("newItem() was passed something other than an object");var c=
null,d=this._getIdentifierAttribute();if(d===Number)c=this._arrayOfAllItems.length;else{c=a[d];if(typeof c==="undefined")throw Error("newItem() was not passed an identity for the new item");if(dojo.isArray(c))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&this._assert(typeof this._itemsByIdentity[c]==="undefined");this._assert(typeof this._pending._newItems[c]==="undefined");this._assert(typeof this._pending._deletedItems[c]==="undefined");var e={};e[this._storeRefPropName]=
this;e[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[c]=e,e[d]=[c]);this._arrayOfAllItems.push(e);d=null;if(b&&b.parent&&b.attribute){var d={item:b.parent,attribute:b.attribute,oldValue:void 0},f=this.getValues(b.parent,b.attribute);if(f&&f.length>0){var g=f.slice(0,f.length);d.oldValue=f.length===1?f[0]:f.slice(0,f.length);g.push(e);this._setValueOrValues(b.parent,b.attribute,g,!1);d.newValue=this.getValues(b.parent,b.attribute)}else this._setValueOrValues(b.parent,
b.attribute,e,!1),d.newValue=e}else e[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(e);this._pending._newItems[c]=e;for(var h in a){if(h===this._storeRefPropName||h===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");c=a[h];dojo.isArray(c)||(c=[c]);e[h]=c;if(this.referenceIntegrity)for(f=0;f<c.length;f++)g=c[f],this.isItem(g)&&this._addReferenceToMap(g,e,h)}this.onNew(e,d);return e},_removeArrayElement:function(a,b){var c=dojo.indexOf(a,b);return c!=-1?
(a.splice(c,1),!0):!1},deleteItem:function(a){this._assert(!this._saveInProgress);this._assertIsItem(a);var b=a[this._itemNumPropName],c=this.getIdentity(a);if(this.referenceIntegrity){var d=this.getAttributes(a);a[this._reverseRefMap]&&(a["backup_"+this._reverseRefMap]=dojo.clone(a[this._reverseRefMap]));dojo.forEach(d,function(b){dojo.forEach(this.getValues(a,b),function(c){this.isItem(c)&&(a["backupRefs_"+this._reverseRefMap]||(a["backupRefs_"+this._reverseRefMap]=[]),a["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(c),
attr:b}),this._removeReferenceFromMap(c,a,b))},this)},this);if(d=a[this._reverseRefMap])for(var e in d){var f=null;if(f=this._itemsByIdentity?this._itemsByIdentity[e]:this._arrayOfAllItems[e])for(var g in d[e]){var h=this.getValues(f,g)||[],j=dojo.filter(h,function(a){return!(this.isItem(a)&&this.getIdentity(a)==c)},this);this._removeReferenceFromMap(a,f,g);j.length<h.length&&this._setValueOrValues(f,g,j,!0)}}}this._arrayOfAllItems[b]=null;a[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[c];
this._pending._deletedItems[c]=a;a[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,a);this.onDelete(a);return!0},setValue:function(a,b,c){return this._setValueOrValues(a,b,c,!0)},setValues:function(a,b,c){return this._setValueOrValues(a,b,c,!0)},unsetAttribute:function(a,b){return this._setValueOrValues(a,b,[],!0)},_setValueOrValues:function(a,b,c,d){this._assert(!this._saveInProgress);this._assertIsItem(a);this._assert(dojo.isString(b));this._assert(typeof c!=="undefined");
var e=this._getIdentifierAttribute();if(b==e)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");var e=this._getValueOrValues(a,b),f=this.getIdentity(a);if(!this._pending._modifiedItems[f]){var g={},h;for(h in a)g[h]=h===this._storeRefPropName||h===this._itemNumPropName||h===this._rootItemPropName?a[h]:h===this._reverseRefMap?dojo.clone(a[h]):a[h].slice(0,a[h].length);this._pending._modifiedItems[f]=g}f=!1;if(dojo.isArray(c)&&c.length===0){if(f=
delete a[b],c=void 0,this.referenceIntegrity&&e){h=e;dojo.isArray(h)||(h=[h]);for(var j=0;j<h.length;j++)g=h[j],this.isItem(g)&&this._removeReferenceFromMap(g,a,b)}}else{f=dojo.isArray(c)?c.slice(0,c.length):[c];if(this.referenceIntegrity)if(e){h=e;dojo.isArray(h)||(h=[h]);var k={};dojo.forEach(h,function(a){this.isItem(a)&&(a=this.getIdentity(a),k[a.toString()]=!0)},this);dojo.forEach(f,function(c){if(this.isItem(c)){var d=this.getIdentity(c);k[d.toString()]?delete k[d.toString()]:this._addReferenceToMap(c,
a,b)}},this);for(j in k)this._removeReferenceFromMap(this._itemsByIdentity?this._itemsByIdentity[j]:this._arrayOfAllItems[j],a,b)}else for(j=0;j<f.length;j++)g=f[j],this.isItem(g)&&this._addReferenceToMap(g,a,b);a[b]=f;f=!0}if(d)this.onSet(a,b,e,c);return f},_addReferenceToMap:function(a,b,c){var b=this.getIdentity(b),d=a[this._reverseRefMap];d||(d=a[this._reverseRefMap]={});(a=d[b])||(a=d[b]={});a[c]=!0},_removeReferenceFromMap:function(a,b,c){var b=this.getIdentity(b),d=a[this._reverseRefMap],e;
if(d){for(e in d)e==b&&(delete d[e][c],this._isEmpty(d[e])&&delete d[e]);this._isEmpty(d)&&delete a[this._reverseRefMap]}},_dumpReferenceMap:function(){var a;for(a=0;a<this._arrayOfAllItems.length;a++){var b=this._arrayOfAllItems[a];b&&b[this._reverseRefMap]&&console.log("Item: ["+this.getIdentity(b)+"] is referenced by: "+dojo.toJson(b[this._reverseRefMap]))}},_getValueOrValues:function(a,b){var c=void 0;this.hasAttribute(a,b)&&(c=this.getValues(a,b),c=c.length==1?c[0]:c);return c},_flatten:function(a){if(this.isItem(a))return{_reference:this.getIdentity(a)};
else{if(typeof a==="object")for(var b in this._datatypeMap){var c=this._datatypeMap[b];if(dojo.isObject(c)&&!dojo.isFunction(c)){if(a instanceof c.type){if(!c.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+b+"]");return{_type:b,_value:c.serialize(a)}}}else if(a instanceof c)return{_type:b,_value:a.toString()}}return a}},_getNewFileContentString:function(){var a={},b=this._getIdentifierAttribute();if(b!==Number)a.identifier=b;if(this._labelAttr)a.label=this._labelAttr;
a.items=[];for(b=0;b<this._arrayOfAllItems.length;++b){var c=this._arrayOfAllItems[b];if(c!==null){var d={},e;for(e in c)if(e!==this._storeRefPropName&&e!==this._itemNumPropName&&e!==this._reverseRefMap&&e!==this._rootItemPropName){var f=e,g=this.getValues(c,f);if(g.length==1)d[f]=this._flatten(g[0]);else for(var h=[],j=0;j<g.length;++j)h.push(this._flatten(g[j])),d[f]=h}a.items.push(d)}}return dojo.toJson(a,!0)},_isEmpty:function(a){var b=!0;if(dojo.isObject(a))for(var c in a){b=!1;break}else dojo.isArray(a)&&
a.length>0&&(b=!1);return b},save:function(a){this._assert(!this._saveInProgress);this._saveInProgress=!0;var b=this,c=function(){b._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};b._saveInProgress=!1;a&&a.onComplete&&a.onComplete.call(a.scope||dojo.global)},d=function(c){b._saveInProgress=!1;a&&a.onError&&a.onError.call(a.scope||dojo.global,c)};if(this._saveEverything){var e=this._getNewFileContentString();this._saveEverything(c,d,e)}this._saveCustom&&this._saveCustom(c,d);!this._saveEverything&&
!this._saveCustom&&c()},revert:function(){this._assert(!this._saveInProgress);for(var a in this._pending._modifiedItems){var b=this._pending._modifiedItems[a],c=null,c=this._itemsByIdentity?this._itemsByIdentity[a]:this._arrayOfAllItems[a];b[this._storeRefPropName]=this;for(key in c)delete c[key];dojo.mixin(c,b)}var d;for(a in this._pending._deletedItems)d=this._pending._deletedItems[a],d[this._storeRefPropName]=this,b=d[this._itemNumPropName],d["backup_"+this._reverseRefMap]&&(d[this._reverseRefMap]=
d["backup_"+this._reverseRefMap],delete d["backup_"+this._reverseRefMap]),this._arrayOfAllItems[b]=d,this._itemsByIdentity&&(this._itemsByIdentity[a]=d),d[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(d);for(a in this._pending._deletedItems)d=this._pending._deletedItems[a],d["backupRefs_"+this._reverseRefMap]&&(dojo.forEach(d["backupRefs_"+this._reverseRefMap],function(a){this._addReferenceToMap(this._itemsByIdentity?this._itemsByIdentity[a.id]:this._arrayOfAllItems[a.id],d,a.attr)},this),
delete d["backupRefs_"+this._reverseRefMap]);for(a in this._pending._newItems)b=this._pending._newItems[a],b[this._storeRefPropName]=null,this._arrayOfAllItems[b[this._itemNumPropName]]=null,b[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,b),this._itemsByIdentity&&delete this._itemsByIdentity[a];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(a){return a?(a=this.getIdentity(a),(new Boolean(this._pending._newItems[a]||this._pending._modifiedItems[a]||
this._pending._deletedItems[a])).valueOf()):!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)?!0:!1},onSet:function(){},onNew:function(){},onDelete:function(){},close:function(a){if(this.clearOnClose)if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");else this.inherited(arguments)}}));
dojo._hasResource["dojo.dnd.Selector"]||(dojo._hasResource["dojo.dnd.Selector"]=!0,dojo.provide("dojo.dnd.Selector"),dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(a,b){b||(b={});this.singular=b.singular;this.autoSync=b.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"))},singular:!1,getSelectedNodes:function(){var a=new dojo.NodeList,
b=dojo.dnd._empty,c;for(c in this.selection)c in b||a.push(dojo.byId(c));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(dojo.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=dojo.dnd._empty,b;for(b in this.selection)if(!(b in a)){var c=dojo.byId(b);this.delItem(b);dojo.destroy(c)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,
b){var b=b||dojo.global,c=this.selection,d=dojo.dnd._empty,e;for(e in c)e in d||a.call(b,this.getItem(e),e,this)},sync:function(){dojo.dnd.Selector.superclass.sync.call(this);if(this.anchor&&!this.getItem(this.anchor.id))this.anchor=null;var a=[],b=dojo.dnd._empty,c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);dojo.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,d){var e=this._normalizedCreator;this._normalizedCreator=function(b,c){var d=
e.call(this,b,c);a?(this.anchor?this.anchor!=d.node&&(this._removeItemClass(d.node,"Anchor"),this._addItemClass(d.node,"Selected")):(this.anchor=d.node,this._removeItemClass(d.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[d.node.id]=1):(this._removeItemClass(d.node,"Selected"),this._removeItemClass(d.node,"Anchor"));return d};dojo.dnd.Selector.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=e;return this},destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);
this.selection=this.anchor=null},markupFactory:function(a,b){a._skipStartup=!0;return new dojo.dnd.Selector(b,a)},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!dojo.isCopyKey(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0,a.button===dojo.mouseButtons.LEFT&&dojo.stopEvent(a);else{if(!this.singular&&a.shiftKey){dojo.isCopyKey(a)||this._removeSelection();var b=this.getAllNodes();if(b.length){if(!this.anchor)this.anchor=b[0],this._addItemClass(this.anchor,
"Anchor");this.selection[this.anchor.id]=1;if(this.anchor!=this.current){for(var c=0;c<b.length;++c){var d=b[c];if(d==this.anchor||d==this.current)break}for(++c;c<b.length;++c){d=b[c];if(d==this.anchor||d==this.current)break;this._addItemClass(d,"Selected");this.selection[d.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}}else if(this.singular)this.anchor==this.current?dojo.isCopyKey(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,
"Anchor"),this.selection[this.current.id]=1);else if(dojo.isCopyKey(a))this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);else if(!(this.current.id in
this.selection))this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1;dojo.stopEvent(a)}},onMouseUp:function(){if(this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current))this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove")},
onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);delete this.onmousemoveEvent},_removeSelection:function(){var a=dojo.dnd._empty,b;for(b in this.selection)if(!(b in a)){var c=dojo.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){if(this.anchor)this._removeItemClass(this.anchor,"Anchor"),this.anchor=null;return this}}));
dojo._hasResource["dojo.dnd.Avatar"]||(dojo._hasResource["dojo.dnd.Avatar"]=!0,dojo.provide("dojo.dnd.Avatar"),dojo.declare("dojo.dnd.Avatar",null,{constructor:function(a){this.manager=a;this.construct()},construct:function(){this.isA11y=dojo.hasClass(dojo.body(),"dijit_a11y");var a=dojo.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),b=this.manager.source,c,d=dojo.create("tbody",null,a),e=dojo.create("tr",null,d),f=dojo.create("td",null,e);this.isA11y&&
dojo.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},f);dojo.create("span",{innerHTML:b.generateText?this._generateText():""},f);var g=Math.min(5,this.manager.nodes.length),h=0;for(dojo.attr(e,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});h<g;++h)b.creator?c=b._normalizedCreator(b.getItem(this.manager.nodes[h].id).data,"avatar").node:(c=this.manager.nodes[h].cloneNode(!0),c.tagName.toLowerCase()=="tr"&&(e=dojo.create("table"),dojo.create("tbody",null,e).appendChild(c),c=e)),
c.id="",e=dojo.create("tr",null,d),f=dojo.create("td",null,e),f.appendChild(c),dojo.attr(e,{"class":"dojoDndAvatarItem",style:{opacity:(9-h)/10}});this.node=a},destroy:function(){dojo.destroy(this.node);this.node=!1},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");if(this.isA11y){var a=dojo.byId("a11yIcon"),b="+";this.manager.canDropFlag&&!this.manager.copy?b="< ":!this.manager.canDropFlag&&!this.manager.copy?b="o":this.manager.canDropFlag||
(b="x");a.innerHTML=b}dojo.query("tr.dojoDndAvatarHeader td span"+(this.isA11y?" span":""),this.node).forEach(function(a){a.innerHTML=this._generateText()},this)},_generateText:function(){return this.manager.nodes.length.toString()}}));
if(!dojo._hasResource["dojo.dnd.Manager"])dojo._hasResource["dojo.dnd.Manager"]=!0,dojo.provide("dojo.dnd.Manager"),dojo.declare("dojo.dnd.Manager",null,{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:16,OFFSET_Y:16,overSource:function(a){if(this.avatar)this.target=a&&a.targetState!="Disabled"?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update();dojo.publish("/dnd/source/over",[a])},outSource:function(a){if(this.avatar){if(this.target==
a)this.target=null,this.canDropFlag=!1,this.avatar.update(),dojo.publish("/dnd/source/over",[null])}else dojo.publish("/dnd/source/over",[null])},startDrag:function(a,b,c){this.source=a;this.nodes=b;this.copy=Boolean(c);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);dojo.publish("/dnd/start",[a,b,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),
dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp"),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent)];dojo.addClass(dojo.body(),"dojoDnd"+(c?"Copy":"Move"))},canDrop:function(a){a=Boolean(this.target&&a);if(this.canDropFlag!=a)this.canDropFlag=a,this.avatar.update()},stopDrag:function(){dojo.removeClass(dojo.body(),["dojoDndCopy","dojoDndMove"]);dojo.forEach(this.events,dojo.disconnect);this.events=[];this.avatar.destroy();this.source=this.target=
this.avatar=null;this.nodes=[]},makeAvatar:function(){return new dojo.dnd.Avatar(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;if(b)dojo.dnd.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+"px",a=Boolean(this.source.copyState(dojo.isCopyKey(a))),this.copy!=a&&this._setCopyStatus(a)},onMouseUp:function(a){this.avatar&&(this.target&&this.canDropFlag?(a=[this.source,this.nodes,Boolean(this.source.copyState(dojo.isCopyKey(a))),
this.target,a],dojo.publish("/dnd/drop/before",a),dojo.publish("/dnd/drop",a)):dojo.publish("/dnd/cancel"),this.stopDrag())},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case dojo.keys.CTRL:a=Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==dojo.keys.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=
a;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.replaceClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}}),dojo.dnd._manager=null,dojo.dnd.manager=function(){if(!dojo.dnd._manager)dojo.dnd._manager=new dojo.dnd.Manager;return dojo.dnd._manager};
dojo._hasResource["dojo.dnd.Source"]||(dojo._hasResource["dojo.dnd.Source"]=!0,dojo.provide("dojo.dnd.Source"),dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(a,b){dojo.mixin(this,dojo.mixin({},b));var c=this.accept;if(c.length){this.accept={};for(var d=0;d<c.length;++d)this.accept[c[d]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=
this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&dojo.addClass(this.node,"dojoDndSource");this.targetState="";this.accept&&dojo.addClass(this.node,"dojoDndTarget");this.horizontal&&dojo.addClass(this.node,"dojoDndHorizontal");this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",this,"onDndCancel")]},checkAcceptance:function(a,
b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,e=!1,f=0;f<d.length;++f)if(d[f]in this.accept){e=!0;break}if(!e)return!1}return!0},copyState:function(a,b){if(a)return!0;arguments.length<2&&(b=this==dojo.dnd.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);dojo.forEach(this.topics,dojo.unsubscribe);this.targetAnchor=null},
markupFactory:function(a,b){a._skipStartup=!0;return new dojo.dnd.Source(b,a)},onMouseMove:function(a){if(!(this.isDragging&&this.targetState=="Disabled")){dojo.dnd.Source.superclass.onMouseMove.call(this,a);var b=dojo.dnd.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var c=this.getSelectedNodes();c.length&&b.startDrag(this,c,this.copyState(dojo.isCopyKey(a),!0))}if(this.isDragging){c=!1;if(this.current){if(!this.targetBox||
this.targetAnchor!=this.current)this.targetBox=dojo.position(this.current,!0);c=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2:a.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||c!=this.before)this._markTargetAnchor(c),b.canDrop(!this.current||b.source!=this||!(this.current.id in this.selection))}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&(!this.skipForm||!dojo.dnd.isFormElement(a)))this.mouseDown=!0,this._lastX=a.pageX,this._lastY=
a.pageY,dojo.dnd.Source.superclass.onMouseDown.call(this,a)},onMouseUp:function(a){if(this.mouseDown)this.mouseDown=!1,dojo.dnd.Source.superclass.onMouseUp.call(this,a)},onDndSourceOver:function(a){this!=a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=dojo.dnd.manager(),a.canDrop(this.targetState!="Disabled"&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",
this==a?c?"Copied":"Moved":"");this._changeState("Target",this.accept&&this.checkAcceptance(a,b)?"":"Disabled");this==a&&dojo.dnd.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor)this._unmarkTargetAnchor(),this.targetAnchor=null;this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,
b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,b,c){var d=this._normalizedCreator;this._normalizedCreator=this.creator?function(b,c){return d.call(this,a.getItem(b.id).data,c)}:c?function(b){var c=a.getItem(b.id),b=b.cloneNode(!0);b.id=dojo.dnd.getUniqueId();return{node:b,data:c.data,type:c.type}}:function(b){var c=a.getItem(b.id);a.delItem(b.id);return{node:b,data:c.data,type:c.type}};this.selectNone();!c&&!this.creator&&a.selectNone();this.insertNodes(!0,b,this.before,this.current);
!c&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=d},onDropInternal:function(a,b){var c=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?function(a,b){return c.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id),a=a.cloneNode(!0);a.id=dojo.dnd.getUniqueId();return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,
data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=c}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled")this.onDraggingOver()},onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);dojo.dnd.manager().outSource(this);if(this.isDragging&&this.targetState!=
"Disabled")this.onDraggingOut()},_markTargetAnchor:function(a){if(!(this.current==this.targetAnchor&&this.before==a))this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){if(this.targetAnchor)this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=
null,this.before=!0},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if(!dojo.mouseButtons.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(dojo.hasClass(a,"dojoDndHandle"))return!0;if(dojo.hasClass(a,"dojoDndItem")||dojo.hasClass(a,"dojoDndIgnore"))break}return!1}}),dojo.declare("dojo.dnd.Target",dojo.dnd.Source,{constructor:function(){this.isSource=!1;dojo.removeClass(this.node,"dojoDndSource")},
markupFactory:function(a,b){a._skipStartup=!0;return new dojo.dnd.Target(b,a)}}),dojo.declare("dojo.dnd.AutoSource",dojo.dnd.Source,{constructor:function(){this.autoSync=!0},markupFactory:function(a,b){a._skipStartup=!0;return new dojo.dnd.AutoSource(b,a)}}));
dojo._hasResource["dojo.hash"]||(dojo._hasResource["dojo.hash"]=!0,dojo.provide("dojo.hash"),function(){function a(a,b){var c=a.indexOf(b);return c>=0?a.substring(c+1):""}function b(){return a(location.href,"#")}function c(){dojo.publish("/dojo/hashchange",[b()])}function d(){b()!==g&&(g=b(),c())}function e(a){if(h)if(h.isTransitioning())setTimeout(dojo.hitch(null,e,a),k);else{var b=h.iframe.location.href,c=b.indexOf("?");h.iframe.location.replace(b.substring(0,c)+"?"+a)}else location.replace("#"+
a),!j&&d()}function f(){function d(){g=b();h=s?g:a(u.href,"?");j=!1;q=null}var e=document.createElement("iframe"),f=dojo.config.dojoBlankHtmlUrl||dojo.moduleUrl("dojo","resources/blank.html");dojo.config.useXDomain&&!dojo.config.dojoBlankHtmlUrl&&console.warn("dojo.hash: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl to the path on your domain to blank.html");e.id="dojo-hash-iframe";e.src=f+"?"+b();e.style.display="none";
document.body.appendChild(e);this.iframe=dojo.global["dojo-hash-iframe"];var h,j,q,r,s,u=this.iframe.location;this.isTransitioning=function(){return j};this.pollLocation=function(){if(!s)try{var v=a(u.href,"?");if(document.title!=r)r=this.iframe.document.title=document.title}catch(w){s=!0,console.error("dojo.hash: Error adding history entry. Server unreachable.")}var t=b();if(j&&g===t)if(s||v===q)d(),c();else{setTimeout(dojo.hitch(this,this.pollLocation),0);return}else if(!(g===t&&(s||h===v)))if(g!==
t){g=t;j=!0;q=t;e.src=f+"?"+q;s=!1;setTimeout(dojo.hitch(this,this.pollLocation),0);return}else if(!s)location.href="#"+u.search.substring(1),d(),c();setTimeout(dojo.hitch(this,this.pollLocation),k)};d();setTimeout(dojo.hitch(this,this.pollLocation),k)}dojo.hash=function(a,c){if(!arguments.length)return b();a.charAt(0)=="#"&&(a=a.substring(1));c?e(a):location.href="#"+a;return a};var g,h,j,k=dojo.config.hashPollFrequency||100;dojo.addOnLoad(function(){"onhashchange"in dojo.global&&(!dojo.isIE||dojo.isIE>=
8&&document.compatMode!="BackCompat")?j=dojo.connect(dojo.global,"onhashchange",c):document.addEventListener?(g=b(),setInterval(d,k)):document.attachEvent&&(h=new f)})}());
dojo._hasResource["dojox.data.QueryReadStore"]||(dojo._hasResource["dojox.data.QueryReadStore"]=!0,dojo.provide("dojox.data.QueryReadStore"),dojo.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,doClientPaging:!1,doClientSorting:!1,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0},_labelAttr:"label",constructor:function(a){dojo.mixin(this,
a)},getValue:function(a,b,c){this._assertIsItem(a);if(!dojo.isString(b))throw Error(this._className+".getValue(): Invalid attribute, string expected!");return!this.hasAttribute(a,b)&&c?c:a.i[b]},getValues:function(a,b){this._assertIsItem(a);var c=[];this.hasAttribute(a,b)&&c.push(a.i[b]);return c},getAttributes:function(a){this._assertIsItem(a);var b=[],c;for(c in a.i)b.push(c);return b},hasAttribute:function(a,b){return this.isItem(a)&&typeof a.i[b]!="undefined"},containsValue:function(a,b,c){for(var a=
this.getValues(a,b),b=a.length,d=0;d<b;d++)if(a[d]==c)return!0;return!1},isItem:function(a){return a?typeof a.r!="undefined"&&a.r==this:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this.isItemLoaded(a.item)},fetch:function(a){a=a||{};if(!a.store)a.store=this;var b=this;this._fetchItems(a,function(a,d,e){var f=d.abort||null,g=!1,h=d.start?d.start:0;b.doClientPaging==!1&&(h=0);var j=d.count?h+d.count:a.length;d.abort=function(){g=!0;f&&f.call(d)};var k=d.scope||dojo.global;
if(!d.store)d.store=b;d.onBegin&&d.onBegin.call(k,e,d);d.sort&&b.doClientSorting&&a.sort(dojo.data.util.sorter.createSortFunction(d.sort,b));if(d.onItem)for(e=h;e<a.length&&e<j;++e){var l=a[e];g||d.onItem.call(k,l,d)}d.onComplete&&!g&&(e=null,d.onItem||(e=a.slice(h,j)),d.onComplete.call(k,e,d))},function(a,b){b.onError&&b.onError.call(b.scope||dojo.global,a,b)});return a},getFeatures:function(){return this._features},close:function(){},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,
this._labelAttr)},getLabelAttributes:function(){return this._labelAttr?[this._labelAttr]:null},_xhrFetchHandler:function(a,b,c){a=this._filterResponse(a);if(a.label)this._labelAttr=a.label;var d=a.numRows||-1;this._items=[];dojo.forEach(a.items,function(a){this._items.push({i:a,r:this})},this);a=a.identifier;this._itemsByIdentity={};if(a){this._identifier=a;var e;for(e=0;e<this._items.length;++e){var f=this._items[e].i,g=f[a];if(this._itemsByIdentity[g])throw Error(this._className+":  The json data as specified by: ["+
this.url+"] is malformed.  Items within the list have identifier: ["+a+"].  Value collided: ["+g+"]");else this._itemsByIdentity[g]=f}}else{this._identifier=Number;for(e=0;e<this._items.length;++e)this._items[e].n=e}d=this._numRows=d===-1?this._items.length:d;c(this._items,b,d);this._numRows=d},_fetchItems:function(a,b,c){var d=a.serverQuery||a.query||{};if(!this.doClientPaging&&(d.start=a.start||0,a.count))d.count=a.count;if(!this.doClientSorting&&a.sort){var e=[];dojo.forEach(a.sort,function(a){a&&
a.attribute&&e.push((a.descending?"-":"")+a.attribute)});d.sort=e.join(",")}if(this.doClientPaging&&this._lastServerQuery!==null&&dojo.toJson(d)==dojo.toJson(this._lastServerQuery))this._numRows=this._numRows===-1?this._items.length:this._numRows,b(this._items,a,this._numRows);else{var f=(this.requestMethod.toLowerCase()=="post"?dojo.xhrPost:dojo.xhrGet)({url:this.url,handleAs:"json-comment-optional",content:d,failOk:!0});a.abort=function(){f.cancel()};f.addCallback(dojo.hitch(this,function(d){this._xhrFetchHandler(d,
a,b,c)}));f.addErrback(function(b){c(b,a)});this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=dojo.mixin({},d)}},_filterResponse:function(a){return a},_assertIsItem:function(a){if(!this.isItem(a))throw Error(this._className+": Invalid item argument.");},_assertIsAttribute:function(a){if(typeof a!=="string")throw Error(this._className+": Invalid attribute argument ('"+a+"').");},fetchItemByIdentity:function(a){if(this._itemsByIdentity){var b=this._itemsByIdentity[a.identity];
if(b!==void 0){a.onItem&&a.onItem.call(a.scope?a.scope:dojo.global,{i:b,r:this});return}}this._fetchItems({serverQuery:{id:a.identity}},function(b){var d=a.scope?a.scope:dojo.global;try{var e=null;b&&b.length==1&&(e=b[0]);a.onItem&&a.onItem.call(d,e)}catch(f){a.onError&&a.onError.call(d,f)}},function(b){var d=a.scope?a.scope:dojo.global;a.onError&&a.onError.call(d,b)})},getIdentity:function(a){var b=null;return b=this._identifier===Number?a.n:a.i[this._identifier]},getIdentityAttributes:function(){return[this._identifier]}}));
if(!dojo._hasResource["dojox.string.Builder"])dojo._hasResource["dojox.string.Builder"]=!0,dojo.provide("dojox.string.Builder"),dojox.string.Builder=function(a){var b="";this.length=0;this.append=function(a){if(arguments.length>1){var d="";switch(arguments.length){case 9:d=""+arguments[8]+d;case 8:d=""+arguments[7]+d;case 7:d=""+arguments[6]+d;case 6:d=""+arguments[5]+d;case 5:d=""+arguments[4]+d;case 4:d=""+arguments[3]+d;case 3:d=""+arguments[2]+d;case 2:b+=""+arguments[0]+arguments[1]+d;break;
default:for(var e=0;e<arguments.length;)d+=arguments[e++];b+=d}}else b+=a;this.length=b.length;return this};this.concat=function(a){return this.append.apply(this,arguments)};this.appendArray=function(a){return this.append.apply(this,a)};this.clear=function(){b="";this.length=0;return this};this.replace=function(a,d){b=b.replace(a,d);this.length=b.length;return this};this.remove=function(a,d){if(d===void 0)d=b.length;if(d==0)return this;b=b.substr(0,a)+b.substr(a+d);this.length=b.length;return this};
this.insert=function(a,d){b=a==0?d+b:b.slice(0,a)+d+b.slice(a);this.length=b.length;return this};this.toString=function(){return b};a&&this.append(a)};
if(!dojo._hasResource["dojox.string.tokenize"])dojo._hasResource["dojox.string.tokenize"]=!0,dojo.provide("dojox.string.tokenize"),dojox.string.tokenize=function(a,b,c,d){var e=[],f,g;for(g=0;f=b.exec(a);){g=a.slice(g,b.lastIndex-f[0].length);g.length&&e.push(g);if(c){if(dojo.isOpera){for(g=f.slice(0);g.length<f.length;)g.push(null);f=g}f=c.apply(d,f.slice(1).concat(e.length));typeof f!="undefined"&&e.push(f)}g=b.lastIndex}g=a.slice(g);g.length&&e.push(g);return e};
dojo._hasResource["dojox.dtl._base"]||(dojo._hasResource["dojox.dtl._base"]=!0,dojo.provide("dojox.dtl._base"),dojo.experimental("dojox.dtl"),function(){var a=dojox.dtl;a.TOKEN_BLOCK=-1;a.TOKEN_VAR=-2;a.TOKEN_COMMENT=-3;a.TOKEN_TEXT=3;a._Context=dojo.extend(function(a){if(a&&(dojo._mixin(this,a),a.get))this._getter=a.get,delete this.get},{push:function(){var a=this,b=dojo.delegate(this);b.pop=function(){return a};return b},pop:function(){throw Error("pop() called on empty Context");},get:function(a,
b){var c=this._normalize;if(this._getter){var d=this._getter(a);if(typeof d!="undefined")return c(d)}return typeof this[a]!="undefined"?c(this[a]):b},_normalize:function(a){if(a instanceof Date)a.year=a.getFullYear(),a.month=a.getMonth()+1,a.day=a.getDate(),a.date=a.year+"-"+("0"+a.month).slice(-2)+"-"+("0"+a.day).slice(-2),a.hour=a.getHours(),a.minute=a.getMinutes(),a.second=a.getSeconds(),a.microsecond=a.getMilliseconds();return a},update:function(a){var b=this.push();a&&dojo._mixin(this,a);return b}});
var b=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g,c=/\s+/g,d=function(a,b){a=a||c;a instanceof RegExp||(a=RegExp(a,"g"));if(!a.global)throw Error("You must use a globally flagged RegExp with split "+a);a.exec("");for(var d,e=[],f=0,g=0;d=a.exec(this);)if(e.push(this.slice(f,a.lastIndex-d[0].length)),f=a.lastIndex,b&&++g>b-1)break;e.push(this.slice(f));return e};a.Token=function(a,b){this.token_type=a;this.contents=new String(dojo.trim(b));this.contents.split=d;this.split=
function(){return String.prototype.split.apply(this.contents,arguments)}};a.Token.prototype.split_contents=function(a){for(var c,d=[],e=0,a=a||999;e++<a&&(c=b.exec(this.contents));)c=c[0],c.charAt(0)=='"'&&c.slice(-1)=='"'?d.push('"'+c.slice(1,-1).replace('\\"','"').replace("\\\\","\\")+'"'):c.charAt(0)=="'"&&c.slice(-1)=="'"?d.push("'"+c.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'"):d.push(c);return d};var e=a.text={_get:function(b,c,d){b=a.register.get(b,c.toLowerCase(),d);if(!b){if(!d)throw Error("No tag found for "+
c);return null}d=b[1];b=b[2];d.indexOf(":")!=-1&&(d=d.split(":"),d=d.pop());dojo.require(b);b=dojo.getObject(b);return b[d||c]||b[c+"_"]||b[d+"_"]},getTag:function(a,b){return e._get("tag",a,b)},getFilter:function(a,b){return e._get("filter",a,b)},getTemplate:function(b){return new a.Template(e.getTemplateString(b))},getTemplateString:function(a){return dojo._getText(a.toString())||""},_resolveLazy:function(b,c,d){return c?d?dojo.fromJson(dojo._getText(b))||{}:a.text.getTemplateString(b):dojo.xhrGet({handleAs:d?
"json":"text",url:b})},_resolveTemplateArg:function(a,b){if(e._isTemplate(a)){if(!b){var c=new dojo.Deferred;c.callback(a);return c}return a}return e._resolveLazy(a,b)},_isTemplate:function(a){return typeof a=="undefined"||typeof a=="string"&&(a.match(/^\s*[<{]/)||a.indexOf(" ")!=-1)},_resolveContextArg:function(a,b){if(a.constructor==Object){if(!b){var c=new dojo.Deferred;c.callback(a);return c}return a}return e._resolveLazy(a,b,!0)},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(a){return dojox.string.tokenize(a,
e._re,e._parseDelims)},_parseDelims:function(b,c,d){if(b)return[a.TOKEN_VAR,b];else if(c){b=dojo.trim(d).split(/\s+/g);for(c=0;d=b[c];c++)dojo.require(d)}else return[a.TOKEN_BLOCK,d]}};a.Template=dojo.extend(function(b,c){var d=c?b:e._resolveTemplateArg(b,!0)||"",d=e.tokenize(d);this.nodelist=(new a._Parser(d)).parse()},{update:function(b,c){return e._resolveContextArg(c).addCallback(this,function(c){var d=this.render(new a._Context(c));b.forEach?b.forEach(function(a){a.innerHTML=d}):dojo.byId(b).innerHTML=
d;return this})},render:function(b,c){c=c||this.getBuffer();b=b||new a._Context({});return this.nodelist.render(b,c)+""},getBuffer:function(){return new dojox.string.Builder}});var f=/\{\{\s*(.+?)\s*\}\}/g;a.quickFilter=function(b){if(!b)return new a._NodeList;if(b.indexOf("{%")==-1)return new a._QuickNodeList(dojox.string.tokenize(b,f,function(b){return new a._Filter(b)}))};a._QuickNodeList=dojo.extend(function(a){this.contents=a},{render:function(a,b){for(var c=0,d=this.contents.length;c<d;c++)b=
this.contents[c].resolve?b.concat(this.contents[c].resolve(a)):b.concat(this.contents[c]);return b},dummyRender:function(b){return this.render(b,a.Template.prototype.getBuffer()).toString()},clone:function(){return this}});a._Filter=dojo.extend(function(a){if(!a)throw Error("Filter must be called with variable name");this.contents=a;var b=this._cache[a];b?(this.key=b[0],this.filters=b[1]):(this.filters=[],dojox.string.tokenize(a,this._re,this._tokenize,this),this._cache[a]=[this.key,this.filters])},
{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:'"',1:'"',2:"",8:'"'},_args:{4:'"',5:'"',6:"",7:"'"},_tokenize:function(){for(var a,b,c=0,d=[];c<arguments.length;c++)d[c]=typeof arguments[c]!="undefined"&&typeof arguments[c]=="string"&&arguments[c];if(this.key){for(a in this._args)if(d[a]){b=
arguments[a];this._args[a]=="'"?b=b.replace(/\\'/g,"'"):this._args[a]=='"'&&(b=b.replace(/\\"/g,'"'));b=[!this._args[a],b];break}a=e.getFilter(arguments[3]);if(!dojo.isFunction(a))throw Error(arguments[3]+" is not registered as a filter");this.filters.push([a,b])}else for(a in this._values)if(d[a]){this.key=this._values[a]+arguments[a]+this._values[a];break}},getExpression:function(){return this.contents},resolve:function(a){if(typeof this.key=="undefined")return"";for(var b=this.resolvePath(this.key,
a),c=0,d;d=this.filters[c];c++)b=d[1]?d[1][0]?d[0](b,this.resolvePath(d[1][1],a)):d[0](b,d[1][1]):d[0](b);return b},resolvePath:function(b,c){var d,e;d=b.charAt(0);e=b.slice(-1);if(isNaN(parseInt(d)))if(d=='"'&&d==e)d=b.slice(1,-1);else{if(b=="true")return!0;if(b=="false")return!1;if(b=="null"||b=="None")return null;e=b.split(".");d=c.get(e[0]);if(dojo.isFunction(d)){var f=c.getThis&&c.getThis();d=d.alters_data?"":f?d.call(f):""}for(f=1;f<e.length;f++){var g=e[f];if(d){var h=d;if(dojo.isObject(d)&&
g=="items"&&typeof d[g]=="undefined"){var g=[],j;for(j in d)g.push([j,d[j]]);d=g}else{if(d.get&&dojo.isFunction(d.get)&&d.get.safe)d=d.get(g);else if(typeof d[g]=="undefined"){d=d[g];break}else d=d[g];dojo.isFunction(d)?d=d.alters_data?"":d.call(h):d instanceof Date&&(d=a._Context.prototype._normalize(d))}}else return""}}else d=b.indexOf(".")==-1?parseInt(b):parseFloat(b);return d}});a._TextNode=a._Node=dojo.extend(function(a){this.contents=a},{set:function(a){this.contents=a;return this},render:function(a,
b){return b.concat(this.contents)},isEmpty:function(){return!dojo.trim(this.contents)},clone:function(){return this}});a._NodeList=dojo.extend(function(a){this.contents=a||[];this.last=""},{push:function(a){this.contents.push(a);return this},concat:function(a){this.contents=this.contents.concat(a);return this},render:function(a,b){for(var c=0;c<this.contents.length;c++)if(b=this.contents[c].render(a,b),!b)throw Error("Template must return buffer");return b},dummyRender:function(b){return this.render(b,
a.Template.prototype.getBuffer()).toString()},unrender:function(a,b){return b},clone:function(){return this},rtrim:function(){for(;;)if(i=this.contents.length-1,this.contents[i]instanceof a._TextNode&&this.contents[i].isEmpty())this.contents.pop();else break;return this}});a._VarNode=dojo.extend(function(b){this.contents=new a._Filter(b)},{render:function(b,c){var d=this.contents.resolve(b);d.safe||(d=a._base.escape(""+d));return c.concat(d)}});a._noOpNode=new function(){this.render=this.unrender=
function(a,b){return b};this.clone=function(){return this}};a._Parser=dojo.extend(function(a){this.contents=a},{i:0,parse:function(b){for(var c={},d,b=b||[],f=0;f<b.length;f++)c[b[f]]=!0;for(f=new a._NodeList;this.i<this.contents.length;)if(d=this.contents[this.i++],typeof d=="string")f.push(new a._TextNode(d));else{var g=d[0];d=d[1];if(g==a.TOKEN_VAR)f.push(new a._VarNode(d));else if(g==a.TOKEN_BLOCK){if(c[d])return--this.i,f;var h=d.split(/\s+/g);h.length&&(h=h[0],(h=e.getTag(h))&&f.push(h(this,
new a.Token(g,d))))}}if(b.length)throw Error("Could not find closing tag(s): "+b.toString());this.contents.length=0;return f},next_token:function(){var b=this.contents[this.i++];return new a.Token(b[0],b[1])},delete_first_token:function(){this.i++},skip_past:function(b){for(;this.i<this.contents.length;){var c=this.contents[this.i++];if(c[0]==a.TOKEN_BLOCK&&c[1]==b)return}throw Error("Unclosed tag found when looking for "+b);},create_variable_node:function(b){return new a._VarNode(b)},create_text_node:function(b){return new a._TextNode(b||
"")},getTemplate:function(b){return new a.Template(b)}});a.register={_registry:{attributes:[],tags:[],filters:[]},get:function(b,c){for(var d=a.register._registry[b+"s"],e=0,f;f=d[e];e++)if(typeof f[0]=="string"){if(f[0]==c)return f}else if(c.match(f[0]))return f},getAttributeTags:function(){for(var b=[],c=a.register._registry.attributes,d=0,e;e=c[d];d++)if(e.length==3)b.push(e);else{var f=dojo.getObject(e[1]);f&&dojo.isFunction(f)&&(e.push(f),b.push(e))}return b},_any:function(b,c,d){for(var e in d)for(var f=
0,g;g=d[e][f];f++){var h=g;dojo.isArray(g)&&(h=g[0],g=g[1]);if(typeof h=="string"){if(h.substr(0,5)=="attr:"){var j=g;j.substr(0,5)=="attr:"&&(j=j.slice(5));a.register._registry.attributes.push([j.toLowerCase(),c+"."+e+"."+j])}h=h.toLowerCase()}a.register._registry[b].push([h,g,c+"."+e])}},tags:function(b,c){a.register._any("tags",b,c)},filters:function(b,c){a.register._any("filters",b,c)}};var g=/&/g,h=/</g,j=/>/g,k=/'/g,l=/"/g;a._base.escape=function(b){return a.mark_safe(b.replace(g,"&amp;").replace(h,
"&lt;").replace(j,"&gt;").replace(l,"&quot;").replace(k,"&#39;"))};a._base.safe=function(a){typeof a=="string"&&(a=new String(a));if(typeof a=="object")a.safe=!0;return a};a.mark_safe=a._base.safe;a.register.tags("dojox.dtl.tag",{date:["now"],logic:["if","for","ifequal","ifnotequal"],loader:["extends","block","include","load","ssi"],misc:["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],loop:["cycle","ifchanged","regroup"]});a.register.filters("dojox.dtl.filter",
{dates:["date","time","timesince","timeuntil"],htmlstrings:["linebreaks","linebreaksbr","removetags","striptags"],integers:["add","get_digit"],lists:["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],logic:["default","default_if_none","divisibleby","yesno"],misc:["filesizeformat","pluralize","phone2numeric","pprint"],strings:["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list",
"rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});a.register.filters("dojox.dtl",{_base:["escape","safe"]})}());
if(!dojo._hasResource["dojox.dtl.Context"])dojo._hasResource["dojox.dtl.Context"]=!0,dojo.provide("dojox.dtl.Context"),dojox.dtl.Context=dojo.extend(function(a){this._this={};dojox.dtl._Context.call(this,a)},dojox.dtl._Context.prototype,{getKeys:function(){var a=[],b;for(b in this)this.hasOwnProperty(b)&&b!="_this"&&a.push(b);return a},extend:function(a){return dojo.delegate(this,a)},filter:function(a){var b=new dojox.dtl.Context,c=[],d,e;if(a instanceof dojox.dtl.Context)c=a.getKeys();else if(typeof a==
"object")for(e in a)c.push(e);else for(d=0;e=arguments[d];d++)typeof e=="string"&&c.push(e);for(d=0;e=c[d];d++)b[e]=this[e];return b},setThis:function(a){this._this=a},getThis:function(){return this._this},hasKey:function(a){return this._getter&&typeof this._getter(a)!="undefined"?!0:typeof this[a]!="undefined"?!0:!1}});
if(!dojo._hasResource["dojox.dtl.Inline"])dojo._hasResource["dojox.dtl.Inline"]=!0,dojo.provide("dojox.dtl.Inline"),dojox.dtl.Inline=dojo.extend(function(a,b){this.create(a,b)},dijit._Widget.prototype,{context:null,render:function(a){this.context=a||this.context;this.postMixInProperties();dojo.query("*",this.domNode).orphan();this.domNode.innerHTML=this.template.render(this.context)},declaredClass:"dojox.dtl.Inline",buildRendering:function(){var a=this.domNode=document.createElement("div"),b=this.srcNodeRef;
b.parentNode&&b.parentNode.replaceChild(a,b);this.template=new dojox.dtl.Template(dojo.trim(b.text),!0);this.render()},postMixInProperties:function(){this.context=this.context.get===dojox.dtl._Context.prototype.get?this.context:new dojox.dtl._Context(this.context)}});
dojo._hasResource["dojox.dtl.tag.logic"]||(dojo._hasResource["dojox.dtl.tag.logic"]=!0,dojo.provide("dojox.dtl.tag.logic"),function(){var a=dojox.dtl,b=a.tag.logic;b.IfNode=dojo.extend(function(a,b,e,f){this.bools=a;this.trues=b;this.falses=e;this.type=f},{render:function(a,b){var e,f,g;if(this.type=="or"){for(e=0;f=this.bools[e];e++)if(g=f[0],f=f[1],(f=f.resolve(a))&&!g||g&&!f)return this.falses&&(b=this.falses.unrender(a,b)),this.trues?this.trues.render(a,b,this):b;this.trues&&(b=this.trues.unrender(a,
b));return this.falses?this.falses.render(a,b,this):b}else{for(e=0;f=this.bools[e];e++)if(g=f[0],f=f[1],f=f.resolve(a),f==g)return this.trues&&(b=this.trues.unrender(a,b)),this.falses?this.falses.render(a,b,this):b;this.falses&&(b=this.falses.unrender(a,b));return this.trues?this.trues.render(a,b,this):b}},unrender:function(a,b){b=this.trues?this.trues.unrender(a,b):b;return b=this.falses?this.falses.unrender(a,b):b},clone:function(a){var b=this.trues?this.trues.clone(a):null,a=this.falses?this.falses.clone(a):
null;return new this.constructor(this.bools,b,a,this.type)}});b.IfEqualNode=dojo.extend(function(b,d,e,f,g){this.var1=new a._Filter(b);this.var2=new a._Filter(d);this.trues=e;this.falses=f;this.negate=g},{render:function(a,b){var e=this.var1.resolve(a),f=this.var2.resolve(a),e=typeof e!="undefined"?e:"",f=typeof e!="undefined"?f:"";if(this.negate&&e!=f||!this.negate&&e==f)return this.falses&&(b=this.falses.unrender(a,b,this)),this.trues?this.trues.render(a,b,this):b;this.trues&&(b=this.trues.unrender(a,
b,this));return this.falses?this.falses.render(a,b,this):b},unrender:function(a,d){return b.IfNode.prototype.unrender.call(this,a,d)},clone:function(a){var b=this.trues?this.trues.clone(a):null,a=this.falses?this.falses.clone(a):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),b,a,this.negate)}});b.ForNode=dojo.extend(function(b,d,e,f){this.assign=b;this.loop=new a._Filter(d);this.reversed=e;this.nodelist=f;this.pool=[]},{render:function(a,b){var e,f,g,h=!1,j=this.assign;
for(g=0;g<j.length;g++)if(typeof a[j[g]]!="undefined"){h=!0;a=a.push();break}!h&&a.forloop&&(h=!0,a=a.push());g=this.loop.resolve(a)||[];for(e=g.length;e<this.pool.length;e++)this.pool[e].unrender(a,b,this);this.reversed&&(g=g.slice(0).reverse());var k=[];if(dojo.isObject(g)&&!dojo.isArrayLike(g))for(f in g)k.push(g[f]);else k=g;var l=a.forloop={parentloop:a.get("forloop",{})};for(e=f=0;e<k.length;e++){var p=k[e];l.counter0=f;l.counter=f+1;l.revcounter0=k.length-f-1;l.revcounter=k.length-f;l.first=
!f;l.last=f==k.length-1;if(j.length>1&&dojo.isArrayLike(p)){h||(h=!0,a=a.push());var n={};for(g=0;g<p.length&&g<j.length;g++)n[j[g]]=p[g];dojo.mixin(a,n)}else a[j[0]]=p;f+1>this.pool.length&&this.pool.push(this.nodelist.clone(b));b=this.pool[f++].render(a,b,this)}delete a.forloop;if(h)a.pop();else for(g=0;g<j.length;g++)delete a[j[g]];return b},unrender:function(a,b){for(var e=0,f;f=this.pool[e];e++)b=f.unrender(a,b);return b},clone:function(a){return new this.constructor(this.assign,this.loop.getExpression(),
this.reversed,this.nodelist.clone(a))}});dojo.mixin(b,{if_:function(c,d){var e,f,g,h=[],j=d.contents.split();j.shift();d=j.join(" ");j=d.split(" and ");if(j.length==1)g="or",j=d.split(" or ");else{g="and";for(e=0;e<j.length;e++)if(j[e].indexOf(" or ")!=-1)throw Error("'if' tags can't mix 'and' and 'or'");}for(e=0;f=j[e];e++){var k=!1;f.indexOf("not ")==0&&(f=f.slice(4),k=!0);h.push([k,new a._Filter(f)])}e=c.parse(["else","endif"]);f=!1;d=c.next_token();d.contents=="else"&&(f=c.parse(["endif"]),c.next_token());
return new b.IfNode(h,e,f,g)},_ifequal:function(a,d,e){var f=d.split_contents();if(f.length!=3)throw Error(f[0]+" takes two arguments");var g="end"+f[0],h=a.parse(["else",g]),j=!1,d=a.next_token();d.contents=="else"&&(j=a.parse([g]),a.next_token());return new b.IfEqualNode(f[1],f[2],h,j,e)},ifequal:function(a,d){return b._ifequal(a,d)},ifnotequal:function(a,d){return b._ifequal(a,d,!0)},for_:function(a,d){var e=d.contents.split();if(e.length<4)throw Error("'for' statements should have at least four words: "+
d.contents);var f=e[e.length-1]=="reversed",g=f?-3:-2;if(e[e.length+g]!="in")throw Error("'for' tag received an invalid argument: "+d.contents);for(var h=e.slice(1,g).join(" ").split(/ *, */),j=0;j<h.length;j++)if(!h[j]||h[j].indexOf(" ")!=-1)throw Error("'for' tag received an invalid argument: "+d.contents);j=a.parse(["endfor"]);a.next_token();return new b.ForNode(h,e[e.length+g+1],f,j)}})}());
dojo._hasResource["dojox.form.CheckedMultiSelect"]||(dojo._hasResource["dojox.form.CheckedMultiSelect"]=!0,dojo.provide("dojox.form.CheckedMultiSelect"),dojo.declare("dojox.form._CheckedMultiSelectItem",[dijit._Widget,dijit._Templated],{widgetsInTemplate:!0,templateString:dojo.cache("dojox.form","resources/_CheckedMultiSelectItem.html",'<div class="dijitReset ${baseClass}"\n\t><input class="${baseClass}Box" dojoType="dijit.form.CheckBox" dojoAttachPoint="checkBox" \n\t\tdojoAttachEvent="_onClick:_changeBox" type="${_type.type}" baseClass="${_type.baseClass}"\n\t/><div class="dijitInline ${baseClass}Label" dojoAttachPoint="labelNode" dojoAttachEvent="onclick:_onClick"></div\n></div>\n'),
baseClass:"dojoxMultiSelectItem",option:null,parent:null,disabled:!1,readOnly:!1,postMixInProperties:function(){this._type=this.parent.multiple?{type:"checkbox",baseClass:"dijitCheckBox"}:{type:"radio",baseClass:"dijitRadio"};this.disabled=this.option.disabled=this.option.disabled||!1;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.labelNode.innerHTML=this.option.label},_changeBox:function(){if(!this.get("disabled")&&!this.get("readOnly"))this.parent.multiple?this.option.selected=
this.checkBox.get("value")&&!0:this.parent.set("value",this.option.value),this.parent._updateSelection(),this.parent.focus()},_onClick:function(a){this.get("disabled")||this.get("readOnly")?dojo.stopEvent(a):this.checkBox._onClick(a)},_updateBox:function(){this.checkBox.set("value",this.option.selected)},_setDisabledAttr:function(a){this.disabled=a||this.option.disabled;this.checkBox.set("disabled",this.disabled);dojo.toggleClass(this.domNode,"dojoxMultiSelectDisabled",this.disabled)},_setReadOnlyAttr:function(a){this.checkBox.set("readOnly",
a);this.readOnly=a}}),dojo.declare("dojox.form.CheckedMultiSelect",dijit.form._FormSelectWidget,{templateString:dojo.cache("dojox.form","resources/CheckedMultiSelect.html",'<div class="dijit dijitReset dijitInline" dojoAttachEvent="onmousedown:_onMouseDown,onclick:focus"\n\t><select class="${baseClass}Select" multiple="true" dojoAttachPoint="containerNode,focusNode"></select\n\t><div dojoAttachPoint="wrapperDiv"></div\n></div>\n'),baseClass:"dojoxMultiSelect",required:!1,invalidMessage:"At least one item must be selected.",
_message:"",tooltipPosition:[],_onMouseDown:function(a){dojo.stopEvent(a)},validator:function(){return!this.required?!0:dojo.some(this.getOptions(),function(a){return a.selected&&a.value!=null&&a.value.toString().length!=0})},validate:function(a){dijit.hideTooltip(this.domNode);(a=this.isValid(a))||this.displayMessage(this.invalidMessage);return a},isValid:function(){return this.validator()},getErrorMessage:function(){return this.invalidMessage},displayMessage:function(a){dijit.hideTooltip(this.domNode);
a&&dijit.showTooltip(a,this.domNode,this.tooltipPosition)},onAfterAddOptionItem:function(){},_addOptionItem:function(a){var b=new dojox.form._CheckedMultiSelectItem({option:a,parent:this});this.wrapperDiv.appendChild(b.domNode);this.onAfterAddOptionItem(b,a)},_refreshState:function(){this.validate(this._focused)},onChange:function(){this._refreshState()},reset:function(){this.inherited(arguments);dijit.hideTooltip(this.domNode)},_updateSelection:function(){this.inherited(arguments);this._handleOnChange(this.value);
dojo.forEach(this._getChildren(),function(a){a._updateBox()})},_getChildren:function(){return dojo.map(this.wrapperDiv.childNodes,function(a){return dijit.byNode(a)})},invertSelection:function(){dojo.forEach(this.options,function(a){a.selected=!a.selected});this._updateSelection()},_setDisabledAttr:function(a){this.inherited(arguments);dojo.forEach(this._getChildren(),function(b){b&&b.set&&b.set("disabled",a)})},_setReadOnlyAttr:function(a){"readOnly"in this.attributeMap&&this._attrToDom("readOnly",
a);this.readOnly=a;dojo.forEach(this._getChildren(),function(b){b&&b.set&&b.set("readOnly",a)})},uninitialize:function(){dijit.hideTooltip(this.domNode);dojo.forEach(this._getChildren(),function(a){a.destroyRecursive()});this.inherited(arguments)}}));
dojo._hasResource["dijit.form.VerticalSlider"]||(dojo._hasResource["dijit.form.VerticalSlider"]=!0,dojo.provide("dijit.form.VerticalSlider"),dojo.declare("dijit.form.VerticalSlider",dijit.form.HorizontalSlider,{templateString:dojo.cache("dijit.form","templates/VerticalSlider.html",'<table class="dijit dijitReset dijitSlider dijitSliderV" cellspacing="0" cellpadding="0" border="0" rules="none" dojoAttachEvent="onkeypress:_onKeyPress,onkeyup:_onKeyUp"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\n\t\t\t><div class="dijitSliderIncrementIconV" style="display:none" dojoAttachPoint="decrementButton"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset"\n\t\t\t><center><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" dojoAttachEvent="onmousedown:_onClkIncBumper"></div></center\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td dojoAttachPoint="leftDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV"></td\n\t\t><td class="dijitReset dijitSliderDecorationC" style="height:100%;"\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" ${!nameAttrSetting}\n\t\t\t/><center class="dijitReset dijitSliderBarContainerV" role="presentation" dojoAttachPoint="sliderBarContainer"\n\t\t\t\t><div role="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" dojoAttachEvent="onmousedown:_onBarClick"><\!--#5629--\></div\n\t\t\t\t><div role="presentation" dojoAttachPoint="progressBar" class="dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" dojoAttachEvent="onmousedown:_onBarClick"\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableV" style="vertical-align:top;"\n\t\t\t\t\t\t><div dojoAttachPoint="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleV" dojoAttachEvent="onmousedown:_onHandleClick" role="slider" valuemin="${minimum}" valuemax="${maximum}"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t></center\n\t\t></td\n\t\t><td dojoAttachPoint="containerNode,rightDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset"\n\t\t\t><center><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" dojoAttachEvent="onmousedown:_onClkDecBumper"></div></center\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\n\t\t\t><div class="dijitSliderDecrementIconV" style="display:none" dojoAttachPoint="incrementButton"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n></table>\n'),
_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_startingPixelCount:"t",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:!0,_isReversed:function(){return this._descending}}));
if(!dojo._hasResource["dojox.fx._base"])dojo._hasResource["dojox.fx._base"]=!0,dojo.provide("dojox.fx._base"),dojo.mixin(dojox.fx,{anim:dojo.anim,animateProperty:dojo.animateProperty,fadeTo:dojo._fade,fadeIn:dojo.fadeIn,fadeOut:dojo.fadeOut,combine:dojo.fx.combine,chain:dojo.fx.chain,slideTo:dojo.fx.slideTo,wipeIn:dojo.fx.wipeIn,wipeOut:dojo.fx.wipeOut}),dojox.fx.sizeTo=function(a){var b=a.node=dojo.byId(a.node),c=a.method||"chain";if(!a.duration)a.duration=500;if(c=="chain")a.duration=Math.floor(a.duration/
2);var d,e,f,g,h,j=null,k=function(b){return function(){var c=dojo.getComputedStyle(b),k=c.position,o=c.width,m=c.height;d=k=="absolute"?b.offsetTop:parseInt(c.top)||0;f=k=="absolute"?b.offsetLeft:parseInt(c.left)||0;h=o=="auto"?0:parseInt(o);j=m=="auto"?0:parseInt(m);g=f-Math.floor((a.width-h)/2);e=d-Math.floor((a.height-j)/2);if(k!="absolute"&&k!="relative")c=dojo.coords(b,!0),d=c.y,f=c.x,b.style.position="absolute",b.style.top=d+"px",b.style.left=f+"px"}}(b),b=dojo.animateProperty(dojo.mixin({properties:{height:function(){k();
return{end:a.height||0,start:j}},top:function(){return{start:d,end:e}}}},a)),c=dojo.animateProperty(dojo.mixin({properties:{width:function(){return{start:h,end:a.width||0}},left:function(){return{start:f,end:g}}}},a));return dojo.fx[a.method=="combine"?"combine":"chain"]([b,c])},dojox.fx.slideBy=function(a){var b,c,d=function(a){return function(){var d=dojo.getComputedStyle(a),g=d.position;b=g=="absolute"?a.offsetTop:parseInt(d.top)||0;c=g=="absolute"?a.offsetLeft:parseInt(d.left)||0;if(g!="absolute"&&
g!="relative")d=dojo.coords(a,!0),b=d.y,c=d.x,a.style.position="absolute",a.style.top=b+"px",a.style.left=c+"px"}}(a.node=dojo.byId(a.node));d();a=dojo.animateProperty(dojo.mixin({properties:{top:b+(a.top||0),left:c+(a.left||0)}},a));dojo.connect(a,"beforeBegin",a,d);return a},dojox.fx.crossFade=function(a){var b=a.nodes[0]=dojo.byId(a.nodes[0]),c=dojo.style(b,"opacity"),d=a.nodes[1]=dojo.byId(a.nodes[1]);dojo.style(d,"opacity");return dojo.fx.combine([dojo[c==0?"fadeIn":"fadeOut"](dojo.mixin({node:b},
a)),dojo[c==0?"fadeOut":"fadeIn"](dojo.mixin({node:d},a))])},dojox.fx.highlight=function(a){var b=a.node=dojo.byId(a.node);a.duration=a.duration||400;var c=a.color||"#ffff99",d=dojo.style(b,"backgroundColor");d=="rgba(0, 0, 0, 0)"&&(d="transparent");a=dojo.animateProperty(dojo.mixin({properties:{backgroundColor:{start:c,end:d}}},a));d=="transparent"&&dojo.connect(a,"onEnd",a,function(){b.style.backgroundColor=d});return a},dojox.fx.wipeTo=function(a){a.node=dojo.byId(a.node);var b=a.node,c=b.style,
d=a.width?"width":"height",e={};e[d]={start:function(){c.overflow="hidden";if(c.visibility=="hidden"||c.display=="none")return c[d]="1px",c.display="",c.visibility="",1;else{var a=dojo.style(b,d);return Math.max(a,1)}},end:a[d]};return dojo.animateProperty(dojo.mixin({properties:e},a))};dojo._hasResource["dojox.fx"]||(dojo._hasResource["dojox.fx"]=!0,dojo.provide("dojox.fx"));
dojo._hasResource["dojox.form.RangeSlider"]||(dojo._hasResource["dojox.form.RangeSlider"]=!0,dojo.provide("dojox.form.RangeSlider"),function(){var a=function(a,b){return b-a},b=function(a,b){return a-b};dojo.declare("dojox.form._RangeSliderMixin",null,{value:[0,100],postMixInProperties:function(){this.inherited(arguments);this.value=dojo.map(this.value,function(a){return parseInt(a,10)})},postCreate:function(){this.inherited(arguments);this.value.sort(this._isReversed()?a:b);var c=this,d=dojo.declare(dijit.form._SliderMoverMax,
{constructor:function(){this.widget=c}});this._movableMax=new dojo.dnd.Moveable(this.sliderHandleMax,{mover:d});dijit.setWaiState(this.focusNodeMax,"valuemin",this.minimum);dijit.setWaiState(this.focusNodeMax,"valuemax",this.maximum);d=dojo.declare(dijit.form._SliderBarMover,{constructor:function(){this.widget=c}});this._movableBar=new dojo.dnd.Moveable(this.progressBar,{mover:d})},destroy:function(){this.inherited(arguments);this._movableMax.destroy();this._movableBar.destroy()},_onKeyPress:function(a){if(!this.disabled&&
!this.readOnly&&!a.altKey&&!a.ctrlKey){var b=a.currentTarget,e=!1,f=!1,g=dojo.keys;b==this.sliderHandle?e=!0:b==this.progressBar?f=e=!0:b==this.sliderHandleMax&&(f=!0);switch(a.keyCode){case g.HOME:this._setValueAttr(this.minimum,!0,f);break;case g.END:this._setValueAttr(this.maximum,!0,f);break;case this._descending||this.isLeftToRight()?g.RIGHT_ARROW:g.LEFT_ARROW:case this._descending===!1?g.DOWN_ARROW:g.UP_ARROW:case this._descending===!1?g.PAGE_DOWN:g.PAGE_UP:e&&f?this._bumpValue([{change:a.keyCode==
g.PAGE_UP?this.pageIncrement:1,useMaxValue:!0},{change:a.keyCode==g.PAGE_UP?this.pageIncrement:1,useMaxValue:!1}]):e?this._bumpValue(a.keyCode==g.PAGE_UP?this.pageIncrement:1,!0):f&&this._bumpValue(a.keyCode==g.PAGE_UP?this.pageIncrement:1);break;case this._descending||this.isLeftToRight()?g.LEFT_ARROW:g.RIGHT_ARROW:case this._descending===!1?g.UP_ARROW:g.DOWN_ARROW:case this._descending===!1?g.PAGE_UP:g.PAGE_DOWN:e&&f?this._bumpValue([{change:a.keyCode==g.PAGE_DOWN?-this.pageIncrement:-1,useMaxValue:!1},
{change:a.keyCode==g.PAGE_DOWN?-this.pageIncrement:-1,useMaxValue:!0}]):e?this._bumpValue(a.keyCode==g.PAGE_DOWN?-this.pageIncrement:-1):f&&this._bumpValue(a.keyCode==g.PAGE_DOWN?-this.pageIncrement:-1,!0);break;default:dijit.form._FormValueWidget.prototype._onKeyPress.apply(this,arguments);this.inherited(arguments);return}dojo.stopEvent(a)}},_onHandleClickMax:function(a){!this.disabled&&!this.readOnly&&(dojo.isIE||dijit.focus(this.sliderHandleMax),dojo.stopEvent(a))},_onClkIncBumper:function(){this._setValueAttr(this._descending===
!1?this.minimum:this.maximum,!0,!0)},_bumpValue:function(a,b){this._setValueAttr(dojo.isArray(a)?[this._getBumpValue(a[0].change,a[0].useMaxValue),this._getBumpValue(a[1].change,a[1].useMaxValue)]:this._getBumpValue(a,b),!0,!dojo.isArray(a)&&(a>0&&!b||b&&a<0))},_getBumpValue:function(a,b){var e=dojo.getComputedStyle(this.sliderBarContainer),f=dojo._getContentBox(this.sliderBarContainer,e),e=this.discreteValues,g=!b?this.value[0]:this.value[1];if(e<=1||e==Infinity)e=f[this._pixelCount];e--;if(this._isReversed()&&
a<0||a>0&&!this._isReversed())g=!b?this.value[1]:this.value[0];f=(g-this.minimum)*e/(this.maximum-this.minimum)+a;f<0&&(f=0);f>e&&(f=e);return f*(this.maximum-this.minimum)/e+this.minimum},_onBarClick:function(a){!this.disabled&&!this.readOnly&&(dojo.isIE||dijit.focus(this.progressBar),dojo.stopEvent(a))},_onRemainingBarClick:function(a){if(!this.disabled&&!this.readOnly){dojo.isIE||dijit.focus(this.progressBar);var b=dojo.coords(this.sliderBarContainer,!0),e=dojo.coords(this.progressBar,!0),f=a[this._mousePixelCoord]-
b[this._startingPixelCoord],g=e[this._startingPixelCount],e=g+e[this._pixelCount],g=this._isReversed()?f<=g:f>=e;this._setPixelValue(this._isReversed()?b[this._pixelCount]-f:f,b[this._pixelCount],!0,g);dojo.stopEvent(a)}},_setPixelValue:function(a,b,e,f){!this.disabled&&!this.readOnly&&this._setValueAttr(this._getValueByPixelValue(a,b),e,f)},_getValueByPixelValue:function(a,b){var e=this.discreteValues;if(e<=1||e==Infinity)e=b;e--;return(this.maximum-this.minimum)*Math.round((a<0?0:b<a?b:a)/(b/e))/
e+this.minimum},_setValueAttr:function(c,d,e){var f=this.value;dojo.isArray(c)?f=c:e?this._isReversed()?f[0]=c:f[1]=c:this._isReversed()?f[1]=c:f[0]=c;this._lastValueReported="";this.valueNode.value=this.value=c=f;dijit.setWaiState(this.focusNode,"valuenow",f[0]);dijit.setWaiState(this.focusNodeMax,"valuenow",f[1]);this.value.sort(this._isReversed()?a:b);dijit.form._FormValueWidget.prototype._setValueAttr.apply(this,arguments);this._printSliderBar(d,e)},_printSliderBar:function(a){var b=(this.value[0]-
this.minimum)/(this.maximum-this.minimum),e=(this.value[1]-this.minimum)/(this.maximum-this.minimum),f=b;b>e&&(b=e,e=f);var g=this._isReversed()?(1-b)*100:b*100,h=this._isReversed()?(1-e)*100:e*100,j=this._isReversed()?(1-e)*100:b*100;if(a&&this.slideDuration>0&&this.progressBar.style[this._progressPixelSize]){if(parseFloat(this.progressBar.style[this._handleOffsetCoord]),a=this.slideDuration/10,a!==0){a<0&&(a=0-a);var k={},l={},f={};k[this._handleOffsetCoord]={start:this.sliderHandle.style[this._handleOffsetCoord],
end:g,units:"%"};l[this._handleOffsetCoord]={start:this.sliderHandleMax.style[this._handleOffsetCoord],end:h,units:"%"};f[this._handleOffsetCoord]={start:this.progressBar.style[this._handleOffsetCoord],end:j,units:"%"};f[this._progressPixelSize]={start:this.progressBar.style[this._progressPixelSize],end:(e-b)*100,units:"%"};b=dojo.animateProperty({node:this.sliderHandle,duration:a,properties:k});e=dojo.animateProperty({node:this.sliderHandleMax,duration:a,properties:l});a=dojo.animateProperty({node:this.progressBar,
duration:a,properties:f});dojo.fx.combine([b,e,a]).play()}}else this.sliderHandle.style[this._handleOffsetCoord]=g+"%",this.sliderHandleMax.style[this._handleOffsetCoord]=h+"%",this.progressBar.style[this._handleOffsetCoord]=j+"%",this.progressBar.style[this._progressPixelSize]=(e-b)*100+"%"}});dojo.declare("dijit.form._SliderMoverMax",dijit.form._SliderMover,{onMouseMove:function(a){var b=this.widget,e=b._abspos;if(!e)e=b._abspos=dojo.coords(b.sliderBarContainer,!0),b._setPixelValue_=dojo.hitch(b,
"_setPixelValue"),b._isReversed_=b._isReversed();a=(a.touches?a.touches[0]:a)[b._mousePixelCoord]-e[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?e[b._pixelCount]-a:a,e[b._pixelCount],!1,!0)},destroy:function(a){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,!0)}});dojo.declare("dijit.form._SliderBarMover",dojo.dnd.Mover,{onMouseMove:function(a){var d=this.widget;if(!d.disabled&&!d.readOnly){var e=d._abspos,f=d._bar,g=d._mouseOffset;
if(!e)e=d._abspos=dojo.coords(d.sliderBarContainer,!0),d._setPixelValue_=dojo.hitch(d,"_setPixelValue"),d._getValueByPixelValue_=dojo.hitch(d,"_getValueByPixelValue"),d._isReversed_=d._isReversed();if(!f)f=d._bar=dojo.coords(d.progressBar,!0);a=a.touches?a.touches[0]:a;if(!g)g=d._mouseOffset=a[d._mousePixelCoord]-e[d._startingPixelCoord]-f[d._startingPixelCount];g=a[d._mousePixelCoord]-e[d._startingPixelCoord]-g;pixelValues=[g,g+f[d._pixelCount]];pixelValues.sort(b);pixelValues[0]<=0&&(pixelValues[0]=
0,pixelValues[1]=f[d._pixelCount]);pixelValues[1]>=e[d._pixelCount]&&(pixelValues[1]=e[d._pixelCount],pixelValues[0]=e[d._pixelCount]-f[d._pixelCount]);e=[d._getValueByPixelValue(d._isReversed_?e[d._pixelCount]-pixelValues[0]:pixelValues[0],e[d._pixelCount]),d._getValueByPixelValue(d._isReversed_?e[d._pixelCount]-pixelValues[1]:pixelValues[1],e[d._pixelCount])];d._setValueAttr(e,!1,!1)}},destroy:function(){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var a=this.widget;a._abspos=null;a._bar=
null;a._mouseOffset=null;a._setValueAttr(a.value,!0)}});dojo.declare("dojox.form.HorizontalRangeSlider",[dijit.form.HorizontalSlider,dojox.form._RangeSliderMixin],{templateString:dojo.cache("dojox.form","resources/HorizontalRangeSlider.html",'<table class="dijit dijitReset dijitSlider dijitSliderH dojoxRangeSlider" cellspacing="0" cellpadding="0" border="0" rules="none" dojoAttachEvent="onkeypress:_onKeyPress,onkeyup:_onKeyUp"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td dojoAttachPoint="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderDecrementIconH" tabIndex="-1" style="display:none" dojoAttachPoint="decrementButton"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent="onmousedown:_onClkDecBumper"></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" ${!nameAttrSetting}\n\t\t\t/><div role="presentation" class="dojoxRangeSliderBarContainer" dojoAttachPoint="sliderBarContainer"\n\t\t\t\t><div dojoAttachPoint="sliderHandle" tabIndex="${tabIndex}" class="dijitSliderMoveable dijitSliderMoveableH" dojoAttachEvent="onmousedown:_onHandleClick" role="slider" valuemin="${minimum}" valuemax="${maximum}"\n\t\t\t\t\t><div class="dijitSliderImageHandle dijitSliderImageHandleH"></div\n\t\t\t\t></div\n\t\t\t\t><div role="presentation" dojoAttachPoint="progressBar,focusNode" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent="onmousedown:_onBarClick"></div\n\t\t\t\t><div dojoAttachPoint="sliderHandleMax,focusNodeMax" tabIndex="${tabIndex}" class="dijitSliderMoveable dijitSliderMoveableH" dojoAttachEvent="onmousedown:_onHandleClickMax" role="sliderMax" valuemin="${minimum}" valuemax="${maximum}"\n\t\t\t\t\t><div class="dijitSliderImageHandle dijitSliderImageHandleH"></div\n\t\t\t\t></div\n\t\t\t\t><div role="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent="onmousedown:_onRemainingBarClick"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent="onmousedown:_onClkIncBumper"></div\n\t\t></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderIncrementIconH" tabIndex="-1" style="display:none" dojoAttachPoint="incrementButton"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td dojoAttachPoint="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n></table>\n')});
dojo.declare("dojox.form.VerticalRangeSlider",[dijit.form.VerticalSlider,dojox.form._RangeSliderMixin],{templateString:dojo.cache("dojox.form","resources/VerticalRangeSlider.html",'<table class="dijitReset dijitSlider dijitSliderV dojoxRangeSlider" cellspacing="0" cellpadding="0" border="0" rules="none"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\n\t\t\t><div class="dijitSliderIncrementIconV" tabIndex="-1" style="display:none" dojoAttachPoint="decrementButton" dojoAttachEvent="onclick: increment"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset"\n\t\t\t><center><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" dojoAttachEvent="onclick:_onClkIncBumper"></div></center\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td dojoAttachPoint="leftDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV" style="text-align:center;height:100%;"></td\n\t\t><td class="dijitReset" style="height:100%;"\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" ${!nameAttrSetting}\n\t\t\t/><center role="presentation" style="position:relative;height:100%;" dojoAttachPoint="sliderBarContainer"\n\t\t\t\t><div role="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" dojoAttachEvent="onmousedown:_onRemainingBarClick"\n\t\t\t\t\t><div dojoAttachPoint="sliderHandle" tabIndex="${tabIndex}" class="dijitSliderMoveable dijitSliderMoveableV" dojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_onHandleClick" style="vertical-align:top;" role="slider" valuemin="${minimum}" valuemax="${maximum}"\n\t\t\t\t\t\t><div class="dijitSliderImageHandle dijitSliderImageHandleV"></div\n\t\t\t\t\t></div\n\t\t\t\t\t><div role="presentation" dojoAttachPoint="progressBar,focusNode" tabIndex="${tabIndex}" class="dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" dojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_onBarClick"\n\t\t\t\t\t></div\n\t\t\t\t\t><div dojoAttachPoint="sliderHandleMax,focusNodeMax" tabIndex="${tabIndex}" class="dijitSliderMoveable dijitSliderMoveableV" dojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_onHandleClickMax" style="vertical-align:top;" role="slider" valuemin="${minimum}" valuemax="${maximum}"\n\t\t\t\t\t\t><div class="dijitSliderImageHandle dijitSliderImageHandleV"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t></center\n\t\t></td\n\t\t><td dojoAttachPoint="containerNode,rightDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV" style="text-align:center;height:100%;"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset"\n\t\t\t><center><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" dojoAttachEvent="onclick:_onClkDecBumper"></div></center\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\n\t\t\t><div class="dijitSliderDecrementIconV" tabIndex="-1" style="display:none" dojoAttachPoint="incrementButton" dojoAttachEvent="onclick: decrement"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n></table>\n')})}());
dojo._hasResource["dojox.form.Rating"]||(dojo._hasResource["dojox.form.Rating"]=!0,dojo.provide("dojox.form.Rating"),dojo.declare("dojox.form.Rating",dijit.form._FormWidget,{templateString:null,numStars:3,value:0,constructor:function(a){dojo.mixin(this,a);for(var a="",b=0;b<this.numStars;b++)a+=dojo.string.substitute('<li class="dojoxRatingStar dijitInline" dojoAttachEvent="onclick:onStarClick,onmouseover:_onMouse,onmouseout:_onMouse" value="${value}"></li>',{value:b+1});this.templateString=dojo.string.substitute('<div dojoAttachPoint="domNode" class="dojoxRating dijitInline"><input type="hidden" value="0" dojoAttachPoint="focusNode" /><ul>${stars}</ul></div>',
{stars:a})},postCreate:function(){this.inherited(arguments);this._renderStars(this.value)},_onMouse:function(a){if(this.hovering){var b=+dojo.attr(a.target,"value");this.onMouseOver(a,b);this._renderStars(b,!0)}else this._renderStars(this.value)},_renderStars:function(a,b){dojo.query(".dojoxRatingStar",this.domNode).forEach(function(c,d){d+1>a?(dojo.removeClass(c,"dojoxRatingStarHover"),dojo.removeClass(c,"dojoxRatingStarChecked")):(dojo.removeClass(c,"dojoxRatingStar"+(b?"Checked":"Hover")),dojo.addClass(c,
"dojoxRatingStar"+(b?"Hover":"Checked")))})},onStarClick:function(a){a=+dojo.attr(a.target,"value");this.setAttribute("value",a==this.value?0:a);this._renderStars(this.value);this.onChange(this.value)},onMouseOver:function(){},setAttribute:function(a,b){this.inherited("setAttribute",arguments);a=="value"&&(this._renderStars(this.value),this.onChange(this.value))}}));
dojo._hasResource["dojox.html.metrics"]||(dojo._hasResource["dojox.html.metrics"]=!0,dojo.provide("dojox.html.metrics"),function(){var a=dojox.html.metrics;a.getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};if(dojo.isIE)dojo.doc.documentElement.style.fontSize="100%";var b=dojo.doc.createElement("div"),c=b.style;c.position="absolute";c.left="-100px";c.top="0";c.width="30px";c.height="1000em";
c.borderWidth="0";c.margin="0";c.padding="0";c.outline="0";c.lineHeight="1";c.overflow="hidden";dojo.body().appendChild(b);for(var d in a)c.fontSize=d,a[d]=Math.round(b.offsetHeight*12/16)*16/12/1E3;dojo.body().removeChild(b);return a};var b=null;a.getCachedFontMeasurements=function(c){if(c||!b)b=a.getFontMeasurements();return b};var c=null,d={};a.getTextBox=function(a,b,e){var j,k;if(c)j=c;else{j=c=dojo.doc.createElement("div");var l=dojo.doc.createElement("div");l.appendChild(j);k=l.style;k.overflow=
"scroll";k.position="absolute";k.left="0px";k.top="-10000px";k.width="1px";k.height="1px";k.visibility="hidden";k.borderWidth="0";k.margin="0";k.padding="0";k.outline="0";dojo.body().appendChild(l)}j.className="";k=j.style;k.borderWidth="0";k.margin="0";k.padding="0";k.outline="0";if(arguments.length>1&&b)for(var p in b)p in d||(k[p]=b[p]);if(arguments.length>2&&e)j.className=e;j.innerHTML=a;k=dojo.position(j);k.w=j.parentNode.scrollWidth;return k};var e={w:16,h:16};a.getScrollbar=function(){return{w:e.w,
h:e.h}};a._fontResizeNode=null;a.initOnFontResize=function(){var b=a._fontResizeNode=dojo.doc.createElement("iframe"),c=b.style;c.position="absolute";c.width="5em";c.height="10em";c.top="-10000px";dojo.isIE?b.onreadystatechange=function(){if(b.contentWindow.document.readyState=="complete")b.onresize=b.contentWindow.parent[dojox._scopeName].html.metrics._fontresize}:b.onload=function(){b.contentWindow.onresize=b.contentWindow.parent[dojox._scopeName].html.metrics._fontresize};b.setAttribute("src",
"javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'");dojo.body().appendChild(b);a.initOnFontResize=function(){}};a.onFontResize=function(){};a._fontresize=function(){a.onFontResize()};dojo.addOnUnload(function(){var b=a._fontResizeNode;if(b){if(dojo.isIE&&b.onresize)b.onresize=null;else if(b.contentWindow&&b.contentWindow.onresize)b.contentWindow.onresize=null;a._fontResizeNode=null}});dojo.addOnLoad(function(){try{var b=
dojo.doc.createElement("div");b.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";dojo.body().appendChild(b);e.w=b.offsetWidth-b.clientWidth;e.h=b.offsetHeight-b.clientHeight;dojo.body().removeChild(b);delete b}catch(c){}"fontSizeWatch"in dojo.config&&dojo.config.fontSizeWatch&&a.initOnFontResize()})}());
dojo._hasResource["dojox.grid.util"]||(dojo._hasResource["dojox.grid.util"]=!0,dojo.provide("dojox.grid.util"),function(){var a=dojox.grid.util;a.na="...";a.rowIndexTag="gridRowIndex";a.gridViewTag="gridView";a.fire=function(a,c,d){var e=a&&c&&a[c];return e&&(d?e.apply(a,d):a[c]())};a.setStyleHeightPx=function(a,c){if(c>=0){var d=a.style,e=c+"px";a&&d.height!=e&&(d.height=e)}};a.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];a.keyEvents=["keyup","keydown",
"keypress"];a.funnelEvents=function(b,c,d,e){for(var e=e?e:a.mouseEvents.concat(a.keyEvents),f=0,g=e.length;f<g;f++)c.connect(b,"on"+e[f],d)};a.removeNode=function(a){(a=dojo.byId(a))&&a.parentNode&&a.parentNode.removeChild(a);return a};a.arrayCompare=function(a,c){for(var d=0,e=a.length;d<e;d++)if(a[d]!=c[d])return!1;return a.length==c.length};a.arrayInsert=function(a,c,d){a.length<=c?a[c]=d:a.splice(c,0,d)};a.arrayRemove=function(a,c){a.splice(c,1)};a.arraySwap=function(a,c,d){var e=a[c];a[c]=a[d];
a[d]=e}}());
dojo._hasResource["dojox.grid._Scroller"]||(dojo._hasResource["dojox.grid._Scroller"]=!0,dojo.provide("dojox.grid._Scroller"),function(){var a=function(a){if(a){for(var b=dijit.registry.filter(function(b){return b.domNode&&dojo.isDescendant(b.domNode,a,!0)}),e=0,f;f=b[e];e++)f.destroy();delete b}},b=function(a,b){for(var e=[],f=0,g;g=a.childNodes[f];){f++;var h=dojo.byId(g);(h&&h.tagName?h.tagName.toLowerCase():"")==b&&e.push(g)}return e};dojo.declare("dojox.grid._Scroller",null,{constructor:function(a){this.setContentNodes(a);this.pageHeights=
[];this.pageNodes=[];this.stack=[]},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(a,b,e){switch(arguments.length){case 3:this.rowsPerPage=e;case 2:this.keepRows=b;case 1:this.rowCount=a}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);
this.invalidate();if(this.scrollboxNode)this.scrollboxNode.scrollTop=0,this.scroll(0),this.scrollboxNode.onscroll=dojo.hitch(this,"onscroll")},_getPageCount:function(a,b){return a?Math.ceil(a/b)||1:0},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode},setKeepInfo:function(a){this.keepRows=a;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2)},setContentNodes:function(a){this.colCount=
(this.contentNodes=a)?this.contentNodes.length:0;this.pageNodes=[];for(a=0;a<this.colCount;a++)this.pageNodes[a]=[]},getDefaultNodes:function(){return this.pageNodes[0]||[]},invalidate:function(){this._invalidating=!0;this.invalidateNodes();this.pageHeights=[];this.height=this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0;this.resize();this._invalidating=!1},updateRowCount:function(a){this.invalidateNodes();this.rowCount=a;a=this.pageCount;if(a===0)this.height=1;
this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<a)for(a-=1;a>=this.pageCount;a--)this.height-=this.getPageHeight(a),delete this.pageHeights[a];else this.pageCount>a&&(this.height+=this.defaultPageHeight*(this.pageCount-a-1)+this.calcLastPageHeight());this.resize()},pageExists:function(a){return Boolean(this.getDefaultPageNode(a))},measurePage:function(a){return this.grid.rowHeight?((a+1)*this.rowsPerPage>this.rowCount?this.rowCount-a*this.rowsPerPage:this.rowsPerPage)*
(this.grid.rowHeight+1):(a=this.getDefaultPageNode(a))&&a.innerHTML?a.offsetHeight:void 0},positionPage:function(a,b){for(var e=0;e<this.colCount;e++)this.pageNodes[e][a].style.top=b+"px"},repositionPages:function(a){for(var b=this.getDefaultNodes(),e=0,f=0;f<this.stack.length;f++)e=Math.max(this.stack[f],e);var g=(f=b[a])?this.getPageNodePosition(f)+this.getPageHeight(a):0;for(a+=1;a<=e;a++){if(f=b[a]){if(this.getPageNodePosition(f)==g)break;this.positionPage(a,g)}g+=this.getPageHeight(a)}},installPage:function(a){for(var b=
0;b<this.colCount;b++)this.contentNodes[b].appendChild(this.pageNodes[b][a])},preparePage:function(a,b){for(var e=b?this.popPage():null,f=0;f<this.colCount;f++){var g=this.pageNodes[f],h=e===null?this.createPageNode():this.invalidatePageNode(e,g);h.pageIndex=a;g[a]=h}},renderPage:function(a){var b=[],e;for(e=0;e<this.colCount;e++)b[e]=this.pageNodes[e][a];e=0;for(a*=this.rowsPerPage;e<this.rowsPerPage&&a<this.rowCount;e++,a++)this.renderRow(a,b)},removePage:function(a){var b=0;for(a*=this.rowsPerPage;b<
this.rowsPerPage;b++,a++)this.removeRow(a)},destroyPage:function(a){for(var b=0;b<this.colCount;b++){var e=this.invalidatePageNode(a,this.pageNodes[b]);e&&dojo.destroy(e)}},pacify:function(){},pacifying:!1,pacifyTicks:200,setPacifying:function(a){if(this.pacifying!=a)this.pacifying=a,this.pacify(this.pacifying)},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var a=(new Date).getTime()-this.startPacifyTicks>this.pacifyTicks;this.setPacifying(!0);this.startPacify();
return a},endPacify:function(){this.setPacifying(!1)},resize:function(){if(this.scrollboxNode)this.windowHeight=this.scrollboxNode.clientHeight;for(var a=0;a<this.colCount;a++)dojox.grid.util.setStyleHeightPx(this.contentNodes[a],Math.max(1,this.height));a=!this._invalidating;if(!a){var b=this.grid.get("autoHeight");typeof b=="number"&&b<=Math.min(this.rowsPerPage,this.rowCount)&&(a=!0)}a&&this.needPage(this.page,this.pageTop);a=this.page<this.pageCount-1?this.rowsPerPage:this.rowCount%this.rowsPerPage||
this.rowsPerPage;b=this.getPageHeight(this.page);this.averageRowHeight=b>0&&a>0?b/a:0},calcLastPageHeight:function(){if(!this.pageCount)return 0;var a=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight;return this.pageHeights[this.pageCount-1]=a},updateContentHeight:function(a){this.height+=a;this.resize()},updatePageHeight:function(a,b,e){if(this.pageExists(a)){var f=this.getPageHeight(a),g=this.measurePage(a);g===void 0&&(g=f);this.pageHeights[a]=g;if(f!=g){this.updateContentHeight(g-
f);var h=this.grid.get("autoHeight");typeof h=="number"&&h>this.rowCount||h===!0&&!b?e?(b=this.grid.viewsNode.style,b.height=parseInt(b.height)+g-f+"px",this.repositionPages(a)):this.grid.sizeChange():this.repositionPages(a)}return g}return 0},rowHeightChanged:function(a,b){this.updatePageHeight(Math.floor(a/this.rowsPerPage),!1,b)},invalidateNodes:function(){for(;this.stack.length;)this.destroyPage(this.popPage())},createPageNode:function(){var a=document.createElement("div");dojo.attr(a,"role",
"presentation");a.style.position="absolute";a.style[dojo._isBodyLtr()?"left":"right"]="0";return a},getPageHeight:function(a){a=this.pageHeights[a];return a!==void 0?a:this.defaultPageHeight},pushPage:function(a){return this.stack.push(a)},popPage:function(){return this.stack.shift()},findPage:function(a){for(var b=0,e=0,f=0;b<this.pageCount;b++,e+=f)if(f=this.getPageHeight(b),e+f>=a)break;this.page=b;this.pageTop=e},buildPage:function(a,b,e){this.preparePage(a,b);this.positionPage(a,e);this.installPage(a);
this.renderPage(a);this.pushPage(a)},needPage:function(a,b){var e=this.getPageHeight(a);this.pageExists(a)?this.positionPage(a,b):(this.buildPage(a,!this.grid._autoHeight&&this.keepPages&&this.stack.length>=this.keepPages,b),e=this.updatePageHeight(a,!0));return e},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(a){this.grid.scrollTop=a;if(this.colCount){this.startPacify();this.findPage(a);for(var b=this.height,e=this.getScrollBottom(a),f=this.page,g=this.pageTop;f<
this.pageCount&&(e<0||g<e);f++)g+=this.needPage(f,g);this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,a);this.lastVisibleRow=this.getLastVisibleRow(f-1,g,e);b!=this.height&&this.repositionPages(f-1);this.endPacify()}},getScrollBottom:function(a){return this.windowHeight>=0?a+this.windowHeight:-1},processNodeEvent:function(a,b){for(var e=a.target;e&&e!=b&&e.parentNode&&e.parentNode.parentNode!=b;)e=e.parentNode;if(!e||!e.parentNode||e.parentNode.parentNode!=b)return!1;a.topRowIndex=
e.parentNode.pageIndex*this.rowsPerPage;var f=a.topRowIndex,g;a:{g=0;for(var h,j=e.parentNode;h=j.childNodes[g++];)if(h==e){g-=1;break a}g=-1}a.rowIndex=f+g;a.rowTarget=e;return!0},processEvent:function(a){return this.processNodeEvent(a,this.contentNode)},renderRow:function(){},removeRow:function(){},getDefaultPageNode:function(a){return this.getDefaultNodes()[a]},positionPageNode:function(){},getPageNodePosition:function(a){return a.offsetTop},invalidatePageNode:function(b,d){var e=d[b];if(e)delete d[b],
this.removePage(b,e),a(e),e.innerHTML="";return e},getPageRow:function(a){return a*this.rowsPerPage},getLastPageRow:function(a){return Math.min(this.rowCount,this.getPageRow(a+1))-1},getFirstVisibleRow:function(a,d,e){if(!this.pageExists(a))return 0;for(var f=this.getPageRow(a),g=this.getDefaultNodes(),a=b(g[a],"div"),g=0,h=a.length;g<h&&d<e;g++,f++)d+=a[g].offsetHeight;return f?f-1:f},getLastVisibleRow:function(a,d,e){if(!this.pageExists(a))return 0;for(var f=this.getDefaultNodes(),g=this.getLastPageRow(a),
a=b(f[a],"div"),f=a.length-1;f>=0&&d>e;f--,g--)d-=a[f].offsetHeight;return g+1},findTopRow:function(a){for(var d=this.getDefaultNodes(),d=b(d[this.page],"div"),e=0,f=d.length,g=this.pageTop,h;e<f;e++)if(h=d[e].offsetHeight,g+=h,g>=a)return this.offset=h-(g-a),e+this.page*this.rowsPerPage;return-1},findScrollTop:function(a){var d=Math.floor(a/this.rowsPerPage),e=0,f;for(f=0;f<d;f++)e+=this.getPageHeight(f);this.pageTop=e;this.page=d;this.needPage(d,this.pageTop);f=this.getDefaultNodes();var g=b(f[d],
"div"),d=a-this.rowsPerPage*d;f=0;for(a=g.length;f<a&&f<d;f++)e+=g[f].offsetHeight;return e},dummy:0})}());
dojo._hasResource["dojox.grid.cells._base"]||(dojo._hasResource["dojox.grid.cells._base"]=!0,dojo.provide("dojox.grid.cells._base"),dojo.declare("dojox.grid._DeferredTextWidget",dijit._Widget,{deferred:null,_destroyOnRemove:!0,postCreate:function(){this.deferred&&this.deferred.addBoth(dojo.hitch(this,function(a){if(this.domNode)this.domNode.innerHTML=a}))}}),function(){var a=function(){setTimeout(dojo.hitch.apply(dojo,arguments),0)},b=dojox.grid.cells;dojo.declare("dojox.grid.cells._Base",null,{styles:"",
classes:"",editable:!1,alwaysEditing:!1,formatter:null,defaultValue:"...",value:null,hidden:!1,noresize:!1,draggable:!0,_valueProp:"value",_formatPending:!1,constructor:function(a){this._props=a||{};dojo.mixin(this,a);if(this.draggable===void 0)this.draggable=!0},_defaultFormat:function(a,b){var c;var e=this.grid.formatterScope||this,f=this.formatter;if(f&&e&&typeof f=="string")c=this.formatter=e[f],f=c;e=a!=this.defaultValue&&f?f.apply(e,b):a;if(typeof e=="undefined")return this.defaultValue;e&&
e.addBoth&&(e=new dojox.grid._DeferredTextWidget({deferred:e},dojo.create("span",{innerHTML:this.defaultValue})));return e&&e.declaredClass&&e.startup?"<div class='dojoxGridStubNode' linkWidget='"+e.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>":e},format:function(a,b){var e=this.grid.edit.info,f=this.get?this.get(a,b):this.value||this.defaultValue,f=f&&f.replace&&this.grid.escapeHTMLInData?f.replace(/&/g,"&amp;").replace(/</g,"&lt;"):f;return this.editable&&(this.alwaysEditing||e.rowIndex==
a&&e.cell==this)?this.formatEditing(f,a):this._defaultFormat(f,[f,a,this])},formatEditing:function(){},getNode:function(a){return this.view.getCellNode(a,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(a){return(this.getNode(a)||0).firstChild||0},canResize:function(){var a=this.unitWidth;return a&&a!=="auto"},isFlex:function(){var a=this.unitWidth;return a&&dojo.isString(a)&&(a=="auto"||a.slice(-1)=="%")},applyEdit:function(a,b){this.grid.edit.applyCellEdit(a,
this,b)},cancelEdit:function(a){this.grid.doCancelEdit(a)},_onEditBlur:function(a){this.grid.edit.isEditCell(a,this.index)&&this.grid.edit.apply()},registerOnBlur:function(a,b){this.commitOnBlur&&dojo.connect(a,"onblur",function(){setTimeout(dojo.hitch(this,"_onEditBlur",b),250)})},needFormatNode:function(b,d){this._formatPending=!0;a(this,"_formatNode",b,d)},cancelFormatNode:function(){this._formatPending=!1},_formatNode:function(a,b){if(this._formatPending)this._formatPending=!1,dojo.setSelectable(this.grid.domNode,
!0),this.formatNode(this.getEditNode(b),a,b)},formatNode:function(b,d,e){dojo.isIE?a(this,"focus",e,b):this.focus(e,b)},dispatchEvent:function(a,b){if(a in this)return this[a](b)},getValue:function(a){return this.getEditNode(a)[this._valueProp]},setValue:function(a,b){var e=this.getEditNode(a);e&&(e[this._valueProp]=b)},focus:function(a,b){var e=b||this.getEditNode(a);try{dojox.grid.util.fire(e,"focus"),dojox.grid.util.fire(e,"select")}catch(f){}},save:function(a){this.value=this.value||this.getValue(a)},
restore:function(a){this.setValue(a,this.value)},_finish:function(){dojo.setSelectable(this.grid.domNode,!1);this.cancelFormatNode()},apply:function(a){this.applyEdit(this.getValue(a),a);this._finish(a)},cancel:function(a){this.cancelEdit(a);this._finish(a)}});b._Base.markupFactory=function(a,b){var e=dojo,f=e.trim(e.attr(a,"formatter")||"");if(f)b.formatter=dojo.getObject(f)||f;if(f=e.trim(e.attr(a,"get")||""))b.get=dojo.getObject(f);f=function(b,d,f){var k=e.trim(e.attr(a,b)||"");k&&(d[f||b]=k.toLowerCase()!=
"false")};f("sortDesc",b);f("editable",b);f("alwaysEditing",b);f("noresize",b);f("draggable",b);if(f=e.trim(e.attr(a,"loadingText")||e.attr(a,"defaultValue")||""))b.defaultValue=f;f=function(b,d,f){var k=e.trim(e.attr(a,b)||"")||void 0;k&&(d[f||b]=k)};f("styles",b);f("headerStyles",b);f("cellStyles",b);f("classes",b);f("headerClasses",b);f("cellClasses",b)};dojo.declare("dojox.grid.cells.Cell",b._Base,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,formatEditing:function(a,b){this.needFormatNode(a,
b);return'<input class="dojoxGridInput" type="text" value="'+a+'">'},formatNode:function(a,b,e){this.inherited(arguments);this.registerOnBlur(a,e)},doKey:function(a){this.keyFilter&&String.fromCharCode(a.charCode).search(this.keyFilter)==-1&&dojo.stopEvent(a)},_finish:function(a){this.inherited(arguments);var b=this.getEditNode(a);try{dojox.grid.util.fire(b,"blur")}catch(e){}}});b.Cell.markupFactory=function(a,d){b._Base.markupFactory(a,d);var e=dojo;if(e=e.trim(e.attr(a,"keyFilter")||""))d.keyFilter=
RegExp(e)};dojo.declare("dojox.grid.cells.RowIndex",b.Cell,{name:"Row",postscript:function(){this.editable=!1},get:function(a){return a+1}});b.RowIndex.markupFactory=function(a,d){b.Cell.markupFactory(a,d)};dojo.declare("dojox.grid.cells.Select",b.Cell,{options:null,values:null,returnIndex:-1,constructor:function(){this.values=this.values||this.options},formatEditing:function(a,b){this.needFormatNode(a,b);for(var e=['<select class="dojoxGridSelect">'],f=0,g,h;(g=this.options[f])!==void 0&&(h=this.values[f])!==
void 0;f++)e.push("<option",a==h?" selected":"",' value="'+h+'"',">",g,"</option>");e.push("</select>");return e.join("")},getValue:function(a){var b=this.getEditNode(a);if(b)return a=b.selectedIndex,b=b.options[a],this.returnIndex>-1?a:b.value||b.innerHTML}});b.Select.markupFactory=function(a,d){b.Cell.markupFactory(a,d);var e=dojo,f=e.trim(e.attr(a,"options")||"");if(f){var g=f.split(",");if(g[0]!=f)d.options=g}if(e=e.trim(e.attr(a,"values")||""))if(f=e.split(","),f[0]!=e)d.values=f};dojo.declare("dojox.grid.cells.AlwaysEdit",
b.Cell,{alwaysEditing:!0,_formatNode:function(a,b){this.formatNode(this.getEditNode(b),a,b)},applyStaticValue:function(a){var b=this.grid.edit;b.applyCellEdit(this.getValue(a),this,a);b.start(this,a,!0)}});b.AlwaysEdit.markupFactory=function(a,d){b.Cell.markupFactory(a,d)};dojo.declare("dojox.grid.cells.Bool",b.AlwaysEdit,{_valueProp:"checked",formatEditing:function(a){return'<input class="dojoxGridInput" type="checkbox"'+(a?' checked="checked"':"")+' style="width: auto" />'},doclick:function(a){a.target.tagName==
"INPUT"&&this.applyStaticValue(a.rowIndex)}});b.Bool.markupFactory=function(a,d){b.AlwaysEdit.markupFactory(a,d)}}());dojo._hasResource["dojox.grid.cells"]||(dojo._hasResource["dojox.grid.cells"]=!0,dojo.provide("dojox.grid.cells"));
dojo._hasResource["dojox.grid._Builder"]||(dojo._hasResource["dojox.grid._Builder"]=!0,dojo.provide("dojox.grid._Builder"),function(){var a=dojox.grid,b=function(a){for(;a&&a.tagName!="TABLE";a=a.parentNode);return a},c=function(a,b){for(var c=a;c&&b(c);c=c.parentNode);return c},d=function(a){var b=a.toUpperCase();return function(a){return a.tagName!=b}},e=dojox.grid.util.rowIndexTag,f=dojox.grid.util.gridViewTag;a._Builder=dojo.extend(function(a){if(a)this.view=a,this.grid=a.grid},{view:null,_table:'<table class="dojoxGridRowTable" border="0" cellspacing="0" cellpadding="0" role="presentation"',
getTableArray:function(){var a=[this._table];this.view.viewWidth&&a.push([' style="width:',this.view.viewWidth,';"'].join(""));a.push(">");return a},generateCellMarkup:function(a,b,c,d){var e=[],f;if(d){f=a.index!=a.grid.getSortIndex()?"":a.grid.sortInfo>0?'aria-sort="ascending"':'aria-sort="descending"';if(!a.id)a.id=this.grid.id+"Hdr"+a.index;f=['<th tabIndex="-1" aria-readonly="true" role="columnheader"',f,'id="',a.id,'"']}else f=['<td tabIndex="-1" role="gridcell"',this.grid.editable&&!a.editable?
'aria-readonly="true"':""];a.colSpan&&f.push(' colspan="',a.colSpan,'"');a.rowSpan&&f.push(' rowspan="',a.rowSpan,'"');f.push(' class="dojoxGridCell ');a.classes&&f.push(a.classes," ");c&&f.push(c," ");e.push(f.join(""));e.push("");f=['" idx="',a.index,'" style="'];b&&b[b.length-1]!=";"&&(b+=";");f.push(a.styles,b||"",a.hidden?"display:none;":"");a.unitWidth&&f.push("width:",a.unitWidth,";");e.push(f.join(""));e.push("");f=['"'];a.attrs&&f.push(" ",a.attrs);f.push(">");e.push(f.join(""));e.push("");
e.push(d?"</th>":"</td>");return e},isCellNode:function(a){return Boolean(a&&a!=dojo.doc&&dojo.attr(a,"idx"))},getCellNodeIndex:function(a){return a?Number(dojo.attr(a,"idx")):-1},getCellNode:function(a,b){for(var c=0,d;(d=a.firstChild&&((a.firstChild.rows||0)[c]||a.firstChild.childNodes[c]))&&d.cells;c++)for(var e=0,f;f=d.cells[e];e++)if(this.getCellNodeIndex(f)==b)return f;return null},findCellTarget:function(a,b){for(var c=a;c&&(!this.isCellNode(c)||c.offsetParent&&f in c.offsetParent.parentNode&&
c.offsetParent.parentNode[f]!=this.view.id)&&c!=b;)c=c.parentNode;return c!=b?c:null},baseDecorateEvent:function(a){a.dispatch="do"+a.type;a.grid=this.grid;a.sourceView=this.view;a.cellNode=this.findCellTarget(a.target,a.rowNode);a.cellIndex=this.getCellNodeIndex(a.cellNode);a.cell=a.cellIndex>=0?this.grid.getCell(a.cellIndex):null},findTarget:function(a,b){for(var c=a;c&&c!=this.domNode&&(!(b in c)||f in c&&c[f]!=this.view.id);)c=c.parentNode;return c!=this.domNode?c:null},findRowTarget:function(a){return this.findTarget(a,
e)},isIntraNodeEvent:function(a){try{return a.cellNode&&a.relatedTarget&&dojo.isDescendant(a.relatedTarget,a.cellNode)}catch(b){return!1}},isIntraRowEvent:function(a){try{var b=a.relatedTarget&&this.findRowTarget(a.relatedTarget);return!b&&a.rowIndex==-1||b&&a.rowIndex==b.gridRowIndex}catch(c){return!1}},dispatchEvent:function(a){return a.dispatch in this?this[a.dispatch](a):!1},domouseover:function(a){if(a.cellNode&&a.cellNode!=this.lastOverCellNode)this.lastOverCellNode=a.cellNode,this.grid.onMouseOver(a);
this.grid.onMouseOverRow(a)},domouseout:function(a){if(a.cellNode&&a.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(a,this.lastOverCellNode)&&(this.lastOverCellNode=null,this.grid.onMouseOut(a),!this.isIntraRowEvent(a)))this.grid.onMouseOutRow(a)},domousedown:function(a){if(a.cellNode)this.grid.onMouseDown(a);this.grid.onMouseDownRow(a)}});a._ContentBuilder=dojo.extend(function(b){a._Builder.call(this,b)},a._Builder.prototype,{update:function(){this.prepareHtml()},prepareHtml:function(){for(var a=
this.grid.get,b=this.view.structure.cells,c=0,d;d=b[c];c++)for(var e=0,f;f=d[e];e++)if(f.get=f.get||f.value==void 0&&a,f.markup=this.generateCellMarkup(f,f.cellStyles,f.cellClasses,!1),!this.grid.editable&&f.editable)this.grid.editable=!0},generateHtml:function(a,b){var c=this.getTableArray(),d=this.view.structure.cells,e=this.grid.getItem(b);dojox.grid.util.fire(this.view,"onBeforeRow",[b,d]);for(var f=0,n;n=d[f];f++)if(!n.hidden&&!n.header){c.push(!n.invisible?"<tr>":'<tr class="dojoxGridInvisible">');
for(var o=0,m,q,r,s;m=n[o];o++)q=m.markup,r=m.customClasses=[],s=m.customStyles=[],q[5]=m.format(b,e),q[1]=r.join(" "),q[3]=s.join(";"),c.push.apply(c,q);c.push("</tr>")}c.push("</table>");return c.join("")},decorateEvent:function(a){a.rowNode=this.findRowTarget(a.target);if(!a.rowNode)return!1;a.rowIndex=a.rowNode[e];this.baseDecorateEvent(a);a.cell=this.grid.getCell(a.cellIndex);return!0}});a._HeaderBuilder=dojo.extend(function(b){this.moveable=null;a._Builder.call(this,b)},a._Builder.prototype,
{_skipBogusClicks:!1,overResizeWidth:4,minColWidth:1,update:function(){this.tableMap?this.tableMap.mapRows(this.view.structure.cells):this.tableMap=new a._TableMap(this.view.structure.cells)},generateHtml:function(a,b){var c=this.getTableArray(),d=this.view.structure.cells;dojox.grid.util.fire(this.view,"onBeforeRow",[-1,d]);for(var e=0,f;f=d[e];e++)if(!f.hidden){c.push(!f.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var n=0,o,m;o=f[n];n++){o.customClasses=[];o.customStyles=[];if(this.view.simpleStructure){if(o.draggable)o.headerClasses?
o.headerClasses.indexOf("dojoDndItem")==-1&&(o.headerClasses+=" dojoDndItem"):o.headerClasses="dojoDndItem";o.attrs?o.attrs.indexOf("dndType='gridColumn_")==-1&&(o.attrs+=" dndType='gridColumn_"+this.grid.id+"'"):o.attrs="dndType='gridColumn_"+this.grid.id+"'"}m=this.generateCellMarkup(o,o.headerStyles,o.headerClasses,!0);m[5]=b!=void 0?b:a(o);m[3]=o.customStyles.join(";");m[1]=o.customClasses.join(" ");c.push(m.join(""))}c.push("</tr>")}c.push("</table>");return c.join("")},getCellX:function(a){var b,
e=a.layerX;if(dojo.isMoz||dojo.isIE>=9)b=c(a.target,d("th")),e-=b&&b.offsetLeft||0,a.sourceView.getScrollbarWidth(),dojo._isBodyLtr()||(table=c(b,d("table")),e-=table&&table.offsetLeft||0);b=c(a.target,function(){if(!b||b==a.cellNode)return!1;e+=b.offsetLeft<0?0:b.offsetLeft;return!0});return e},decorateEvent:function(a){this.baseDecorateEvent(a);a.rowIndex=-1;a.cellX=this.getCellX(a);return!0},prepareResize:function(a,b){do{var c=a.cellNode.cellIndex>=0?a.cellNode.cellIndex:dojo.indexOf(a.cellNode.parentNode.cells,
a.cellNode);a.cellNode=c?a.cellNode.parentNode.cells[c+b]:null;a.cellIndex=a.cellNode?this.getCellNodeIndex(a.cellNode):-1}while(a.cellNode&&a.cellNode.style.display=="none");return Boolean(a.cellNode)},canResize:function(a){if(!a.cellNode||a.cellNode.colSpan>1)return!1;a=this.grid.getCell(a.cellIndex);return!a.noresize&&a.canResize()},overLeftResizeArea:function(a){if(dojo.hasClass(dojo.body(),"dojoDndMove"))return!1;if(dojo.isIE){var b=a.target;if(dojo.hasClass(b,"dojoxGridArrowButtonNode")||dojo.hasClass(b,
"dojoxGridArrowButtonChar"))return!1}return dojo._isBodyLtr()?a.cellIndex>0&&a.cellX>0&&a.cellX<this.overResizeWidth&&this.prepareResize(a,-1):a.cellNode&&a.cellX>0&&a.cellX<this.overResizeWidth},overRightResizeArea:function(a){if(dojo.hasClass(dojo.body(),"dojoDndMove"))return!1;if(dojo.isIE){var b=a.target;if(dojo.hasClass(b,"dojoxGridArrowButtonNode")||dojo.hasClass(b,"dojoxGridArrowButtonChar"))return!1}return dojo._isBodyLtr()?a.cellNode&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth:
a.cellIndex>0&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth&&this.prepareResize(a,-1)},domousemove:function(a){if(!this.moveable){var b=this.overRightResizeArea(a)?"dojoxGridColResize":this.overLeftResizeArea(a)?"dojoxGridColResize":"";b&&!this.canResize(a)&&(b="dojoxGridColNoResize");dojo.toggleClass(a.sourceView.headerNode,"dojoxGridColNoResize",b=="dojoxGridColNoResize");dojo.toggleClass(a.sourceView.headerNode,"dojoxGridColResize",b=="dojoxGridColResize");if(dojo.isIE)a.sourceView.headerNode.scrollLeft=
a.sourceView.headerNode.scrollLeft;b&&dojo.stopEvent(a)}},domousedown:function(a){this.moveable||((this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)?this.beginColumnResize(a):(this.grid.onMouseDown(a),this.grid.onMouseOverRow(a)))},doclick:function(a){return this._skipBogusClicks?(dojo.stopEvent(a),!0):!1},colResizeSetup:function(a,b){var c=dojo.contentBox(a.sourceView.headerNode);if(b){this.lineDiv=document.createElement("div");var d=(dojo.position||dojo._abs)(a.sourceView.headerNode,
!0),e=dojo.contentBox(a.sourceView.domNode),f=a.pageX;!dojo._isBodyLtr()&&dojo.isIE<8&&(f-=dojox.html.metrics.getScrollbar().w);dojo.style(this.lineDiv,{top:d.y+"px",left:f+"px",height:e.h+c.h+"px"});dojo.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=f;dojo.body().appendChild(this.lineDiv)}for(var d=[],e=this.tableMap.findOverlappingNodes(a.cellNode),f=0,n;n=e[f];f++)d.push({node:n,index:this.getCellNodeIndex(n),width:n.offsetWidth});e=a.sourceView;n=dojo._isBodyLtr()?1:-1;
for(var o=a.grid.views.views,f=[],m=e.idx+n,q;q=o[m];m+=n)f.push({node:q.headerNode,left:window.parseInt(q.headerNode.style.left)});n=e.headerContentNode.firstChild;return{scrollLeft:a.sourceView.headerNode.scrollLeft,view:e,node:a.cellNode,index:a.cellIndex,w:dojo.contentBox(a.cellNode).w,vw:c.w,table:n,tw:dojo.contentBox(n).w,spanners:d,followers:f}},beginColumnResize:function(a){this.moverDiv=document.createElement("div");dojo.style(this.moverDiv,{position:"absolute",left:0});dojo.body().appendChild(this.moverDiv);
dojo.addClass(this.grid.domNode,"dojoxGridColumnResizing");var b=this.moveable=new dojo.dnd.Moveable(this.moverDiv),c=this.colResizeSetup(a,!0);b.onMove=dojo.hitch(this,"doResizeColumn",c);dojo.connect(b,"onMoveStop",dojo.hitch(this,function(){this.endResizeColumn(c);c.node.releaseCapture&&c.node.releaseCapture();this.moveable.destroy();delete this.moveable;this.moveable=null;dojo.removeClass(this.grid.domNode,"dojoxGridColumnResizing")}));a.cellNode.setCapture&&a.cellNode.setCapture();b.onMouseDown(a)},
doResizeColumn:function(a,b,c){var d=c.l,d={deltaX:d,w:a.w+(dojo._isBodyLtr()?d:-d),vw:a.vw+d,tw:a.tw+d};this.dragRecord={inDrag:a,mover:b,leftTop:c};d.w>=this.minColWidth&&(b?dojo.style(this.lineDiv,"left",this.lineDiv._origLeft+d.deltaX+"px"):this.doResizeNow(a,d))},endResizeColumn:function(a){if(this.dragRecord){var b=this.dragRecord.leftTop,b=dojo._isBodyLtr()?b.l:-b.l;b+=Math.max(a.w+b,this.minColWidth)-(a.w+b);dojo.isWebKit&&a.spanners.length&&(b+=dojo._getPadBorderExtents(a.spanners[0].node).w);
this.doResizeNow(a,{deltaX:b,w:a.w+b,vw:a.vw+b,tw:a.tw+b});delete this.dragRecord}dojo.destroy(this.lineDiv);dojo.destroy(this.moverDiv);dojo.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=!0;a.view.update();this._skipBogusClicks=!1;this.grid.onResizeColumn(a.index)},doResizeNow:function(a,c){a.view.convertColPctToFixed();if(a.view.flexCells&&!a.view.testFlexCells()){var d=b(a.node);if(d)d.style.width=""}for(var e,f,d=0;e=a.spanners[d];d++)if(f=e.width+c.deltaX,f>0)e.node.style.width=
f+"px",a.view.setColWidth(e.index,f);if(dojo._isBodyLtr()||!dojo.isIE)for(d=0;e=a.followers[d];d++)f=e.left+c.deltaX,e.node.style.left=f+"px";a.node.style.width=c.w+"px";a.view.setColWidth(a.index,c.w);a.view.headerNode.style.width=c.vw+"px";a.view.setColumnsWidth(c.tw);if(!dojo._isBodyLtr())a.view.headerNode.scrollLeft=a.scrollLeft+c.deltaX}});a._TableMap=dojo.extend(function(a){this.mapRows(a)},{map:null,mapRows:function(a){if(a.length){this.map=[];var b;for(b=0;a[b];b++)this.map[b]=[];for(var c=
0;b=a[c];c++)for(var d=0,e=0,f,n;f=b[d];d++){for(;this.map[c][e];)e++;this.map[c][e]={c:d,r:c};n=f.rowSpan||1;f=f.colSpan||1;for(var o=0;o<n;o++)for(var m=0;m<f;m++)this.map[c+o][e+m]=this.map[c][e];e+=f}}},dumpMap:function(){for(var a=0,b,c="";b=this.map[a];a++,c="")for(var d=0,e;e=b[d];d++)c+=e.r+","+e.c+"   "},getMapCoords:function(a,b){for(var c=0,d;d=this.map[c];c++)for(var e=0,f;f=d[e];e++)if(f.c==b&&f.r==a)return{j:c,i:e};return{j:-1,i:-1}},getNode:function(a,b,c){return(a=a&&a.rows[b])&&a.cells[c]},
_findOverlappingNodes:function(a,b,c){var g;for(var d=[],b=this.getMapCoords(b,c),c=0,e;e=this.map[c];c++)c!=b.j&&(g=(e=e[b.i])?this.getNode(a,e.r,e.c):null,e=g)&&d.push(e);return d},findOverlappingNodes:function(a){return this._findOverlappingNodes(b(a),a.parentNode.rowIndex>=0?a.parentNode.rowIndex:dojo.indexOf(a.parentNode.parentNode.childNodes,a.parentNode),a.cellIndex>=0?a.cellIndex:dojo.indexOf(a.parentNode.cells,a))}})}());
dojo._hasResource["dojox.grid._View"]||(dojo._hasResource["dojox.grid._View"]=!0,dojo.provide("dojox.grid._View"),function(){dojo.declare("dojox.grid._View",[dijit._Widget,dijit._Templated],{defaultWidth:"18em",viewWidth:"",templateString:'<div class="dojoxGridView" role="presentation">\n\t<div class="dojoxGridHeader" dojoAttachPoint="headerNode" role="presentation">\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em" role="presentation">\n\t\t\t<div dojoAttachPoint="headerContentNode" role="row"></div>\n\t\t</div>\n\t</div>\n\t<input type="checkbox" class="dojoxGridHiddenFocus" dojoAttachPoint="hiddenFocusNode" role="presentation" />\n\t<input type="checkbox" class="dojoxGridHiddenFocus" role="presentation" />\n\t<div class="dojoxGridScrollbox" dojoAttachPoint="scrollboxNode" role="presentation">\n\t\t<div class="dojoxGridContent" dojoAttachPoint="contentNode" hidefocus="hidefocus" role="presentation"></div>\n\t</div>\n</div>\n',
themeable:!1,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:dojox.grid._HeaderBuilder,_contentBuilderClass:dojox.grid._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");dojox.grid.util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);dojox.grid.util.funnelEvents(this.headerNode,this,"doHeaderEvent",
["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!dojo._isBodyLtr())this.headerNodeContainer.style.width=""},destroy:function(){dojo.destroy(this.headerNode);delete this.headerNode;for(var a in this.rowNodes)dojo.destroy(this.rowNodes[a]);this.rowNodes={};this.source&&this.source.destroy();this.inherited(arguments)},focus:function(){dojo.isIE||dojo.isWebKit||dojo.isOpera?
this.hiddenFocusNode.focus():this.scrollboxNode.focus()},setStructure:function(a){a=this.structure=a;this.viewWidth=a.width&&!isNaN(a.width)?a.width+"em":a.width||(a.noscroll?"auto":this.viewWidth);this._onBeforeRow=a.onBeforeRow||function(){};this._onAfterRow=a.onAfterRow||function(){};if(this.noscroll=a.noscroll)this.scrollboxNode.style.overflow="hidden";this.simpleStructure=Boolean(a.cells.length==1);this.testFlexCells();this.updateStructure()},_cleanupRowWidgets:function(a){a&&dojo.forEach(dojo.query("[widgetId]",
a).map(dijit.byNode),function(a){a._destroyOnRemove?(a.destroy(),delete a):a.domNode&&a.domNode.parentNode&&a.domNode.parentNode.removeChild(a.domNode)})},onBeforeRow:function(a,c){this._onBeforeRow(a,c);a>=0&&this._cleanupRowWidgets(this.getRowNode(a))},onAfterRow:function(a,c,d){this._onAfterRow(a,c,d);var e=this.grid;dojo.forEach(dojo.query(".dojoxGridStubNode",d),function(a){if(a&&a.parentNode){var b=a.getAttribute("linkWidget"),c=window.parseInt(dojo.attr(a,"cellIdx"),10);e.getCell(c);(b=dijit.byId(b))?
(a.parentNode.replaceChild(b.domNode,a),b._started||b.startup()):a.innerHTML=""}},this)},testFlexCells:function(){this.flexCells=!1;for(var a=0,c;c=this.structure.cells[a];a++)for(var d=0,e;e=c[d];d++)e.view=this,this.flexCells=this.flexCells||e.isFlex();return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){var a=this.hasVScrollbar(),c=dojo.style(this.scrollboxNode,"overflow");this.noscroll||!c||c=="hidden"?a=!1:c=="scroll"&&(a=
!0);return a?dojox.html.metrics.getScrollbar().w:0},getColumnsWidth:function(){var a=this.headerContentNode;return a&&a.firstChild?a.firstChild.offsetWidth:0},setColumnsWidth:function(a){this.headerContentNode.firstChild.style.width=a+"px";if(this.viewWidth)this.viewWidth=a+"px"},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,dojo._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height=
"";this.renderHeader();if(this._togglingColumn>=0)this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn),this._togglingColumn=-1;var a=this.grid.layout.cells,c=dojo.hitch(this,function(c,d){!dojo._isBodyLtr()&&(d=!d);for(var g=d?-1:1,h=this.header.getCellNodeIndex(c)+g,j=a[h];j&&j.getHeaderNode()&&j.getHeaderNode().style.display=="none";)h+=g,j=a[h];return j?j.getHeaderNode():null});if(this.grid.columnReordering&&this.simpleStructure){this.source&&this.source.destroy();this.bottomMarker&&
dojo.destroy(this.bottomMarker);this.bottomMarker=dojo.byId("dojoxGrid_bottomMarker");this.topMarker&&dojo.destroy(this.topMarker);this.topMarker=dojo.byId("dojoxGrid_topMarker");if(!this.bottomMarker)this.bottomMarker=dojo.create("div",{id:"dojoxGrid_bottomMarker","class":"dojoxGridColPlaceBottom"},dojo.body()),this._hide(this.bottomMarker),this.topMarker=dojo.create("div",{id:"dojoxGrid_topMarker","class":"dojoxGridColPlaceTop"},dojo.body()),this._hide(this.topMarker);this.arrowDim=dojo.contentBox(this.bottomMarker);
var d=dojo.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new dojo.dnd.Source(this.headerContentNode.firstChild.rows[0],{horizontal:!0,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:!1,onMouseDown:dojo.hitch(this,function(a){this.header.decorateEvent(a);if((this.header.overRightResizeArea(a)||this.header.overLeftResizeArea(a))&&this.header.canResize(a)&&!this.header.moveable)this.header.beginColumnResize(a);else{if(this.grid.headerMenu)this.grid.headerMenu.onCancel(!0);
a.button===(dojo.isIE?1:0)&&dojo.dnd.Source.prototype.onMouseDown.call(this.source,a)}}),onMouseOver:dojo.hitch(this,function(a){var b=this.source;b._getChildByEvent(a)&&dojo.dnd.Source.prototype.onMouseOver.apply(b,arguments)}),_markTargetAnchor:dojo.hitch(this,function(a){var b=this.source;if(!(b.current==b.targetAnchor&&b.before==a)){b.targetAnchor&&c(b.targetAnchor,b.before)&&b._removeItemClass(c(b.targetAnchor,b.before),b.before?"After":"Before");dojo.dnd.Source.prototype._markTargetAnchor.call(b,
a);var g=a?b.targetAnchor:c(b.targetAnchor,b.before),a=0;if(!g)g=b.targetAnchor,a=dojo.contentBox(g).w+this.arrowDim.w/2+2;g=(dojo.position||dojo._abs)(g,!0);a=Math.floor(g.x-this.arrowDim.w/2+a);dojo.style(this.bottomMarker,"visibility","visible");dojo.style(this.topMarker,"visibility","visible");dojo.style(this.bottomMarker,{left:a+"px",top:d+g.y+"px"});dojo.style(this.topMarker,{left:a+"px",top:g.y-this.arrowDim.h+"px"});b.targetAnchor&&c(b.targetAnchor,b.before)&&b._addItemClass(c(b.targetAnchor,
b.before),b.before?"After":"Before")}}),_unmarkTargetAnchor:dojo.hitch(this,function(){var a=this.source;a.targetAnchor&&(a.targetAnchor&&c(a.targetAnchor,a.before)&&a._removeItemClass(c(a.targetAnchor,a.before),a.before?"After":"Before"),this._hide(this.bottomMarker),this._hide(this.topMarker),dojo.dnd.Source.prototype._unmarkTargetAnchor.call(a))}),destroy:dojo.hitch(this,function(){dojo.disconnect(this._source_conn);dojo.unsubscribe(this._source_sub);dojo.dnd.Source.prototype.destroy.call(this.source);
this.bottomMarker&&(dojo.destroy(this.bottomMarker),delete this.bottomMarker);this.topMarker&&(dojo.destroy(this.topMarker),delete this.topMarker)}),onDndCancel:dojo.hitch(this,function(){dojo.dnd.Source.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker)})});this._source_conn=dojo.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=dojo.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup()}},_hide:function(a){dojo.style(a,
{left:"-10000px",top:"-10000px",visibility:"hidden"})},_onDndDropBefore:function(a){if(dojo.dnd.manager().target===this.source){this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var c=this.grid.views.views,a=c[a.viewIndex],c=c[this.index];c!=a&&(a.convertColPctToFixed(),c.convertColPctToFixed())}},_onDndDrop:function(a,c){if(dojo.dnd.manager().target!==this.source){if(dojo.dnd.manager().source===this.source)this._removingColumn=!0}else{this._hide(this.bottomMarker);
this._hide(this.topMarker);var d=dojo.marginBox(c[0]).w;if(a.viewIndex!==this.index){var e=this.grid.views.views,f=e[a.viewIndex],e=e[this.index];f.viewWidth&&f.viewWidth!="auto"&&f.setColumnsWidth(f.getColumnsWidth()-d);e.viewWidth&&e.viewWidth!="auto"&&e.setColumnsWidth(e.getColumnsWidth())}d=this.source._targetNode;f=this.source._beforeTarget;!dojo._isBodyLtr()&&(f=!f);var e=this.grid.layout,g=this.index;delete this.source._targetNode;delete this.source._beforeTarget;e.moveColumn(a.viewIndex,g,
c[0]?dojo.attr(c[0],"idx"):null,d?dojo.attr(d,"idx"):null,f)}},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells)this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth;dojox.grid.util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(a){var c=a.name||a.grid.getCellName(a),d=['<div class="dojoxGridSortNode'];a.index!=a.grid.getSortIndex()?
d.push('">'):d=d.concat([" ",a.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown",'"><div class="dojoxGridArrowButtonChar">',a.grid.sortInfo>0?"&#9650;":"&#9660;",'</div><div class="dojoxGridArrowButtonNode" role="presentation"></div>','<div class="dojoxGridColCaption">']);d=d.concat([c,"</div></div>"]);return d.join("")},resize:function(){this.adaptHeight();this.adaptWidth()},hasHScrollbar:function(a){var c=this._hasHScroll||!1;if(this._hasHScroll==void 0||a)this.noscroll?this._hasHScroll=!1:
(a=dojo.style(this.scrollboxNode,"overflow"),this._hasHScroll=a=="hidden"?!1:a=="scroll"?!0:this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);c!==this._hasHScroll&&this.grid.update();return this._hasHScroll},hasVScrollbar:function(a){var c=this._hasVScroll||!1;if(this._hasVScroll==void 0||a)this.noscroll?this._hasVScroll=!1:(a=dojo.style(this.scrollboxNode,"overflow"),this._hasVScroll=a=="hidden"?!1:a=="scroll"?!0:this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);
c!==this._hasVScroll&&this.grid.update();return this._hasVScroll},convertColPctToFixed:function(){var a=!1;this.grid.initialWidth="";var c=dojo.query("th",this.headerContentNode),d=dojo.map(c,function(c,d){var g=c.style.width;dojo.attr(c,"vIdx",d);if(g&&g.slice(-1)=="%")a=!0;else if(g&&g.slice(-2)=="px")return window.parseInt(g,10);return dojo.contentBox(c).w});return a?(dojo.forEach(this.grid.layout.cells,function(a,b){if(a.view==this){var c=a.view.getHeaderCellNode(a.index);if(c&&dojo.hasAttr(c,
"vIdx")){var h=window.parseInt(dojo.attr(c,"vIdx"));this.setColWidth(b,d[h]);dojo.removeAttr(c,"vIdx")}}},this),!0):!1},adaptHeight:function(a){if(!this.grid._autoHeight){var c=this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10)||this.domNode.clientHeight,d=this;if(a||this.noscroll&&function(){var a,b;for(b in d.grid.views.views)if(a=d.grid.views.views[b],a!==d&&a.hasHScrollbar())return!0;return!1}())c-=dojox.html.metrics.getScrollbar().h;dojox.grid.util.setStyleHeightPx(this.scrollboxNode,
c)}this.hasVScrollbar(!0)},adaptWidth:function(){if(this.flexCells)this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth;var a=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();this._removingColumn?(a=Math.min(a,this.getColumnsWidth())+"px",this._removingColumn=!1):a=Math.max(a,this.getColumnsWidth())+"px";this.contentNode.style.width=a;this.hasHScrollbar(!0)},setSize:function(a,c){var d=this.domNode.style,e=this.headerNode.style;if(a)d.width=
a,e.width=a;d.height=c>=0?c+"px":""},renderRow:function(a){var c=this.createRowNode(a);this.buildRow(a,c);this.grid.edit.restore(this,a);return c},createRowNode:function(a){var c=document.createElement("div");c.className=this.classTag+"Row";this instanceof dojox.grid._RowSelector?dojo.attr(c,"role","presentation"):(dojo.attr(c,"role","row"),this.grid.selectionMode!="none"&&dojo.attr(c,"aria-selected","false"));c[dojox.grid.util.gridViewTag]=this.id;c[dojox.grid.util.rowIndexTag]=a;return this.rowNodes[a]=
c},buildRow:function(a,c){this.buildRowContent(a,c);this.styleRow(a,c)},buildRowContent:function(a,c){c.innerHTML=this.content.generateHtml(a,a);if(this.flexCells&&this.contentWidth)c.firstChild.style.width=this.contentWidth;dojox.grid.util.fire(this,"onAfterRow",[a,this.structure.cells,c])},rowRemoved:function(a){a>=0&&this._cleanupRowWidgets(this.getRowNode(a));this.grid.edit.save(this,a);delete this.rowNodes[a]},getRowNode:function(a){return this.rowNodes[a]},getCellNode:function(a,c){var d=this.getRowNode(a);
if(d)return this.content.getCellNode(d,c)},getHeaderCellNode:function(a){if(this.headerContentNode)return this.header.getCellNode(this.headerContentNode,a)},styleRow:function(a,c){c._style=c.style.cssText==void 0?c.getAttribute("style"):c.style.cssText;this.styleRowNode(a,c)},styleRowNode:function(a,c){c&&this.doStyleRowNode(a,c)},doStyleRowNode:function(a,c){this.grid.styleRowNode(a,c)},updateRow:function(a){var c=this.getRowNode(a);if(c)c.style.height="",this.buildRow(a,c);return c},updateRowStyles:function(a){this.styleRowNode(a,
this.getRowNode(a))},lastTop:0,firstScroll:0,doscroll:function(){var a=dojo._isBodyLtr();if(this.firstScroll<2){if(!a&&this.firstScroll==1||a&&this.firstScroll===0){var c=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE)this.headerNodeContainer.style.width=c.w+this.getScrollbarWidth()+"px";else if(dojo.isMoz)this.headerNodeContainer.style.width=c.w-this.getScrollbarWidth()+"px",this.scrollboxNode.scrollLeft=a?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-
this.scrollboxNode.clientWidth}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;a=this.scrollboxNode.scrollTop;a!==this.lastTop&&this.grid.scrollTo(a)},setScrollTop:function(a){this.lastTop=a;this.scrollboxNode.scrollTop=a;return this.scrollboxNode.scrollTop},doContentEvent:function(a){if(this.content.decorateEvent(a))this.grid.onContentEvent(a)},doHeaderEvent:function(a){if(this.header.decorateEvent(a))this.grid.onHeaderEvent(a)},dispatchContentEvent:function(a){return this.content.dispatchEvent(a)},
dispatchHeaderEvent:function(a){return this.header.dispatchEvent(a)},setColWidth:function(a,c){this.grid.setCellWidth(a,c+"px")},update:function(){if(this.domNode){this.content.update();this.grid.update();var a=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=a;this.headerNode.scrollLeft=a}}});dojo.declare("dojox.grid._GridAvatar",dojo.dnd.Avatar,{construct:function(){var a=dojo.doc,c=a.createElement("table");c.cellPadding=c.cellSpacing="0";c.className="dojoxGridDndAvatar";c.style.position=
"absolute";c.style.zIndex=1999;c.style.margin="0px";var d=a.createElement("tbody"),e=a.createElement("tr"),f=a.createElement("td"),g=a.createElement("td");e.className="dojoxGridDndAvatarItem";g.className="dojoxGridDndAvatarItemImage";g.style.width="16px";var h=this.manager.source;if(h.creator)h=h._normalizedCreator(h.getItem(this.manager.nodes[0].id).data,"avatar").node;else{var h=this.manager.nodes[0].cloneNode(!0),j,k;if(h.tagName.toLowerCase()=="tr")j=a.createElement("table"),k=a.createElement("tbody"),
k.appendChild(h),j.appendChild(k),h=j;else if(h.tagName.toLowerCase()=="th")j=a.createElement("table"),k=a.createElement("tbody"),a=a.createElement("tr"),j.cellPadding=j.cellSpacing="0",a.appendChild(h),k.appendChild(a),j.appendChild(k),h=j}h.id="";f.appendChild(h);e.appendChild(g);e.appendChild(f);dojo.style(e,"opacity",0.9);d.appendChild(e);c.appendChild(d);this.node=c;c=dojo.dnd.manager();this.oldOffsetY=c.OFFSET_Y;c.OFFSET_Y=1},destroy:function(){dojo.dnd.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments)}});
var a=dojo.dnd.manager().makeAvatar;dojo.dnd.manager().makeAvatar=function(){return this.source.viewIndex!==void 0&&!dojo.hasClass(dojo.body(),"dijit_a11y")?new dojox.grid._GridAvatar(this):a.call(dojo.dnd.manager())}}());
dojo._hasResource["dojox.grid._RowSelector"]||(dojo._hasResource["dojox.grid._RowSelector"]=!0,dojo.provide("dojox.grid._RowSelector"),dojo.declare("dojox.grid._RowSelector",dojox.grid._View,{defaultWidth:"2em",noscroll:!0,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(a,b){b.innerHTML='<table class="dojoxGridRowbarTable" style="width:'+
(this.contentWidth||0)+'px;height:1px;" border="0" cellspacing="0" cellpadding="0" role="presentation"><tr><td class="dojoxGridRowbarInner">&nbsp;</td></tr></table>'},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){if(!("contentWidth"in this)&&this.contentNode)this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth},doStyleRowNode:function(a,b){var c=["dojoxGridRowbar dojoxGridNonNormalizedCell"];this.grid.rows.isOver(a)&&c.push("dojoxGridRowbarOver");
this.grid.selection.isSelected(a)&&c.push("dojoxGridRowbarSelected");b.className=c.join(" ")},domouseover:function(a){this.grid.onMouseOverRow(a)},domouseout:function(a){if(!this.isIntraRowEvent(a))this.grid.onMouseOutRow(a)}}));
dojo._hasResource["dojox.grid._Layout"]||(dojo._hasResource["dojox.grid._Layout"]=!0,dojo.provide("dojox.grid._Layout"),dojo.declare("dojox.grid._Layout",null,{constructor:function(a){this.grid=a},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(a,b,c,d,e){for(var f=this.structure[a].cells[0],g=this.structure[b].cells[0],h=null,j=h=0,a=0,k;k=f[a];a++)if(k.index==c){h=a;break}h=f.splice(h,1)[0];h.view=this.grid.views.views[b];a=0;for(k=null;k=g[a];a++)if(k.index==d){j=a;break}e||(j+=
1);g.splice(j,0,h);if(c=this.grid.getCell(this.grid.getSortIndex()))c._currentlySorted=this.grid.getSortAsc();this.cells=[];for(a=c=0;b=this.structure[a];a++)for(d=0;e=b.cells[d];d++)for(f=0;k=e[f];f++){k.index=c;this.cells.push(k);if("_currentlySorted"in k)g=c+1,g*=k._currentlySorted?1:-1,this.grid.sortInfo=g,delete k._currentlySorted;c++}dojo.forEach(this.cells,function(a){var b=a.markup[2].split(" ");parseInt(b[1].substring(5))!=a.index&&(b[1]='idx="'+a.index+'"',a.markup[2]=b.join(" "))});this.grid.setupHeaderMenu()},
setColumnVisibility:function(a,b){var c=this.cells[a];if(c.hidden==b){c.hidden=!b;var d=c.view,e=d.viewWidth;if(e&&e!="auto")d._togglingColumn=dojo.marginBox(c.getHeaderNode()).w||0;d.update();return!0}else return!1},addCellDef:function(a,b,c){var d=this,e=function(a){var b=0;a.colSpan>1?b=0:(b=a.width||d._defaultCellProps.width||d.defaultWidth,isNaN(b)||(b+="em"));return b},a={grid:this.grid,subrow:a,layoutIndex:b,index:this.cells.length};if(c&&c instanceof dojox.grid.cells._Base)return b=dojo.clone(c),
a.unitWidth=e(b._props),b=dojo.mixin(b,this._defaultCellProps,c._props,a);b=c.type||c.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||dojox.grid.cells.Cell;a.unitWidth=e(c);return new b(dojo.mixin({},this._defaultCellProps,c,a))},addRowDef:function(a,b){for(var c=[],d=0,e=0,f=!0,g=0,h;h=b[g];g++)if(h=this.addCellDef(a,g,h),c.push(h),this.cells.push(h),f&&h.relWidth)d+=h.relWidth;else if(h.width)h=h.width,typeof h=="string"&&h.slice(-1)=="%"?e+=window.parseInt(h,10):h=="auto"&&
(f=!1);d&&f&&dojo.forEach(c,function(a){if(a.relWidth)a.width=a.unitWidth=a.relWidth/d*(100-e)+"%"});return c},addRowsDef:function(a){var b=[];if(dojo.isArray(a))if(dojo.isArray(a[0]))for(var c=0,d;a&&(d=a[c]);c++)b.push(this.addRowDef(c,d));else b.push(this.addRowDef(0,a));return b},addViewDef:function(a){this._defaultCellProps=a.defaultCell||{};a.width&&a.width=="auto"&&delete a.width;return dojo.mixin({},a,{cells:this.addRowsDef(a.rows||a.cells)})},setStructure:function(a){this.fieldIndex=0;this.cells=
[];var b=this.structure=[];if(this.grid.rowSelector){var c={type:dojox._scopeName+".grid._RowSelector"};if(dojo.isString(this.grid.rowSelector)){var d=this.grid.rowSelector;d=="false"?c=null:d!="true"&&(c.width=d)}else this.grid.rowSelector||(c=null);c&&b.push(this.addViewDef(c))}c=function(a){return a!==null&&dojo.isObject(a)&&("cells"in a||"rows"in a||"type"in a&&!("name"in a||"field"in a||"get"in a))};if(dojo.isArray(a)){for(var d=!1,e=0,f;f=a[e];e++)if(c(f)){d=!0;break}if(d)for(e=0;f=a[e];e++)dojo.isArray(f)&&
(dojo.isArray(f[0])||"name"in f[0]||"field"in f[0]||"get"in f[0])?b.push(this.addViewDef({cells:f})):c(f)&&b.push(this.addViewDef(f));else b.push(this.addViewDef({cells:a}))}else c(a)&&b.push(this.addViewDef(a));this.cellCount=this.cells.length;this.grid.setupHeaderMenu()}}));
dojo._hasResource["dojox.grid._ViewManager"]||(dojo._hasResource["dojox.grid._ViewManager"]=!0,dojo.provide("dojox.grid._ViewManager"),dojo.declare("dojox.grid._ViewManager",null,{constructor:function(a){this.grid=a},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(a){a.idx=this.views.length;this.views.push(a)},destroyViews:function(){for(var a=0,b;b=this.views[a];a++)b.destroy();this.views=[]},getContentNodes:function(){for(var a=
[],b=0,c;c=this.views[b];b++)a.push(c.contentNode);return a},forEach:function(a){for(var b=0,c;c=this.views[b];b++)a(c,b)},onEach:function(a,b){for(var b=b||[],c=0,d;d=this.views[c];c++)a in d&&d[a].apply(d,b)},normalizeHeaderNodeHeight:function(){for(var a=[],b=0,c;c=this.views[b];b++)c.headerContentNode.firstChild&&a.push(c.headerContentNode);this.normalizeRowNodeHeights(a)},normalizeRowNodeHeights:function(a){var b=0,c=[];if(this.grid.rowHeight)b=this.grid.rowHeight;else{if(a.length<=1)return;
for(var d=0,e;e=a[d];d++)if(!dojo.hasClass(e,"dojoxGridNonNormalizedCell"))c[d]=e.firstChild.offsetHeight,b=Math.max(b,c[d]);b=b>=0?b:0;dojo.isMoz&&b&&b++}for(d=0;e=a[d];d++)if(c[d]!=b)e.firstChild.style.height=b+"px"},resetHeaderNodeHeight:function(){for(var a=0,b;b=this.views[a];a++)if(b=b.headerContentNode.firstChild)b.style.height=""},renormalizeRow:function(a){for(var b=[],c=0,d,e;(d=this.views[c])&&(e=d.getRowNode(a));c++)e.firstChild.style.height="",b.push(e);this.normalizeRowNodeHeights(b)},
getViewWidth:function(a){return this.views[a].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(a){a.headerContentNode.style.height=""});var a=0;this.forEach(function(b){a=Math.max(b.headerNode.offsetHeight,a)});return a},measureContent:function(){var a=0;this.forEach(function(b){a=Math.max(b.domNode.offsetHeight,a)});return a},findClient:function(){var a=this.grid.elasticView||-1;if(a<0)for(var b=1,c;c=this.views[b];b++)if(c.viewWidth){for(b=
1;c=this.views[b];b++)if(!c.viewWidth){a=b;break}break}a<0&&(a=Math.floor(this.views.length/2));return a},arrange:function(a,b){var c,d,e,f=this.views.length,g=b<=0?f:this.findClient(),h=function(a,b){var c=a.domNode.style,d=a.headerNode.style;dojo._isBodyLtr()?(c.left=b+"px",d.left=b+"px"):(c.right=b+"px",dojo.isMoz?(d.right=b+a.getScrollbarWidth()+"px",d.width=parseInt(d.width,10)-a.getScrollbarWidth()+"px"):d.right=b+"px");c.top="0px";d.top=0};for(c=0;(d=this.views[c])&&c<g;c++)e=this.getViewWidth(c),
d.setSize(e,0),h(d,a),e=d.headerContentNode&&d.headerContentNode.firstChild?d.getColumnsWidth()+d.getScrollbarWidth():d.domNode.offsetWidth,a+=e;c++;for(var j=b,k=f-1;(d=this.views[k])&&c<=k;k--)e=this.getViewWidth(k),d.setSize(e,0),e=d.domNode.offsetWidth,j-=e,h(d,j);g<f&&(d=this.views[g],e=Math.max(1,j-a),d.setSize(e+"px",0),h(d,a));return a},renderRow:function(a,b,c){for(var d=[],e=0,f,g;(f=this.views[e])&&(g=b[e]);e++)f=f.renderRow(a),g.appendChild(f),d.push(f);c||this.normalizeRowNodeHeights(d)},
rowRemoved:function(a){this.onEach("rowRemoved",[a])},updateRow:function(a,b){for(var c=0,d;d=this.views[c];c++)d.updateRow(a);b||this.renormalizeRow(a)},updateRowStyles:function(a){this.onEach("updateRowStyles",[a])},setScrollTop:function(a){for(var b=a,c=0,d;d=this.views[c];c++)if(b=d.setScrollTop(a),dojo.isIE&&d.headerNode&&d.scrollboxNode)d.headerNode.scrollLeft=d.scrollboxNode.scrollLeft;return b},getFirstScrollingView:function(){for(var a=0,b;b=this.views[a];a++)if(b.hasHScrollbar()||b.hasVScrollbar())return b;
return null}}));
dojo._hasResource["dojox.grid._RowManager"]||(dojo._hasResource["dojox.grid._RowManager"]=!0,dojo.provide("dojox.grid._RowManager"),function(){dojo.declare("dojox.grid._RowManager",null,{constructor:function(a){this.grid=a},linesToEms:2,overRow:-2,prepareStylingRow:function(a,b){return{index:a,node:b,odd:Boolean(a&1),selected:!!this.grid.selection.isSelected(a),over:this.isOver(a),customStyles:"",customClasses:"dojoxGridRow"}},styleRowNode:function(a,b){var c=this.prepareStylingRow(a,b);this.grid.onStyleRow(c);
this.applyStyles(c)},applyStyles:function(a){a.node.className=a.customClasses;var b=a.node.style.height,c=a.node,d=a.customStyles+";"+(a.node._style||"");c.style.cssText==void 0?c.setAttribute("style",d):c.style.cssText=d;a.node.style.height=b},updateStyles:function(a){this.grid.updateRowStyles(a)},setOverRow:function(a){var b=this.overRow;this.overRow=a;b!=this.overRow&&(dojo.isString(b)||b>=0)&&this.updateStyles(b);this.updateStyles(this.overRow)},isOver:function(a){return this.overRow==a&&!dojo.hasClass(this.grid.domNode,
"dojoxGridColumnResizing")}})}());
dojo._hasResource["dojox.grid._FocusManager"]||(dojo._hasResource["dojox.grid._FocusManager"]=!0,dojo.provide("dojox.grid._FocusManager"),dojo.declare("dojox.grid._FocusManager",null,{constructor:function(a){this.grid=a;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(dojo.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(dojo.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(dojo.connect(this.grid.domNode,
"oncontextmenu",this,"doContextMenu"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(dojo.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(dojo.connect(this.grid,"postrender",this,"_delayedHeaderFocus"))},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);dojo.forEach(this._headerConnects,dojo.disconnect);
delete this.grid;delete this.cell},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:!1,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._initColumnHeaders()},isFocusCell:function(a,b){return this.cell==a&&this.rowIndex==b},isLastFocusCell:function(){return this.cell?this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-
1:!1},isFirstFocusCell:function(){return this.cell?this.rowIndex===0&&this.cell.index===0:!1},isNoFocusCell:function(){return this.rowIndex<0||!this.cell},isNavHeader:function(){return!!this._colHeadNode},getHeaderIndex:function(){return this._colHeadNode?dojo.indexOf(this._findHeaderCells(),this._colHeadNode):-1},_focusifyCellNode:function(a){var b=this.cell&&this.cell.getNode(this.rowIndex);if(b&&(dojo.toggleClass(b,this.focusClass,a),a)){a=this.scrollIntoView();try{if(!this.grid.edit.isEditing()&&
(dojox.grid.util.fire(b,"focus"),a))this.cell.view.scrollboxNode.scrollLeft=a}catch(c){}}},_delayedCellFocus:function(){if(!this.isNavHeader()&&this.grid._focused){var a=this.cell&&this.cell.getNode(this.rowIndex);if(a)try{this.grid.edit.isEditing()||(dojo.toggleClass(a,this.focusClass,!0),this.blurHeader(),dojox.grid.util.fire(a,"focus"))}catch(b){}}},_delayedHeaderFocus:function(){this.isNavHeader()&&(this.focusHeader(),this.grid.domNode.focus())},_initColumnHeaders:function(){dojo.forEach(this._headerConnects,
dojo.disconnect);this._headerConnects=[];for(var a=this._findHeaderCells(),b=0;b<a.length;b++)this._headerConnects.push(dojo.connect(a[b],"onfocus",this,"doColHeaderFocus")),this._headerConnects.push(dojo.connect(a[b],"onblur",this,"doColHeaderBlur"))},_findHeaderCells:function(){for(var a=dojo.query("th",this.grid.viewsHeaderNode),b=[],c=0;c<a.length;c++){var d=a[c],e=dojo.hasAttr(d,"tabIndex"),f=dojo.attr(d,"tabIndex");e&&f<0&&b.push(d)}return b},_setActiveColHeader:function(a,b,c){dojo.attr(this.grid.domNode,
"aria-activedescendant",a.id);c!=null&&c>=0&&c!=b&&dojo.toggleClass(this._findHeaderCells()[c],this.focusClass,!1);dojo.toggleClass(a,this.focusClass,!0);this._colHeadNode=a;this._colHeadFocusIdx=b;this._scrollHeader(this._colHeadFocusIdx)},scrollIntoView:function(){var a=this.cell?this._scrollInfo(this.cell):null;if(!a||!a.s)return null;var b=this.grid.scroller.findScrollTop(this.rowIndex);if(a.n&&a.sr)if(a.n.offsetLeft+a.n.offsetWidth>a.sr.l+a.sr.w)a.s.scrollLeft=a.n.offsetLeft+a.n.offsetWidth-
a.sr.w;else if(a.n.offsetLeft<a.sr.l)a.s.scrollLeft=a.n.offsetLeft;a.r&&a.sr&&(b+a.r.offsetHeight>a.sr.t+a.sr.h?this.grid.setScrollTop(b+a.r.offsetHeight-a.sr.h):b<a.sr.t&&this.grid.setScrollTop(b));return a.s.scrollLeft},_scrollInfo:function(a,b){if(a){var c=a.view.scrollboxNode,d={w:c.clientWidth,l:c.scrollLeft,t:c.scrollTop,h:c.clientHeight},e=a.view.getRowNode(this.rowIndex);return{c:a,s:c,sr:d,n:b?b:a.getNode(this.rowIndex),r:e}}return null},_scrollHeader:function(a){var b=null;if(this._colHeadNode)var c=
this.grid.getCell(a),b=this._scrollInfo(c,c.getNode(0));if(b&&b.s&&b.sr&&b.n)if(b.n.offsetLeft+b.n.offsetWidth>b.sr.l+b.sr.w)b.s.scrollLeft=b.n.offsetLeft+b.n.offsetWidth-b.sr.w;else if(b.n.offsetLeft<b.sr.l)b.s.scrollLeft=b.n.offsetLeft;else if(dojo.isIE<=7&&c&&c.view.headerNode)c.view.headerNode.scrollLeft=b.s.scrollLeft},_isHeaderHidden:function(){var a=this.focusView;if(!a)for(var b=0,c;c=this.grid.views.views[b];b++)if(c.headerNode){a=c;break}return a&&dojo.getComputedStyle(a.headerNode).display==
"none"},colSizeAdjust:function(a,b,c){var d=this._findHeaderCells(),e=this.focusView;if(!e)for(var f=0,g;g=this.grid.views.views[f];f++)if(g.header.tableMap.map){e=g;break}f=d[b];if(e&&!(b==d.length-1&&b===0))e.content.baseDecorateEvent(a),a.cellNode=f,a.cellIndex=e.content.getCellNodeIndex(a.cellNode),a.cell=a.cellIndex>=0?this.grid.getCell(a.cellIndex):null,e.header.canResize(a)&&(b={l:c},a=e.header.colResizeSetup(a,!1),e.header.doResizeColumn(a,null,b),e.update())},styleRow:function(){},setFocusIndex:function(a,
b){this.setFocusCell(this.grid.getCell(b),a)},setFocusCell:function(a,b){if(a&&!this.isFocusCell(a,b))this.tabbingOut=!1,this._colHeadNode&&this.blurHeader(),this._colHeadNode=this._colHeadFocusIdx=null,this.focusGridView(),this._focusifyCellNode(!1),this.cell=a,this.rowIndex=b,this._focusifyCellNode(!0);if(dojo.isOpera)setTimeout(dojo.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);else this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){if(this.cell){var a=this.rowIndex,b=
this.cell.index+1,c=this.grid.layout.cellCount-1,d=this.grid.rowCount-1;b>c&&(b=0,a++);a>d&&(b=c,a=d);if(this.grid.edit.isEditing()&&(c=this.grid.getCell(b),!this.isLastFocusCell()&&(!c.editable||this.grid.canEdit&&!this.grid.canEdit(c,a)))){this.cell=c;this.rowIndex=a;this.next();return}this.setFocusIndex(a,b)}},previous:function(){if(this.cell){var a=this.rowIndex||0,b=(this.cell.index||0)-1;b<0&&(b=this.grid.layout.cellCount-1,a--);a<0&&(b=a=0);if(this.grid.edit.isEditing()){var c=this.grid.getCell(b);
if(!this.isFirstFocusCell()&&!c.editable){this.cell=c;this.rowIndex=a;this.previous();return}}this.setFocusIndex(a,b)}},move:function(a,b){var c=b<0?-1:1;if(this.isNavHeader()){var d=this._findHeaderCells(),e=currentIdx=dojo.indexOf(d,this._colHeadNode);for(currentIdx+=b;currentIdx>=0&&currentIdx<d.length&&d[currentIdx].style.display=="none";)currentIdx+=c;currentIdx>=0&&currentIdx<d.length&&this._setActiveColHeader(d[currentIdx],currentIdx,e)}else if(this.cell){var f=this.grid.scroller,d=this.rowIndex,
e=this.grid.rowCount-1,g=Math.min(e,Math.max(0,d+a));a&&(a>0?g>f.getLastPageRow(f.page)&&this.grid.setScrollTop(this.grid.scrollTop+f.findScrollTop(g)-f.findScrollTop(d)):a<0&&g<=f.getPageRow(f.page)&&this.grid.setScrollTop(this.grid.scrollTop-f.findScrollTop(d)-f.findScrollTop(g)));for(var f=this.grid.layout.cellCount-1,h=this.cell.index,j=Math.min(f,Math.max(0,h+b)),k=this.grid.getCell(j);j>=0&&j<f&&k&&k.hidden===!0;)j+=c,k=this.grid.getCell(j);if(!k||k.hidden===!0)j=h;c=k.getNode(g);!c&&a?g+a>=
0&&g+a<=e&&this.move(a>0?++a:--a,b):(!c||dojo.style(c,"display")==="none")&&b?j+a>=0&&j+a<=f&&this.move(a,b>0?++b:--b):(this.setFocusIndex(g,j),a&&this.grid.updateRow(d))}},previousKey:function(a){if(this.grid.edit.isEditing())dojo.stopEvent(a),this.previous();else if(!this.isNavHeader()&&!this._isHeaderHidden())this.grid.domNode.focus(),dojo.stopEvent(a);else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null)dojo.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,
!1),this._colHeadFocusIdx=null;this._focusifyCellNode(!1)}},nextKey:function(a){a.target===this.grid.domNode&&this._colHeadFocusIdx==null?(this.focusHeader(),dojo.stopEvent(a)):this.isNavHeader()?(this.blurHeader(),this.findAndFocusGridCell()||this.tabOut(this.grid.lastFocusNode),this._colHeadNode=this._colHeadFocusIdx=null):this.grid.edit.isEditing()?(dojo.stopEvent(a),this.next()):this.tabOut(this.grid.lastFocusNode)},tabOut:function(a){this.tabbingOut=!0;a.focus()},focusGridView:function(){dojox.grid.util.fire(this.focusView,
"focus")},focusGrid:function(){this.focusGridView();this._focusifyCellNode(!0)},findAndFocusGridCell:function(){var a=!0,b=this.grid.rowCount===0;this.isNoFocusCell()&&!b?(b=0,this.grid.getCell(b).hidden&&(b=this.isNavHeader()?this._colHeadFocusIdx:0),this.setFocusIndex(0,b)):this.cell&&!b?(this.focusView&&!this.focusView.rowNodes[this.rowIndex]&&this.grid.scrollToRow(this.rowIndex),this.focusGrid()):a=!1;this._colHeadNode=this._colHeadFocusIdx=null;return a},focusHeader:function(){var a=this._findHeaderCells(),
b=this._colHeadFocusIdx;if(this._isHeaderHidden())this.findAndFocusGridCell();else if(!this._colHeadFocusIdx)this._colHeadFocusIdx=this.isNoFocusCell()?0:this.cell.index;for(this._colHeadNode=a[this._colHeadFocusIdx];this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<a.length&&this._colHeadNode.style.display=="none";)this._colHeadFocusIdx++,this._colHeadNode=a[this._colHeadFocusIdx];if(this._colHeadNode&&this._colHeadNode.style.display!="none"){if(this.headerMenu&&this._contextMenuBindNode!=
this.grid.domNode)this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode),this.headerMenu.bindDomNode(this.grid.domNode),this._contextMenuBindNode=this.grid.domNode;this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,b);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(!1)}else this.findAndFocusGridCell()},blurHeader:function(){dojo.removeClass(this._colHeadNode,this.focusClass);dojo.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==
this.grid.domNode){var a=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(a);this._contextMenuBindNode=a}},doFocus:function(a){if(!(a&&a.target!=a.currentTarget))this.tabbingOut||this.focusHeader(),this.tabbingOut=!1;dojo.stopEvent(a)},doBlur:function(a){dojo.stopEvent(a)},doContextMenu:function(a){this.headerMenu||dojo.stopEvent(a)},doLastNodeFocus:function(a){this.tabbingOut?this._focusifyCellNode(!1):this.grid.rowCount>0?(this.isNoFocusCell()&&
this.setFocusIndex(0,0),this._focusifyCellNode(!0)):this.focusHeader();this.tabbingOut=!1;dojo.stopEvent(a)},doLastNodeBlur:function(a){dojo.stopEvent(a)},doColHeaderFocus:function(a){this._setActiveColHeader(a.target,dojo.attr(a.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());dojo.stopEvent(a)},doColHeaderBlur:function(a){dojo.toggleClass(a.target,this.focusClass,!1)}}));
dojo._hasResource["dojox.grid._EditManager"]||(dojo._hasResource["dojox.grid._EditManager"]=!0,dojo.provide("dojox.grid._EditManager"),dojo.declare("dojox.grid._EditManager",null,{constructor:function(a){this.grid=a;this.connections=dojo.isIE?[dojo.connect(document.body,"onfocus",dojo.hitch(this,"_boomerangFocus"))]:[dojo.connect(this.grid,"onBlur",this,"apply")]},info:{},destroy:function(){dojo.forEach(this.connections,dojo.disconnect)},cellFocus:function(a,b){this.grid.singleClickEdit||this.isEditRow(b)?
this.setEditCell(a,b):this.apply();(this.isEditing()||a&&a.editable&&a.alwaysEditing)&&this._focusEditor(a,b)},rowClick:function(a){this.isEditing()&&!this.isEditRow(a.rowIndex)&&this.apply()},styleRow:function(a){a.index==this.info.rowIndex&&(a.customClasses+=" dojoxGridRowEditing")},dispatchEvent:function(a){var b=a.cell;return(b=b&&b.editable?b:0)&&b.dispatchEvent(a.dispatch,a)},isEditing:function(){return this.info.rowIndex!==void 0},isEditCell:function(a,b){return this.info.rowIndex===a&&this.info.cell.index==
b},isEditRow:function(a){return this.info.rowIndex===a},setEditCell:function(a,b){!this.isEditCell(b,a.index)&&this.grid.canEdit&&this.grid.canEdit(a,b)&&this.start(a,b,this.isEditRow(b)||a.editable)},_focusEditor:function(a,b){dojox.grid.util.fire(a,"focus",[b])},focusEditor:function(){this.isEditing()&&this._focusEditor(this.info.cell,this.info.rowIndex)},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){if(this._shouldCatchBoomerang())this.grid.focus.focusGrid(),
this.focusEditor(),this._catchBoomerang=0},_doCatchBoomerang:function(){if(dojo.isIE)this._catchBoomerang=(new Date).getTime()+this._boomerangWindow},start:function(a,b,c){this.grid.beginUpdate();this.editorApply();this.isEditing()&&!this.isEditRow(b)&&(this.applyRowEdit(),this.grid.updateRow(b));c?(this.info={cell:a,rowIndex:b},this.grid.doStartEdit(a,b),this.grid.updateRow(b)):this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(a,b);this._doCatchBoomerang()},_editorDo:function(a){var b=
this.info.cell;if(b&&b.editable)b[a](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(a,b,c){this.grid.canEdit(b,c)&&this.grid.doApplyCellEdit(a,c,b.field)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field)},apply:function(){if(this.isEditing())this.grid.beginUpdate(),this.editorApply(),this.applyRowEdit(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),
this._doCatchBoomerang()},cancel:function(){if(this.isEditing())this.grid.beginUpdate(),this.editorCancel(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang()},save:function(a,b){var c=this.info.cell;this.isEditRow(a)&&(!b||c.view==b)&&c.editable&&c.save(c,this.info.rowIndex)},restore:function(a,b){var c=this.info.cell;this.isEditRow(b)&&c.view==a&&c.editable&&c.restore(c,this.info.rowIndex)}}));
dojo._hasResource["dojox.grid.Selection"]||(dojo._hasResource["dojox.grid.Selection"]=!0,dojo.provide("dojox.grid.Selection"),dojo.declare("dojox.grid.Selection",null,{constructor:function(a){this.grid=a;this.selected=[];this.setMode(a.selectionMode)},mode:"extended",selected:null,updating:0,selectedIndex:-1,setMode:function(a){this.selected.length&&this.deselectAll();this.mode=a!="extended"&&a!="multiple"&&a!="single"&&a!="none"?"extended":a},onCanSelect:function(a){return this.grid.onCanSelect(a)},
onCanDeselect:function(a){return this.grid.onCanDeselect(a)},onSelected:function(){},onDeselected:function(){},onChanging:function(){},onChanged:function(){},isSelected:function(a){return this.mode=="none"?!1:this.selected[a]},getFirstSelected:function(){if(!this.selected.length||this.mode=="none")return-1;for(var a=0,b=this.selected.length;a<b;a++)if(this.selected[a])return a;return-1},getNextSelected:function(a){if(this.mode=="none")return-1;a+=1;for(var b=this.selected.length;a<b;a++)if(this.selected[a])return a;
return-1},getSelected:function(){for(var a=[],b=0,c=this.selected.length;b<c;b++)this.selected[b]&&a.push(b);return a},getSelectedCount:function(){for(var a=0,b=0;b<this.selected.length;b++)this.selected[b]&&a++;return a},_beginUpdate:function(){if(this.updating===0)this.onChanging();this.updating++},_endUpdate:function(){this.updating--;if(this.updating===0)this.onChanged()},select:function(a){this.mode!="none"&&(this.mode!="multiple"?(this.deselectAll(a),this.addToSelection(a)):this.toggleSelect(a))},
addToSelection:function(a){if(this.mode!="none")if(dojo.isArray(a))dojo.forEach(a,this.addToSelection,this);else if(a=Number(a),this.selected[a])this.selectedIndex=a;else if(this.onCanSelect(a)!==!1){this.selectedIndex=a;var b=this.grid.getRowNode(a);b&&dojo.attr(b,"aria-selected","true");this._beginUpdate();this.selected[a]=!0;this.onSelected(a);this._endUpdate()}},deselect:function(a){if(this.mode!="none")if(dojo.isArray(a))dojo.forEach(a,this.deselect,this);else{a=Number(a);if(this.selectedIndex==
a)this.selectedIndex=-1;if(this.selected[a]&&this.onCanDeselect(a)!==!1){var b=this.grid.getRowNode(a);b&&dojo.attr(b,"aria-selected","false");this._beginUpdate();delete this.selected[a];this.onDeselected(a);this._endUpdate()}}},setSelected:function(a,b){this[b?"addToSelection":"deselect"](a)},toggleSelect:function(a){dojo.isArray(a)?dojo.forEach(a,this.toggleSelect,this):this.setSelected(a,!this.selected[a])},_range:function(a,b,c){var d=a>=0?a:b,a=b;d>a&&(a=d,d=b);for(b=d;b<=a;b++)c(b)},selectRange:function(a,
b){this._range(a,b,dojo.hitch(this,"addToSelection"))},deselectRange:function(a,b){this._range(a,b,dojo.hitch(this,"deselect"))},insert:function(a){this.selected.splice(a,0,!1);this.selectedIndex>=a&&this.selectedIndex++},remove:function(a){this.selected.splice(a,1);this.selectedIndex>=a&&this.selectedIndex--},deselectAll:function(a){for(var b in this.selected)b!=a&&this.selected[b]===!0&&this.deselect(b)},clickSelect:function(a,b,c){if(this.mode!="none"){this._beginUpdate();if(this.mode!="extended")this.select(a);
else{var d=this.selectedIndex;b||this.deselectAll(a);c?this.selectRange(d,a):b?this.toggleSelect(a):this.addToSelection(a)}this._endUpdate()}},clickSelectEvent:function(a){this.clickSelect(a.rowIndex,dojo.isCopyKey(a),a.shiftKey)},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate()}}));
dojo._hasResource["dojox.grid._Events"]||(dojo._hasResource["dojox.grid._Events"]=!0,dojo.provide("dojox.grid._Events"),dojo.declare("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(a){this.dispatchKeyEvent(a)},onContentEvent:function(a){this.dispatchContentEvent(a)},onHeaderEvent:function(a){this.dispatchHeaderEvent(a)},onStyleRow:function(a){a.customClasses+=(a.odd?" dojoxGridRowOdd":"")+(a.selected?" dojoxGridRowSelected":"")+(a.over?" dojoxGridRowOver":"");this.focus.styleRow(a);
this.edit.styleRow(a)},onKeyDown:function(a){if(!a.altKey&&!a.metaKey){var b=dojo.keys,c;switch(a.keyCode){case b.ESCAPE:this.edit.cancel();break;case b.ENTER:if(!this.edit.isEditing()){c=this.focus.getHeaderIndex();if(c>=0){this.setSortIndex(c);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(a),a.shiftKey);dojo.stopEvent(a)}a.shiftKey||(b=this.edit.isEditing(),this.edit.apply(),b||this.edit.setEditCell(this.focus.cell,this.focus.rowIndex));this.edit.isEditing()||((this.focus.focusView||
this.views.views[0]).content.decorateEvent(a),this.onRowClick(a),dojo.stopEvent(a));break;case b.SPACE:if(!this.edit.isEditing()){c=this.focus.getHeaderIndex();if(c>=0){this.setSortIndex(c);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(a),a.shiftKey);dojo.stopEvent(a)}break;case b.TAB:this.focus[a.shiftKey?"previousKey":"nextKey"](a);break;case b.LEFT_ARROW:case b.RIGHT_ARROW:if(!this.edit.isEditing()){var d=a.keyCode;dojo.stopEvent(a);c=this.focus.getHeaderIndex();c>=0&&
a.shiftKey&&a.ctrlKey?this.focus.colSizeAdjust(a,c,(d==b.LEFT_ARROW?-1:1)*5):(a=d==b.LEFT_ARROW?1:-1,dojo._isBodyLtr()&&(a*=-1),this.focus.move(0,a))}break;case b.UP_ARROW:!this.edit.isEditing()&&this.focus.rowIndex!==0&&(dojo.stopEvent(a),this.focus.move(-1,0));break;case b.DOWN_ARROW:!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount&&(dojo.stopEvent(a),this.focus.move(1,0));break;case b.PAGE_UP:!this.edit.isEditing()&&this.focus.rowIndex!==0&&(dojo.stopEvent(a),this.focus.rowIndex!=this.scroller.firstVisibleRow+
1?this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1)),this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)));break;case b.PAGE_DOWN:!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount&&(dojo.stopEvent(a),this.focus.rowIndex!=this.scroller.lastVisibleRow-1?this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+
1)),this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0)))}}},onMouseOver:function(a){a.rowIndex==-1?this.onHeaderCellMouseOver(a):this.onCellMouseOver(a)},onMouseOut:function(a){a.rowIndex==-1?this.onHeaderCellMouseOut(a):this.onCellMouseOut(a)},onMouseDown:function(a){a.rowIndex==-1?this.onHeaderCellMouseDown(a):this.onCellMouseDown(a)},onMouseOverRow:function(a){this.rows.isOver(a.rowIndex)||(this.rows.setOverRow(a.rowIndex),a.rowIndex==-1?this.onHeaderMouseOver(a):this.onRowMouseOver(a))},
onMouseOutRow:function(a){if(this.rows.isOver(-1))this.onHeaderMouseOut(a);else this.rows.isOver(-2)||(this.rows.setOverRow(-2),this.onRowMouseOut(a))},onMouseDownRow:function(a){if(a.rowIndex!=-1)this.onRowMouseDown(a)},onCellMouseOver:function(a){a.cellNode&&dojo.addClass(a.cellNode,this.cellOverClass)},onCellMouseOut:function(a){a.cellNode&&dojo.removeClass(a.cellNode,this.cellOverClass)},onCellMouseDown:function(){},onCellClick:function(a){this._click[0]=this._click[1];this._click[1]=a;this.edit.isEditCell(a.rowIndex,
a.cellIndex)||this.focus.setFocusCell(a.cell,a.rowIndex);this.onRowClick(a)},onCellDblClick:function(a){this._click.length>1&&dojo.isIE?this.edit.setEditCell(this._click[1].cell,this._click[1].rowIndex):this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex?this.edit.setEditCell(this._click[0].cell,this._click[0].rowIndex):this.edit.setEditCell(a.cell,a.rowIndex);this.onRowDblClick(a)},onCellContextMenu:function(a){this.onRowContextMenu(a)},onCellFocus:function(a,b){this.edit.cellFocus(a,
b)},onRowClick:function(a){this.edit.rowClick(a);this.selection.clickSelectEvent(a)},onRowDblClick:function(){},onRowMouseOver:function(){},onRowMouseOut:function(){},onRowMouseDown:function(){},onRowContextMenu:function(a){dojo.stopEvent(a)},onHeaderMouseOver:function(){},onHeaderMouseOut:function(){},onHeaderCellMouseOver:function(a){a.cellNode&&dojo.addClass(a.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(a){a.cellNode&&dojo.removeClass(a.cellNode,this.cellOverClass)},onHeaderCellMouseDown:function(){},
onHeaderClick:function(){},onHeaderCellClick:function(a){this.setSortIndex(a.cell.index);this.onHeaderClick(a)},onHeaderDblClick:function(){},onHeaderCellDblClick:function(a){this.onHeaderDblClick(a)},onHeaderCellContextMenu:function(a){this.onHeaderContextMenu(a)},onHeaderContextMenu:function(a){this.headerMenu||dojo.stopEvent(a)},onStartEdit:function(){},onApplyCellEdit:function(){},onCancelEdit:function(){},onApplyEdit:function(){},onCanSelect:function(){return!0},onCanDeselect:function(){return!0},
onSelected:function(a){this.updateRowStyles(a)},onDeselected:function(a){this.updateRowStyles(a)},onSelectionChanged:function(){}}));
dojo._hasResource["dojox.grid._Grid"]||(dojo._hasResource["dojox.grid._Grid"]=!0,dojo.provide("dojox.grid._Grid"),function(){if(!dojo.isCopyKey)dojo.isCopyKey=dojo.dnd.getCopyKeyState;dojo.declare("dojox.grid._Grid",[dijit._Widget,dijit._Templated,dojox.grid._Events],{templateString:'<div hidefocus="hidefocus" role="grid" dojoAttachEvent="onmouseout:_mouseOut">\n\t<div class="dojoxGridMasterHeader" dojoAttachPoint="viewsHeaderNode" role="presentation"></div>\n\t<div class="dojoxGridMasterView" dojoAttachPoint="viewsNode" role="presentation"></div>\n\t<div class="dojoxGridMasterMessages" style="display: none;" dojoAttachPoint="messagesNode"></div>\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\n</div>\n',classTag:"dojoxGrid",
rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:!1,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:!0,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:!1,selectionMode:"extended",rowSelector:"",columnReordering:!1,headerMenu:null,placeholderLabel:"GridColumns",selectable:!1,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:!0,formatterScope:null,
editable:!1,sortInfo:0,themeable:!0,_placeholders:null,_layoutClass:dojox.grid._Layout,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex"))this.domNode.tabIndex="0";this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");dojox.html.metrics.initOnFontResize();
this.connect(dojox.html.metrics,"onFontResize","textSizeChanged");dojox.grid.util.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.util.keyEvents);this.selectionMode!="none"&&dojo.attr(this.domNode,"aria-multiselectable",this.selectionMode=="single"?"false":"true");dojo.addClass(this.domNode,this.classTag);this.isLeftToRight()||dojo.addClass(this.domNode,this.classTag+"Rtl")},postMixInProperties:function(){this.inherited(arguments);var a=dojo.i18n.getLocalization("dijit","loading",this.lang);
this.loadingMessage=dojo.string.substitute(this.loadingMessage,a);this.errorMessage=dojo.string.substitute(this.errorMessage,a);if(this.srcNodeRef&&this.srcNodeRef.style.height)this.height=this.srcNodeRef.style.height;this._setAutoHeightAttr(this.autoHeight,!0);this.lastScrollTop=this.scrollTop=0},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth)this.domNode.style.width=
this.initialWidth;this.domNode&&!this.editable&&dojo.attr(this.domNode,"aria-readonly","true")},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.edit.destroy();delete this.edit;this.views.destroyViews();this.scroller&&(this.scroller.destroy(),delete this.scroller);this.focus&&(this.focus.destroy(),delete this.focus);this.headerMenu&&this._placeholders.length&&(dojo.forEach(this._placeholders,function(a){a.unReplace(!0)}),this.headerMenu.unBindDomNode(this.viewsHeaderNode));
this.inherited(arguments)},_setAutoHeightAttr:function(a,b){typeof a=="string"&&(a=!a||a=="false"?!1:a=="true"?!0:window.parseInt(a,10));typeof a=="number"&&(isNaN(a)&&(a=!1),a<0?a=!0:a===0&&(a=!1));this.autoHeight=a;this._autoHeight=typeof a=="boolean"?a:typeof a=="number"?a>=this.get("rowCount"):!1;this._started&&!b&&this.render()},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=void 0?this.invalidated.rowCount:this.rowCount},textSizeChanged:function(){this.render()},
sizeChange:function(){this.update()},createManagers:function(){this.rows=new dojox.grid._RowManager(this);this.focus=new dojox.grid._FocusManager(this);this.edit=new dojox.grid._EditManager(this)},createSelection:function(){this.selection=new dojox.grid.Selection(this)},createScroller:function(){this.scroller=new dojox.grid._Scroller;this.scroller.grid=this;this.scroller.renderRow=dojo.hitch(this,"renderRow");this.scroller.removeRow=dojo.hitch(this,"rowRemoved")},createLayout:function(){this.layout=
new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn")},onMoveColumn:function(){this.render()},onResizeColumn:function(){},createViews:function(){this.views=new dojox.grid._ViewManager(this);this.views.createView=dojo.hitch(this,"createView")},createView:function(a,b){var c=new (dojo.getObject(a))({grid:this,index:b});this.viewsNode.appendChild(c.domNode);this.viewsHeaderNode.appendChild(c.headerNode);this.views.addView(c);dojo.attr(this.domNode,"align",dojo._isBodyLtr()?
"left":"right");return c},buildViews:function(){for(var a=0,b;b=this.layout.structure[a];a++)this.createView(b.type||dojox._scopeName+".grid._View",a).setStructure(b);this.scroller.setContentNodes(this.views.getContentNodes())},_setStructureAttr:function(a){a&&dojo.isString(a)&&(dojo.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0"),a=dojo.getObject(a));this.structure=a;if(!a)if(this.layout.structure)a=this.layout.structure;else return;
this.views.destroyViews();this.focus.focusView=null;a!==this.layout.structure&&this.layout.setStructure(a);this._structureChanged()},setStructure:function(a){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(a)},getColumnTogglingItems:function(){return dojo.map(this.layout.cells,function(a){if(!a.menuItems)a.menuItems=[];var b=this,c=new dijit.CheckedMenuItem({label:a.name,checked:!a.hidden,_gridCell:a,onChange:function(a){if(b.layout.setColumnVisibility(this._gridCell.index,
a)){var c=this._gridCell.menuItems;c.length>1&&dojo.forEach(c,function(b){b!==this&&b.setAttribute("checked",a)},this);a=dojo.filter(b.layout.cells,function(a){a.menuItems.length>1?dojo.forEach(a.menuItems,"item.set('disabled', false);"):a.menuItems[0].set("disabled",!1);return!a.hidden});a.length==1&&dojo.forEach(a[0].menuItems,"item.set('disabled', true);")}},destroy:function(){this._gridCell.menuItems.splice(dojo.indexOf(this._gridCell.menuItems,this),1);delete this._gridCell;dijit.CheckedMenuItem.prototype.destroy.apply(this,
arguments)}});a.menuItems.push(c);return c},this)},_setHeaderMenuAttr:function(a){if(this._placeholders&&this._placeholders.length)dojo.forEach(this._placeholders,function(a){a.unReplace(!0)}),this._placeholders=[];this.headerMenu&&this.headerMenu.unBindDomNode(this.viewsHeaderNode);if(this.headerMenu=a)if(this.headerMenu.bindDomNode(this.viewsHeaderNode),this.headerMenu.getPlaceholders)this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel)},setHeaderMenu:function(a){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)",
"use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(a)},setupHeaderMenu:function(){this._placeholders&&this._placeholders.length&&dojo.forEach(this._placeholders,function(a){a._replaced&&a.unReplace(!0);a.replace(this.getColumnTogglingItems())},this)},_fetch:function(){this.setScrollTop(0)},getItem:function(){return null},showMessage:function(a){a?(this.messagesNode.innerHTML=a,this.messagesNode.style.display=""):(this.messagesNode.innerHTML="",this.messagesNode.style.display=
"none")},_structureChanged:function(){this.buildViews();this.autoRender&&this._started&&this.render()},hasLayout:function(){return this.layout.cells.length},resize:function(a,b){this._pendingChangeSize=a;this._pendingResultSize=b;this.sizeChange()},_getPadBorder:function(){return this._padBorder=this._padBorder||dojo._getPadBorderExtents(this.domNode)},_getHeaderHeight:function(){var a=this.viewsHeaderNode.style,b=a.display=="none"?0:this.views.measureHeader();a.height=b+"px";this.views.normalizeHeaderNodeHeight();
return b},_resize:function(a,b){a=a||this._pendingChangeSize;b=b||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(this.domNode){var c=this.domNode.parentNode;if(c&&!(c.nodeType!=1||!this.hasLayout()||c.style.visibility=="hidden"||c.style.display=="none")){var d=this._getPadBorder(),e=void 0,f;if(this._autoHeight)this.domNode.style.height="auto";else if(typeof this.autoHeight=="number")f=e=this._getHeaderHeight(),f+=this.scroller.averageRowHeight*this.autoHeight,
this.domNode.style.height=f+"px";else if(this.domNode.clientHeight<=d.h)c==document.body?this.domNode.style.height=this.defaultHeight:this.height?this.domNode.style.height=this.height:this.fitTo="parent";b&&(a=b);if(a)dojo.marginBox(this.domNode,a),this.height=this.domNode.style.height,delete this.fitTo;else if(this.fitTo=="parent")f=this._parentContentBoxHeight=this._parentContentBoxHeight||dojo._getContentBox(c).h,this.domNode.style.height=Math.max(0,f)+"px";c=dojo.some(this.views.views,function(a){return a.flexCells});
!this._autoHeight&&(f||dojo._getContentBox(this.domNode).h)===0?this.viewsHeaderNode.style.display="none":(this.viewsHeaderNode.style.display="block",!c&&e===void 0&&(e=this._getHeaderHeight()));c&&(e=void 0);this.adaptWidth();this.adaptHeight(e);this.postresize()}}},adaptWidth:function(){var a=!this.initialWidth&&this.autoWidth,b=this.views.arrange(1,a?0:this.domNode.clientWidth||this.domNode.offsetWidth-this._getPadBorder().w);this.views.onEach("adaptWidth");if(a)this.domNode.style.width=b+"px"},
adaptHeight:function(a){var a=a===void 0?this._getHeaderHeight():a,b=this._autoHeight?-1:Math.max(this.domNode.clientHeight-a,0)||0;this.views.onEach("setSize",[0,b]);this.views.onEach("adaptHeight");if(!this._autoHeight){var c=0,d=0,e=dojo.filter(this.views.views,function(a){(a=a.hasHScrollbar())?c++:d++;return!a});c>0&&d>0&&dojo.forEach(e,function(a){a.adaptHeight(!0)})}this.scroller.windowHeight=this.autoHeight===!0||b!=-1||typeof this.autoHeight=="number"&&this.autoHeight>=this.get("rowCount")?
b:Math.max(this.domNode.clientHeight-a,0)},startup:function(){this._started||(this.inherited(arguments),this.autoRender&&this.render())},render:function(){if(this.domNode&&this._started)this.hasLayout()?(this.update=this.defaultUpdate,this._render()):this.scroller.init(0,this.keepRows,this.rowsPerPage)},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender()},prerender:function(){this.keepRows=this._autoHeight?
0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize()},postrender:function(){this.postresize();this.focus.initFocusView();dojo.setSelectable(this.domNode,this.selectable)},postresize:function(){if(this._autoHeight)this.viewsNode.style.height=Math.max(this.views.measureContent())+"px"},renderRow:function(a,b){this.views.renderRow(a,b,this._skipRowRenormalize)},rowRemoved:function(a){this.views.rowRemoved(a)},invalidated:null,updating:!1,beginUpdate:function(){this.invalidated=
[];this.updating=!0},endUpdate:function(){this.updating=!1;var a=this.invalidated,b;if(a.all)this.update();else if(a.rowCount!=void 0)this.updateRowCount(a.rowCount);else for(b in a)this.updateRow(Number(b));this.invalidated=[]},defaultUpdate:function(){if(this.domNode)this.updating?this.invalidated.all=!0:(this.lastScrollTop=this.scrollTop,this.prerender(),this.scroller.invalidateNodes(),this.setScrollTop(this.lastScrollTop),this.postrender())},update:function(){this.render()},updateRow:function(a){a=
Number(a);this.updating?this.invalidated[a]=!0:(this.views.updateRow(a),this.scroller.rowHeightChanged(a))},updateRows:function(a,b){var a=Number(a),b=Number(b),c;if(this.updating)for(c=0;c<b;c++)this.invalidated[c+a]=!0;else{for(c=0;c<b;c++)this.views.updateRow(c+a,this._skipRowRenormalize);this.scroller.rowHeightChanged(a)}},updateRowCount:function(a){this.updating?this.invalidated.rowCount=a:(this.rowCount=a,this._setAutoHeightAttr(this.autoHeight,!0),this.layout.cells.length&&this.scroller.updateRowCount(a),
this._resize(),this.layout.cells.length&&this.setScrollTop(this.scrollTop))},updateRowStyles:function(a){this.views.updateRowStyles(a)},getRowNode:function(a){if(this.focus.focusView&&!(this.focus.focusView instanceof dojox.grid._RowSelector))return this.focus.focusView.rowNodes[a];else for(var b=0,c;c=this.views.views[b];b++)if(!(c instanceof dojox.grid._RowSelector))return c.rowNodes[a];return null},rowHeightChanged:function(a){this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a)},fastScroll:!0,
delayScroll:!1,scrollRedrawThreshold:dojo.isIE?100:50,scrollTo:function(a){if(this.fastScroll){var b=Math.abs(this.lastScrollTop-a);this.lastScrollTop=a;if(b>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=!0;this.scrollTop=a;this.views.setScrollTop(a);this._pendingScroll&&window.clearTimeout(this._pendingScroll);var c=this;this._pendingScroll=window.setTimeout(function(){delete c._pendingScroll;c.finishScrollJob()},200)}else this.setScrollTop(a)}else this.setScrollTop(a)},finishScrollJob:function(){this.delayScroll=
!1;this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scroller.scroll(this.views.setScrollTop(a))},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(a,b){b&&this.rows.styleRowNode(a,b)},_mouseOut:function(){this.rows.setOverRow(-2)},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(a,b){this.getCell(a).unitWidth=b},getCellName:function(a){return"Cell "+a.index},canSort:function(){},sort:function(){},getSortAsc:function(a){a=
a==void 0?this.sortInfo:a;return Boolean(a>0)},getSortIndex:function(a){a=a==void 0?this.sortInfo:a;return Math.abs(a)-1},setSortIndex:function(a,b){var c=a+1;b!=void 0?c*=b?1:-1:this.getSortIndex()==a&&(c=-this.sortInfo);this.setSortInfo(c)},setSortInfo:function(a){if(this.canSort(a))this.sortInfo=a,this.sort(),this.update()},doKeyEvent:function(a){a.dispatch="do"+a.type;this.onKeyEvent(a)},_dispatch:function(a,b){return a in this?this[a](b):!1},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,
a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){if(a.cellNode)this.onCellClick(a);else this.onRowClick(a)},dodblclick:function(a){if(a.cellNode)this.onCellDblClick(a);else this.onRowDblClick(a)},docontextmenu:function(a){if(a.cellNode)this.onCellContextMenu(a);
else this.onRowContextMenu(a)},doheaderclick:function(a){if(a.cellNode)this.onHeaderCellClick(a);else this.onHeaderClick(a)},doheaderdblclick:function(a){if(a.cellNode)this.onHeaderCellDblClick(a);else this.onHeaderDblClick(a)},doheadercontextmenu:function(a){if(a.cellNode)this.onHeaderCellContextMenu(a);else this.onHeaderContextMenu(a)},doStartEdit:function(a,b){this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,c){this.onApplyCellEdit(a,b,c)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},
addRow:function(){this.updateRowCount(this.get("rowCount")+1)},removeSelectedRows:function(){this.allItemsSelected?this.updateRowCount(0):this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));this.selection.clear()}});dojox.grid._Grid.markupFactory=function(a,b,c,d){var e=dojo,f=function(a){a=e.attr(a,"width")||"auto";a!="auto"&&a.slice(-2)!="em"&&a.slice(-1)!="%"&&(a=parseInt(a,10)+"px");return a};if(!a.structure&&b.nodeName.toLowerCase()=="table")a.structure=
e.query("> colgroup",b).map(function(a){var b=e.attr(a,"span"),b={noscroll:e.attr(a,"noscroll")=="true"?!0:!1,__span:b?parseInt(b,10):1,cells:[]};if(e.hasAttr(a,"width"))b.width=f(a);return b}),a.structure.length||a.structure.push({__span:Infinity,cells:[]}),e.query("thead > tr",b).forEach(function(b,c){var j=0,k=0,l,p=null;e.query("> th",b).map(function(b){p?j>=l+p.__span&&(k++,l+=p.__span,p=a.structure[k]):(l=0,p=a.structure[0]);var g={name:e.trim(e.attr(b,"name")||b.innerHTML),colSpan:parseInt(e.attr(b,
"colspan")||1,10),type:e.trim(e.attr(b,"cellType")||""),id:e.trim(e.attr(b,"id")||"")};j+=g.colSpan;var m=e.attr(b,"rowspan");if(m)g.rowSpan=m;if(e.hasAttr(b,"width"))g.width=f(b);if(e.hasAttr(b,"relWidth"))g.relWidth=window.parseInt(dojo.attr(b,"relWidth"),10);if(e.hasAttr(b,"hidden"))g.hidden=e.attr(b,"hidden")=="true"||e.attr(b,"hidden")===!0;d&&d(b,g);g.type=g.type?dojo.getObject(g.type):dojox.grid.cells.Cell;g.type&&g.type.markupFactory&&g.type.markupFactory(b,g);p.cells[c]||(p.cells[c]=[]);
p.cells[c].push(g)})});return new c(a,b)}}());
dojo._hasResource["dojox.grid.DataSelection"]||(dojo._hasResource["dojox.grid.DataSelection"]=!0,dojo.provide("dojox.grid.DataSelection"),dojo.declare("dojox.grid.DataSelection",dojox.grid.Selection,{getFirstSelected:function(){var a=dojox.grid.Selection.prototype.getFirstSelected.call(this);return a==-1?null:this.grid.getItem(a)},getNextSelected:function(a){a=this.grid.getItemIndex(a);a=dojox.grid.Selection.prototype.getNextSelected.call(this,a);return a==-1?null:this.grid.getItem(a)},getSelected:function(){for(var a=
[],b=0,c=this.selected.length;b<c;b++)this.selected[b]&&a.push(this.grid.getItem(b));return a},addToSelection:function(a){if(this.mode!="none"){var b=null,b=typeof a=="number"||typeof a=="string"?a:this.grid.getItemIndex(a);dojox.grid.Selection.prototype.addToSelection.call(this,b)}},deselect:function(a){if(this.mode!="none"){var b=null,b=typeof a=="number"||typeof a=="string"?a:this.grid.getItemIndex(a);dojox.grid.Selection.prototype.deselect.call(this,b)}},deselectAll:function(a){var b=null;a||
typeof a=="number"?(b=typeof a=="number"||typeof a=="string"?a:this.grid.getItemIndex(a),dojox.grid.Selection.prototype.deselectAll.call(this,b)):this.inherited(arguments)}}));
if(!dojo._hasResource["dojox.grid.DataGrid"])dojo._hasResource["dojox.grid.DataGrid"]=!0,dojo.provide("dojox.grid.DataGrid"),dojo.declare("dojox.grid.DataGrid",dojox.grid._Grid,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:!1,_isLoading:!1,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty=
{};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments)},createSelection:function(){this.selection=new dojox.grid.DataSelection(this)},get:function(a,b){if(b&&this.field=="_item"&&!this.fields)return b;else if(b&&this.fields){var c=[],d=this.grid.store;dojo.forEach(this.fields,function(a){c=c.concat(d.getValues(b,a))});return c}else if(!b&&typeof a==="string")return this.inherited(arguments);return!b?this.defaultValue:!this.field?this.value:
this.field=="_item"?b:this.grid.store.getValue(b,this.field)},_checkUpdateStatus:function(){if(this.updateDelay>0){var a=!1;this._endUpdateDelay&&(clearTimeout(this._endUpdateDelay),delete this._endUpdateDelay,a=!0);this.updating||(this.beginUpdate(),a=!0);if(a){var b=this;this._endUpdateDelay=setTimeout(function(){delete b._endUpdateDelay;b.endUpdate()},this.updateDelay)}}},_onSet:function(a){this._checkUpdateStatus();a=this.getItemIndex(a);a>-1&&this.updateRow(a)},_createItem:function(a,b){var c=
this._hasIdentity?this.store.getIdentity(a):dojo.toJson(this.query)+":idx:"+b+":sort:"+dojo.toJson(this.getSortProps());return this._by_idty[c]={idty:c,item:a}},_addItem:function(a,b,c){this._by_idx[b]=this._createItem(a,b);c||this.updateRow(b)},_onNew:function(a){this._checkUpdateStatus();var b=this.get("rowCount");this._addingItem=!0;this.updateRowCount(b+1);this._addingItem=!1;this._addItem(a,b);this.showMessage()},_onDelete:function(a){this._checkUpdateStatus();a=this._getItemIndex(a,!0);if(a>=
0){this._pages=[];this._eop=this._bop=-1;var b=this._by_idx[a];this._by_idx.splice(a,1);delete this._by_idty[b.idty];this.updateRowCount(this.get("rowCount")-1);this.get("rowCount")===0&&this.showMessage(this.noDataMessage)}},_onRevert:function(){this._refresh()},setStore:function(a,b,c){this._setQuery(b,c);this._setStore(a);this._refresh(!0)},setQuery:function(a,b){this._setQuery(a,b);this._refresh(!0)},setItems:function(a){this.items=a;this._setStore(this.store);this._refresh(!0)},_setQuery:function(a,
b){this.query=a;this.queryOptions=b||this.queryOptions},_setStore:function(a){this.store&&this._store_connects&&dojo.forEach(this._store_connects,this.disconnect,this);if(this.store=a){var a=this.store.getFeatures(),b=[];this._canEdit=!!a["dojo.data.api.Write"]&&!!a["dojo.data.api.Identity"];this._hasIdentity=!!a["dojo.data.api.Identity"];a["dojo.data.api.Notification"]&&!this.items&&(b.push(this.connect(this.store,"onSet","_onSet")),b.push(this.connect(this.store,"onNew","_onNew")),b.push(this.connect(this.store,
"onDelete","_onDelete")));this._canEdit&&b.push(this.connect(this.store,"revert","_onRevert"));this._store_connects=b}},_onFetchBegin:function(a,b){if(this.scroller){if(this.rowCount!=a)b.isRender?(this.scroller.init(a,this.keepRows,this.rowsPerPage),this.rowCount=a,this._setAutoHeightAttr(this.autoHeight,!0),this._skipRowRenormalize=!0,this.prerender(),this._skipRowRenormalize=!1):this.updateRowCount(a);a?this.showMessage():(this.views.render(),this._resize(),this.showMessage(this.noDataMessage),
this.focus.initFocusView())}},_onFetchComplete:function(a,b){if(this.scroller){a&&a.length>0&&(dojo.forEach(a,function(a,d){this._addItem(a,b.start+d,!0)},this),this.updateRows(b.start,a.length),b.isRender?(this.setScrollTop(0),this.postrender()):this._lastScrollTop&&this.setScrollTop(this._lastScrollTop));delete this._lastScrollTop;if(!this._isLoaded)this._isLoading=!1,this._isLoaded=!0;this._pending_requests[b.start]=!1}},_onFetchError:function(a,b){console.log(a);delete this._lastScrollTop;if(!this._isLoaded)this._isLoading=
!1,this._isLoaded=!0,this.showMessage(this.errorMessage);this._pending_requests[b.start]=!1;this.onFetchError(a,b)},onFetchError:function(){},_fetch:function(a,b){a=a||0;if(this.store&&!this._pending_requests[a]){if(!this._isLoaded&&!this._isLoading)this._isLoading=!0,this.showMessage(this.loadingMessage);this._pending_requests[a]=!0;try{if(this.items){var c=this.items,d=this.store;this.rowsPerPage=c.length;var e={start:a,count:this.rowsPerPage,isRender:b};this._onFetchBegin(c.length,e);var f=0;dojo.forEach(c,
function(a){d.isItemLoaded(a)||f++});if(f===0)this._onFetchComplete(c,e);else{var g=function(){f--;f===0&&this._onFetchComplete(c,e)};dojo.forEach(c,function(a){d.isItemLoaded(a)||d.loadItem({item:a,onItem:g,scope:this})},this)}}else this.store.fetch({start:a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:b,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")})}catch(h){this._onFetchError(h,
{start:a,count:this.rowsPerPage})}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoading=this._isLoaded=!1},getItem:function(a){var b=this._by_idx[a];return!b||b&&!b.item?(this._preparePage(a),null):b.item},getItemIndex:function(a){return this._getItemIndex(a,!1)},_getItemIndex:function(a,b){if(!b&&!this.store.isItem(a))return-1;for(var c=this._hasIdentity?this.store.getIdentity(a):null,d=0,e=this._by_idx.length;d<e;d++){var f=
this._by_idx[d];if(f&&(c&&f.idty==c||f.item===a))return d}return-1},filter:function(a,b){this.query=a;b&&this._clearData();this._fetch()},_getItemAttr:function(a,b){var c=this.getItem(a);return!c?this.fetchText:this.store.getValue(c,b)},_render:function(){this.domNode.parentNode&&(this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage),this.prerender(),this._fetch(0,!0))},_requestsPending:function(a){return this._pending_requests[a]},_rowToPage:function(a){return this.rowsPerPage?
Math.floor(a/this.rowsPerPage):a},_pageToRow:function(a){return this.rowsPerPage?this.rowsPerPage*a:a},_preparePage:function(a){if((a<this._bop||a>=this._eop)&&!this._addingItem)a=this._rowToPage(a),this._needPage(a),this._bop=a*this.rowsPerPage,this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"))},_needPage:function(a){this._pages[a]||(this._pages[a]=!0,this._requestPage(a))},_requestPage:function(a){a=this._pageToRow(a);Math.min(this.rowsPerPage,this.get("rowCount")-a)>0&&(this._requests++,
this._requestsPending(a)||setTimeout(dojo.hitch(this,"_fetch",a,!1),1))},getCellName:function(a){return a.field},_refresh:function(a){this._clearData();this._fetch(0,a)},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh()},canSort:function(){return!this._isLoading},getSortProps:function(){var a=this.getCell(this.getSortIndex());if(a){var b=a.sortDesc,c=!(this.sortInfo>0);return[{attribute:a.field,descending:typeof b=="undefined"?c:c?!b:b}]}else return this.sortFields?
this.sortFields:null},styleRowState:function(a){if(this.store&&this.store.getState){for(var b=this.store.getState(a.index),c="",d=0,e=["inflight","error","inserting"],f;f=e[d];d++)if(b[f]){c=" dojoxGridRow-"+f;break}a.customClasses+=c}},onStyleRow:function(a){this.styleRowState(a);this.inherited(arguments)},canEdit:function(){return this._canEdit},_copyAttr:function(a,b){return this.store.getValue(this.getItem(a),b)},doStartEdit:function(a,b){this._cache[b]||(this._cache[b]=this._copyAttr(b,a.field));
this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,c){this.store.fetchItemByIdentity({identity:this._by_idx[b].idty,onItem:dojo.hitch(this,function(d){var e=this.store.getValue(d,c);typeof e=="number"?a=isNaN(a)?a:parseFloat(a):typeof e=="boolean"?a=a=="true"?!0:a=="false"?!1:a:e instanceof Date&&(e=new Date(a),a=isNaN(e.getTime())?a:e);this.store.setValue(d,c,a);this.onApplyCellEdit(a,b,c)})})},doCancelEdit:function(a){this._cache[a]&&(this.updateRow(a),delete this._cache[a]);this.onCancelEdit.apply(this,
arguments)},doApplyEdit:function(a){this.onApplyEdit(a)},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var a=dojo.hitch(this,function(a){a.length&&(dojo.forEach(a,this.store.deleteItem,this.store),this.selection.clear())});this.allItemsSelected?this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:a}):a(this.selection.getSelected())}}}),dojox.grid.DataGrid.cell_markupFactory=function(a,b,c){var d=dojo.trim(dojo.attr(b,"field")||"");if(d)c.field=d;c.field=
c.field||c.name;if(d=dojo.trim(dojo.attr(b,"fields")||""))c.fields=d.split(",");a&&a(b,c)},dojox.grid.DataGrid.markupFactory=function(a,b,c,d){return dojox.grid._Grid.markupFactory(a,b,c,dojo.partial(dojox.grid.DataGrid.cell_markupFactory,d))};
dojo._hasResource["dijit._TimePicker"]||(dojo._hasResource["dijit._TimePicker"]=!0,dojo.provide("dijit._TimePicker"),dojo.declare("dijit._TimePicker",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("dijit","templates/TimePicker.html",'<div id="widget_${id}" class="dijitMenu"\n    ><div dojoAttachPoint="upArrow" class="dijitButtonNode dijitUpArrowButton" dojoAttachEvent="onmouseenter:_buttonMouse,onmouseleave:_buttonMouse"\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" role="presentation">&nbsp;</div\n\t\t><div class="dijitArrowButtonChar">&#9650;</div></div\n    ><div dojoAttachPoint="timeMenu,focusNode" dojoAttachEvent="onclick:_onOptionSelected,onmouseover,onmouseout"></div\n    ><div dojoAttachPoint="downArrow" class="dijitButtonNode dijitDownArrowButton" dojoAttachEvent="onmouseenter:_buttonMouse,onmouseleave:_buttonMouse"\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" role="presentation">&nbsp;</div\n\t\t><div class="dijitArrowButtonChar">&#9660;</div></div\n></div>\n'),baseClass:"dijitTimePicker",
clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T05:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:dojo.date.stamp.toISOString,setValue:function(a){dojo.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_setValueAttr:function(a){this._set("value",a);this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},
isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,d){var e=[],d=d?d.date:this._refDate,f=a,g=this._maxIncrement+Math.abs(f),h=c?-1:1,j=c?1:0,k=1-j;do{f-=j;if(a=this._createOption(f)){if(c&&a.date>d||!c&&a.date<d)break;e[c?"unshift":"push"](a);d=a.date}f+=k}while(e.length<b&&f*h<g);return e},_showText:function(){var a=dojo.date.stamp.fromISOString;this.timeMenu.innerHTML="";this._clickableIncrementDate=a(this.clickableIncrement);this._visibleIncrementDate=a(this.visibleIncrement);
this._visibleRangeDate=a(this.visibleRange);var b=function(a){return a.getHours()*3600+a.getMinutes()*60+a.getSeconds()},a=b(this._clickableIncrementDate),c=b(this._visibleIncrementDate),b=b(this._visibleRangeDate),d=(this.value||this.currentFocus).getTime();this._refDate=new Date(d-d%(c*1E3));this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._totalIncrements=b/a;this._visibleIncrement=c/a;this._maxIncrement=86400/a;a=this._getFilteredNodes(0,Math.min(this._totalIncrements>>1,10)-
1);c=this._getFilteredNodes(0,Math.min(this._totalIncrements,10)-a.length,!0,a[0]);dojo.forEach(c.concat(a),function(a){this.timeMenu.appendChild(a)},this)},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){dojo.mixin(this,a);if(!a.locale)a.locale=this.lang},postCreate:function(){this.connect(this.timeMenu,dojo.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addMouseListener(this.upArrow,
this,"_onArrowUp",33,250));this._connects.push(dijit.typematic.addMouseListener(this.downArrow,this,"_onArrowDown",33,250));this.inherited(arguments)},_buttonMouse:function(a){dojo.toggleClass(a.currentTarget,a.currentTarget==this.upArrow?"dijitUpArrowHover":"dijitDownArrowHover",a.type=="mouseenter"||a.type=="mouseover")},_createOption:function(a){var b=new Date(this._refDate),c=this._clickableIncrementDate;b.setHours(b.getHours()+c.getHours()*a,b.getMinutes()+c.getMinutes()*a,b.getSeconds()+c.getSeconds()*
a);this.constraints.selector=="time"&&b.setFullYear(1970,0,1);c=dojo.date.locale.format(b,this.constraints);if(this.filterString&&c.toLowerCase().indexOf(this.filterString)!==0)return null;var d=dojo.create("div",{"class":this.baseClass+"Item"});d.date=b;d.index=a;dojo.create("div",{"class":this.baseClass+"ItemInner",innerHTML:c},d);a%this._visibleIncrement<1&&a%this._visibleIncrement>-1?dojo.addClass(d,this.baseClass+"Marker"):a%this._clickableIncrement||dojo.addClass(d,this.baseClass+"Tick");this.isDisabledDate(b)&&
dojo.addClass(d,this.baseClass+"ItemDisabled");if(this.value&&!dojo.date.compare(this.value,b,this.constraints.selector))d.selected=!0,dojo.addClass(d,this.baseClass+"ItemSelected"),dojo.hasClass(d,this.baseClass+"Marker")?dojo.addClass(d,this.baseClass+"MarkerSelected"):dojo.addClass(d,this.baseClass+"TickSelected"),this._highlightOption(d,!0);return d},_onOptionSelected:function(a){if((a=a.target.date||a.target.parentNode.date)&&!this.isDisabledDate(a))this._highlighted_option=null,this.set("value",
a),this.onChange(a)},onChange:function(){},_highlightOption:function(a,b){if(a){if(b)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else if(this._highlighted_option!==a)return;else this._highlighted_option=null;dojo.toggleClass(a,this.baseClass+"ItemHover",b);dojo.hasClass(a,this.baseClass+"Marker")?dojo.toggleClass(a,this.baseClass+"MarkerHover",b):dojo.toggleClass(a,this.baseClass+"TickHover",b)}},onmouseover:function(a){this._keyboardSelected=
null;a=a.target.parentNode===this.timeMenu?a.target:a.target.parentNode;dojo.hasClass(a,this.baseClass+"Item")&&this._highlightOption(a,!0)},onmouseout:function(a){this._keyboardSelected=null;this._highlightOption(a.target.parentNode===this.timeMenu?a.target:a.target.parentNode,!1)},_mouseWheeled:function(a){this._keyboardSelected=null;dojo.stopEvent(a);this[(dojo.isIE?a.wheelDelta:-a.detail)>0?"_onArrowUp":"_onArrowDown"]()},_onArrowUp:function(a){!(typeof a=="number"&&a==-1)&&this.timeMenu.childNodes.length&&
(a=this._getFilteredNodes(this.timeMenu.childNodes[0].index,1,!0,this.timeMenu.childNodes[0]),a.length&&(this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]),this.timeMenu.insertBefore(a[0],this.timeMenu.childNodes[0])))},_onArrowDown:function(a){!(typeof a=="number"&&a==-1)&&this.timeMenu.childNodes.length&&(a=this._getFilteredNodes(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1].index+1,1,!1,this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]),
a.length&&(this.timeMenu.removeChild(this.timeMenu.childNodes[0]),this.timeMenu.appendChild(a[0])))},handleKey:function(a){var b=dojo.keys;if(a.charOrCode==b.DOWN_ARROW||a.charOrCode==b.UP_ARROW){dojo.stopEvent(a);if(this._highlighted_option&&!this._highlighted_option.parentNode)this._highlighted_option=null;var c=this.timeMenu,d=this._highlighted_option||dojo.query("."+this.baseClass+"ItemSelected",c)[0];d?c.childNodes.length&&(a.charOrCode==b.DOWN_ARROW&&!d.nextSibling?this._onArrowDown():a.charOrCode==
b.UP_ARROW&&!d.previousSibling&&this._onArrowUp(),d=a.charOrCode==b.DOWN_ARROW?d.nextSibling:d.previousSibling):d=c.childNodes[0];this._highlightOption(d,!0);this._keyboardSelected=d;return!1}else if(a.charOrCode==b.ENTER||a.charOrCode===b.TAB){if(!this._keyboardSelected&&a.charOrCode===b.TAB)return!0;this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option});return a.charOrCode===b.TAB}}}));
dojo._hasResource["dijit.form.TimeTextBox"]||(dojo._hasResource["dijit.form.TimeTextBox"]=!0,dojo.provide("dijit.form.TimeTextBox"),dojo.declare("dijit.form.TimeTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:"dijit._TimePicker",_selector:"time",value:new Date(""),_onKey:function(a){this.inherited(arguments);switch(a.keyCode){case dojo.keys.ENTER:case dojo.keys.TAB:case dojo.keys.ESCAPE:case dojo.keys.DOWN_ARROW:case dojo.keys.UP_ARROW:break;
default:setTimeout(dojo.hitch(this,function(){var a=this.get("displayedValue");this.filterString=a&&!this.parse(a,this.constraints)?a.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()}),0)}}}));
dojo._hasResource["dijit.form._Spinner"]||(dojo._hasResource["dijit.form._Spinner"]=!0,dojo.provide("dijit.form._Spinner"),dojo.declare("dijit.form._Spinner",dijit.form.RangeBoundTextBox,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:dojo.cache("dijit.form","templates/Spinner.html",'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitButtonNode dijitSpinnerButtonContainer"\n\t\t><input class="dijitReset dijitInputField dijitSpinnerButtonInner" type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t/><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\tdojoAttachPoint="upArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9650;" type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\tdojoAttachPoint="downArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9660;" type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935;" type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' dojoAttachPoint="textbox,focusNode" type="${type}" dojoAttachEvent="onkeypress:_onKeyPress"\n\t\t\trole="spinbutton" autocomplete="off" ${!nameAttrSetting}\n\t/></div\n></div>\n'),
baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(a){return a},_arrowPressed:function(a,b,c){!this.disabled&&!this.readOnly&&(this._setValueAttr(this.adjust(this.get("value"),b*c),!1),dijit.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(a,b,c){var d=this.smallDelta;if(b==this.textbox)b=dojo.keys,c=c.charOrCode,d=c==b.PAGE_UP||
c==b.PAGE_DOWN?this.largeDelta:this.smallDelta,b=c==b.UP_ARROW||c==b.PAGE_UP?this.upArrowNode:this.downArrowNode;a==-1?this._arrowReleased(b):this._arrowPressed(b,b==this.upArrowNode?1:-1,d)},_wheelTimer:null,_mouseWheeled:function(a){dojo.stopEvent(a);a=a.detail?a.detail*-1:a.wheelDelta/120;if(a!==0){var b=this[a>0?"upArrowNode":"downArrowNode"];this._arrowPressed(b,a,this.smallDelta);this._wheelTimer||clearTimeout(this._wheelTimer);this._wheelTimer=setTimeout(dojo.hitch(this,"_arrowReleased",b),
50)}},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.DOWN_ARROW,
ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_DOWN,ctrlKey:!1,
altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}}));
dojo._hasResource["dijit.form.NumberTextBox"]||(dojo._hasResource["dijit.form.NumberTextBox"]=!0,dojo.provide("dijit.form.NumberTextBox"),dojo.declare("dijit.form.NumberTextBoxMixin",null,{regExpGen:dojo.number.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:dojo.number.format,_setConstraintsAttr:function(a){var b=typeof a.places=="number"?a.places:0;b&&b++;if(typeof a.max!="number")a.max=9*Math.pow(10,15-b);if(typeof a.min!="number")a.min=-9*Math.pow(10,15-b);this.inherited(arguments,
[a]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value)},_onFocus:function(){if(!this.disabled){var a=this.get("value");if(typeof a=="number"&&!isNaN(a)&&(a=this.format(a,this.constraints),a!==void 0))this.textbox.value=a;this.inherited(arguments)}},format:function(a,b){var c=String(a);if(typeof a!="number")return c;if(isNaN(a))return"";if(!("rangeCheck"in this&&this.rangeCheck(a,b))&&b.exponent!==!1&&/\de[-+]?\d/i.test(c))return c;this.editOptions&&this._focused&&
(b=dojo.mixin({},b,this.editOptions));return this._formatter(a,b)},_parser:dojo.number.parse,parse:function(a,b){var c=this._parser(a,dojo.mixin({},b,this.editOptions&&this._focused?this.editOptions:{}));this.editOptions&&this._focused&&isNaN(c)&&(c=this._parser(a,b));return c},_getDisplayedValueAttr:function(){var a=this.inherited(arguments);return isNaN(a)?this.textbox.value:a},filter:function(a){return a===null||a===""||a===void 0?NaN:this.inherited(arguments)},serialize:function(a,b){return typeof a!=
"number"||isNaN(a)?"":this.inherited(arguments)},_setBlurValue:function(){this._setValueAttr(dojo.hitch(dojo.mixin({},this,{_focused:!0}),"get")("value"),!0)},_setValueAttr:function(a,b,c){if(a!==void 0&&c===void 0)if(c=String(a),typeof a=="number")if(isNaN(a))c="";else{if("rangeCheck"in this&&this.rangeCheck(a,this.constraints)||this.constraints.exponent===!1||!/\de[-+]?\d/i.test(c))c=void 0}else a?a=void 0:(c="",a=NaN);this.inherited(arguments,[a,b,c])},_getValueAttr:function(){var a=this.inherited(arguments);
if(isNaN(a)&&this.textbox.value!==""){if(this.constraints.exponent!==!1&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+dojo.number._realNumberRegexp(dojo.mixin({},this.constraints))+"$").test(this.textbox.value))return a=Number(this.textbox.value),isNaN(a)?void 0:a}else return a},isValid:function(a){if(!this._focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);else{var b=this.get("value");return!isNaN(b)&&this.rangeCheck(b,this.constraints)?this.constraints.exponent!==
!1&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1}}}),dojo.declare("dijit.form.NumberTextBox",[dijit.form.RangeBoundTextBox,dijit.form.NumberTextBoxMixin],{baseClass:"dijitTextBox dijitNumberTextBox"}));
dojo._hasResource["dijit.form.NumberSpinner"]||(dojo._hasResource["dijit.form.NumberSpinner"]=!0,dojo.provide("dijit.form.NumberSpinner"),dojo.declare("dijit.form.NumberSpinner",[dijit.form._Spinner,dijit.form.NumberTextBoxMixin],{adjust:function(a,b){var c=this.constraints,d=isNaN(a),e=!isNaN(c.max),f=!isNaN(c.min);d&&b!=0&&(a=b>0?f?c.min:e?c.max:0:e?this.constraints.max:f?c.min:0);var g=a+b;if(d||isNaN(g))return a;if(e&&g>c.max)g=c.max;if(f&&g<c.min)g=c.min;return g},_onKeyPress:function(a){if((a.charOrCode==
dojo.keys.HOME||a.charOrCode==dojo.keys.END)&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&typeof this.get("value")!="undefined"){var b=this.constraints[a.charOrCode==dojo.keys.HOME?"min":"max"];typeof b=="number"&&this._setValueAttr(b,!1);dojo.stopEvent(a)}}}));
if(!dojo._hasResource["dojo.cldr.monetary"])dojo._hasResource["dojo.cldr.monetary"]=!0,dojo.provide("dojo.cldr.monetary"),dojo.getObject("cldr.monetary",!0,dojo),dojo.cldr.monetary.getData=function(a){var b={ADP:0,AFN:0,ALL:0,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,COP:0,CRC:0,DJF:0,ESP:0,GNF:0,GYD:0,HUF:0,IDR:0,IQD:0,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MNT:0,MRO:0,MUR:0,OMR:3,PKR:0,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,
TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0}[a],a={CHF:5}[a];typeof b=="undefined"&&(b=2);typeof a=="undefined"&&(a=0);return{places:b,round:a}};
if(!dojo._hasResource["dojo.currency"])dojo._hasResource["dojo.currency"]=!0,dojo.provide("dojo.currency"),dojo.getObject("currency",!0,dojo),dojo.currency._mixInDefaults=function(a){a=a||{};a.type="currency";var b=dojo.i18n.getLocalization("dojo.cldr","currency",a.locale)||{},c=a.currency,d=dojo.cldr.monetary.getData(c);dojo.forEach(["displayName","symbol","group","decimal"],function(a){d[a]=b[c+"_"+a]});d.fractional=[!0,!1];return dojo.mixin(d,a)},dojo.currency.format=function(a,b){return dojo.number.format(a,
dojo.currency._mixInDefaults(b))},dojo.currency.regexp=function(a){return dojo.number.regexp(dojo.currency._mixInDefaults(a))},dojo.currency.parse=function(a,b){return dojo.number.parse(a,dojo.currency._mixInDefaults(b))};
dojo._hasResource["dijit.form.CurrencyTextBox"]||(dojo._hasResource["dijit.form.CurrencyTextBox"]=!0,dojo.provide("dijit.form.CurrencyTextBox"),dojo.declare("dijit.form.CurrencyTextBox",dijit.form.NumberTextBox,{currency:"",baseClass:"dijitTextBox dijitCurrencyTextBox",regExpGen:function(a){return"("+(this._focused?this.inherited(arguments,[dojo.mixin({},a,this.editOptions)])+"|":"")+dojo.currency.regexp(a)+")"},_formatter:dojo.currency.format,_parser:dojo.currency.parse,parse:function(a,b){var c=
this.inherited(arguments);isNaN(c)&&/\d+/.test(a)&&(c=dojo.hitch(dojo.mixin({},this,{_parser:dijit.form.NumberTextBox.prototype._parser}),"inherited")(arguments));return c},_setConstraintsAttr:function(a){if(!a.currency&&this.currency)a.currency=this.currency;this.inherited(arguments,[dojo.currency._mixInDefaults(dojo.mixin(a,{exponent:!1}))])}}));
if(!dojo._hasResource["dijit._editor.html"])dojo._hasResource["dijit._editor.html"]=!0,dojo.provide("dijit._editor.html"),dojo.getObject("_editor",!0,dijit),dijit._editor.escapeXml=function(a,b){a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");b||(a=a.replace(/'/gm,"&#39;"));return a},dijit._editor.getNodeHtml=function(a){var b;switch(a.nodeType){case 1:var c=a.nodeName.toLowerCase();if(!c||c.charAt(0)=="/")return"";b="<"+c;var d=[],e;if(dojo.isIE&&a.outerHTML){e=
a.outerHTML;e=e.substr(0,e.indexOf(">")).replace(/(['"])[^"']*\1/g,"");for(var f=/(\b\w+)\s?=/g,g;g=f.exec(e);)if(g=g[1],g.substr(0,3)!="_dj")if((g=="src"||g=="href")&&a.getAttribute("_djrealurl"))d.push([g,a.getAttribute("_djrealurl")]);else{var h,j;switch(g){case "style":h=a.style.cssText.toLowerCase();break;case "class":h=a.className;break;case "width":if(c==="img"){(j=/width=(\S+)/i.exec(e))&&(h=j[1]);break}case "height":if(c==="img"){(j=/height=(\S+)/i.exec(e))&&(h=j[1]);break}default:h=a.getAttribute(g)}h!=
null&&d.push([g,h.toString()])}}else for(f=0;e=a.attributes[f++];)if(h=e.name,h.substr(0,3)!="_dj"){e=e.value;if(h=="src"||h=="href")a.getAttribute("_djrealurl")&&(e=a.getAttribute("_djrealurl"));d.push([h,e])}d.sort(function(a,b){return a[0]<b[0]?-1:a[0]==b[0]?0:1});for(f=0;e=d[f++];)b+=" "+e[0]+'="'+(dojo.isString(e[1])?dijit._editor.escapeXml(e[1],!0):e[1])+'"';if(c==="script")b+=">"+a.innerHTML+"</"+c+">";else if(a.childNodes.length)b+=">"+dijit._editor.getChildrenHtml(a)+"</"+c+">";else switch(c){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":b+=
" />";break;default:b+="></"+c+">"}break;case 4:case 3:b=dijit._editor.escapeXml(a.nodeValue,!0);break;case 8:b="<\!--"+dijit._editor.escapeXml(a.nodeValue,!0)+"--\>";break;default:b="<\!-- Element not recognized - Type: "+a.nodeType+" Name: "+a.nodeName+"--\>"}return b},dijit._editor.getChildrenHtml=function(a){var b="";if(!a)return b;for(var c=a.childNodes||a,d=!dojo.isIE||c!==a,e,f=0;e=c[f++];)if(!d||e.parentNode==a)b+=dijit._editor.getNodeHtml(e);return b};
if(!dojo._hasResource["dijit._editor.RichText"]){dojo._hasResource["dijit._editor.RichText"]=!0;dojo.provide("dijit._editor.RichText");if(!dojo.config.useXDomain||dojo.config.allowXdRichTextSave)if(dojo._postLoad)(function(){var a=dojo.doc.createElement("textarea");a.id=dijit._scopeName+"._editor.RichText.value";dojo.style(a,{display:"none",position:"absolute",top:"-100px",height:"3px",width:"3px"});dojo.body().appendChild(a)})();else try{dojo.doc.write('<textarea id="'+dijit._scopeName+'._editor.RichText.value" style="display:none;position:absolute;top:-100px;left:-100px;height:3px;width:3px;overflow:hidden;"></textarea>')}catch(e$$249){}dojo.declare("dijit._editor.RichText",
[dijit._Widget,dijit._CssStateMixin],{constructor:function(a){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(a&&dojo.isString(a.value))this.value=a.value;this.onLoadDeferred=new dojo.Deferred},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",
_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"==this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[dojo.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(dojo.isMoz)this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);
if(dojo.isWebKit)this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);if(dojo.isIE)this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);this.inherited(arguments);dojo.publish(dijit._scopeName+"._editor.RichText::init",[this]);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var a=dojo.hitch(this,function(a,b){return function(){return!this.execCommand(a,
b)}}),b={b:a("bold"),i:a("italic"),u:a("underline"),a:a("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:a("formatblock","h1"),2:a("formatblock","h2"),3:a("formatblock","h3"),4:a("formatblock","h4"),"\\":a("insertunorderedlist")};if(!dojo.isIE)b.Z=a("redo");for(var c in b)this.addKeyHandler(c,!0,!1,b[c])},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(dijit._editor._editorCommandsLocalized)this._local2NativeFormatNames=
dijit._editor._local2NativeFormatNames,this._native2LocalFormatNames=dijit._editor._native2LocalFormatNames;else{dijit._editor._editorCommandsLocalized=!0;dijit._editor._local2NativeFormatNames={};dijit._editor._native2LocalFormatNames={};this._local2NativeFormatNames=dijit._editor._local2NativeFormatNames;this._native2LocalFormatNames=dijit._editor._native2LocalFormatNames;for(var a=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"],b="",c,d=0;c=a[d++];)b+=c.charAt(1)!=="l"?"<"+
c+"><span>content</span></"+c+"><br/>":"<"+c+"><li>content</li></"+c+"><br/>";var e=dojo.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:0.01},innerHTML:b});dojo.body().appendChild(e);a=dojo.hitch(this,function(){for(var a=e.firstChild;a;)try{dijit._editor.selection.selectElement(a.firstChild);var b=a.tagName.toLowerCase();this._local2NativeFormatNames[b]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[b]]=b;a=a.nextSibling.nextSibling}catch(c){}e.parentNode.removeChild(e);
e.innerHTML=""});setTimeout(a,0)}},open:function(a){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0)this.onLoadDeferred=new dojo.Deferred;this.isClosed||this.close();dojo.publish(dijit._scopeName+"._editor.RichText::open",[this]);if(arguments.length==1&&a.nodeName)this.domNode=a;var b=this.domNode,c;if(dojo.isString(this.value))c=this.value,delete this.value,b.innerHTML="";else if(b.nodeName&&b.nodeName.toLowerCase()=="textarea"){var d=this.textarea=b;this.name=d.name;c=d.value;b=this.domNode=
dojo.doc.createElement("div");b.setAttribute("widgetId",this.id);d.removeAttribute("widgetId");b.cssText=d.cssText;b.className+=" "+d.className;dojo.place(b,d,"before");var e=dojo.hitch(this,function(){dojo.style(d,{display:"block",position:"absolute",top:"-1000px"});if(dojo.isIE){var a=d.style;this.__overflow=a.overflow;a.overflow="hidden"}});dojo.isIE?setTimeout(e,10):e();if(d.form){var f=d.value;this.reset=function(){this.getValue()!=f&&this.replaceValue(f)};dojo.connect(d.form,"onsubmit",this,
function(){dojo.attr(d,"disabled",this.disabled);d.value=this.getValue()})}}else c=dijit._editor.getChildrenHtml(b),b.innerHTML="";e=dojo.contentBox(b);this._oldHeight=e.h;this._oldWidth=e.w;this.value=c;if(b.nodeName&&b.nodeName=="LI")b.innerHTML=" <br>";this.header=b.ownerDocument.createElement("div");b.appendChild(this.header);this.editingArea=b.ownerDocument.createElement("div");b.appendChild(this.editingArea);this.footer=b.ownerDocument.createElement("div");b.appendChild(this.footer);if(!this.name)this.name=
this.id+"_AUTOGEN";if(this.name!==""&&(!dojo.config.useXDomain||dojo.config.allowXdRichTextSave)){if((e=dojo.byId(dijit._scopeName+"._editor.RichText.value"))&&e.value!=="")for(var g=e.value.split(this._SEPARATOR),h=0,j;j=g[h++];)if(j=j.split(this._NAME_CONTENT_SEP),j[0]==this.name){c=j[1];g=g.splice(h,1);e.value=g.join(this._SEPARATOR);break}if(!dijit._editor._globalSaveHandler)dijit._editor._globalSaveHandler={},dojo.addOnUnload(function(){for(var a in dijit._editor._globalSaveHandler){var b=dijit._editor._globalSaveHandler[a];
dojo.isFunction(b)&&b()}});dijit._editor._globalSaveHandler[this.id]=dojo.hitch(this,"_saveContent")}this.isClosed=!1;var k=this.editorObject=this.iframe=dojo.doc.createElement("iframe");k.id=this.id+"_iframe";this._iframeSrc=this._getIframeDocTxt();k.style.border="none";k.style.width="100%";if(this._layoutMode)k.style.height="100%";else if(dojo.isIE>=7){if(this.height)k.style.height=this.height;if(this.minHeight)k.style.minHeight=this.minHeight}else k.style.height=this.height?this.height:this.minHeight;
k.frameBorder=0;k._loadFunc=dojo.hitch(this,function(a){this.window=a;this.document=this.window.document;dojo.isIE&&this._localizeEditorCommands();this.onLoad(c)});var l="javascript:parent."+dijit._scopeName+'.byId("'+this.id+'")._iframeSrc';k.setAttribute("src",l);this.editingArea.appendChild(k);dojo.isSafari<=4&&(e=k.getAttribute("src"),(!e||e.indexOf("javascript")==-1)&&setTimeout(function(){k.setAttribute("src",l)},0));if(b.nodeName=="LI")b.lastChild.style.marginTop="-1.2em";dojo.addClass(this.domNode,
this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var a=dojo.getComputedStyle(this.domNode),b="",c=!0;if(dojo.isIE||dojo.isWebKit||!this.height&&!dojo.isMoz)b="<div id='dijitEditorBody'></div>",c=!1;else if(dojo.isMoz)this._cursorToStart=!0,b="&nbsp;";var d=[a.fontWeight,a.fontSize,a.fontFamily].join(" "),e=a.lineHeight,e=e.indexOf("px")>=0?parseFloat(e)/parseFloat(a.fontSize):e.indexOf("em")>=0?parseFloat(e):"normal",f="",g=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,
function(a){var a=a.replace(/^;/ig,"")+";",b=a.split(":")[0];if(b){var b=dojo.trim(b),b=b.toLowerCase(),c,d="";for(c=0;c<b.length;c++){var e=b.charAt(c);switch(e){case "-":c++,e=b.charAt(c).toUpperCase();default:d+=e}}dojo.style(g.domNode,d,"")}f+=a+";"});a=dojo.query('label[for="'+this.id+'"]');return[this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",dojo.isMoz&&a.length?"<title>"+a[0].innerHTML+"</title>\n":"","<meta http-equiv='Content-Type' content='text/html'>\n<style>\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n",
dojo.isWebKit?"\t\twidth: 100%;\n":"",dojo.isWebKit?"\t\theight: 100%;\n":"","\t}\n\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",d,";\n",this.height||dojo.isOpera?"":"\t\tposition: fixed;\n","\t\tmin-height:",this.minHeight,";\n\t\tline-height:",e,";\n\t}\n\tp{ margin: 1em 0; }\n",!c&&!this.height?"\tbody,html {overflow-y: hidden;}\n":"","\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",
!dojo.isIE?"\tli{ min-height:1.2em; }\n":"","</style>\n",this._applyEditingAreaStyleSheets(),"\n</head>\n<body ",c?"id='dijitEditorBody' ":"","onload='frameElement._loadFunc(window,document)' style='"+f+"'>",b,"</body>\n</html>"].join("")},_applyEditingAreaStyleSheets:function(){var a=[];if(this.styleSheets)a=this.styleSheets.split(";"),this.styleSheets="";a=a.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var b="",c=0,d;d=a[c++];)d=(new dojo._Url(dojo.global.location,d)).toString(),
this.editingAreaStyleSheets.push(d),b+='<link rel="stylesheet" type="text/css" href="'+d+'"/>';return b},addStyleSheet:function(a){var b=a.toString();if(b.charAt(0)=="."||b.charAt(0)!="/"&&!a.host)b=(new dojo._Url(dojo.global.location,b)).toString();dojo.indexOf(this.editingAreaStyleSheets,b)>-1||(this.editingAreaStyleSheets.push(b),this.onLoadDeferred.addCallback(dojo.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(b);else{var a=this.document.getElementsByTagName("head")[0],
d=this.document.createElement("link");d.rel="stylesheet";d.type="text/css";d.href=b;a.appendChild(d)}})))},removeStyleSheet:function(a){var b=a.toString();if(b.charAt(0)=="."||b.charAt(0)!="/"&&!a.host)b=(new dojo._Url(dojo.global.location,b)).toString();a=dojo.indexOf(this.editingAreaStyleSheets,b);a!=-1&&(delete this.editingAreaStyleSheets[a],dojo.withGlobal(this.window,"query",dojo,['link:[href="'+b+'"]']).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(a){a=
!!a;this._set("disabled",a);if(this.isLoaded){if(dojo.isIE||dojo.isWebKit||dojo.isOpera){var b=dojo.isIE&&(this.isLoaded||!this.focusOnLoad);if(b)this.editNode.unselectable="on";this.editNode.contentEditable=!a;if(b){var c=this;setTimeout(function(){c.editNode.unselectable="off"},0)}}else{try{this.document.designMode=a?"off":"on"}catch(d){return}if(!a&&this._mozSettingProps)for(b in a=this._mozSettingProps,a)if(a.hasOwnProperty(b))try{this.document.execCommand(b,!1,a[b])}catch(e){}}this._disabledOK=
!0}},onLoad:function(a){if(!this.window.__registeredWindow)this.window.__registeredWindow=!0,this._iframeRegHandle=dijit.registerIframe(this.iframe);if(!dojo.isIE&&!dojo.isWebKit&&(this.height||dojo.isMoz))this.editNode=this.document.body;else{this.editNode=this.document.body.firstChild;var b=this;if(dojo.isIE)this.tabStop=dojo.create("div",{tabIndex:-1},this.editingArea),this.iframe.onfocus=function(){b.editNode.setActive()}}this.focusNode=this.editNode;var c=this.events.concat(this.captureEvents),
d=this.iframe?this.document:this.editNode;dojo.forEach(c,function(a){this.connect(d,a.toLowerCase(),a)},this);this.connect(d,"onmouseup","onClick");dojo.isIE?(this.connect(this.document,"onmousedown","_onIEMouseDown"),this.editNode.style.zoom=1):this.connect(this.document,"onmousedown",function(){delete this._cursorToStart});if(dojo.isWebKit)this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged"),this.connect(this.document,"onmousedown",function(a){(a=a.target)&&(a===this.document.body||
a===this.document)&&setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0)});if(dojo.isIE)try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(e){}this.isLoaded=!0;this.set("disabled",this.disabled);c=dojo.hitch(this,function(){this.setValue(a);this.onLoadDeferred&&this.onLoadDeferred.callback(!0);this.onDisplayChanged();this.focusOnLoad&&dojo.addOnLoad(dojo.hitch(this,function(){setTimeout(dojo.hitch(this,"focus"),this.updateInterval)}));this.value=this.getValue(!0)});this.setValueDeferred?
this.setValueDeferred.addCallback(c):c()},onKeyDown:function(a){if(a.keyCode===dojo.keys.TAB&&this.isTabIndent&&(dojo.stopEvent(a),this.queryCommandEnabled(a.shiftKey?"outdent":"indent")))this.execCommand(a.shiftKey?"outdent":"indent");if(dojo.isIE)if(a.keyCode==dojo.keys.TAB&&!this.isTabIndent)a.shiftKey&&!a.ctrlKey&&!a.altKey?this.iframe.focus():!a.shiftKey&&!a.ctrlKey&&!a.altKey&&this.tabStop.focus();else if(a.keyCode===dojo.keys.BACKSPACE&&this.document.selection.type==="Control")dojo.stopEvent(a),
this.execCommand("delete");else if(65<=a.keyCode&&a.keyCode<=90||a.keyCode>=37&&a.keyCode<=40)a.charCode=a.keyCode,this.onKeyPress(a);return!0},onKeyUp:function(){},setDisabled:function(a){dojo.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",a)},_setValueAttr:function(a){this.setValue(a)},_setDisableSpellCheckAttr:function(a){this.document?dojo.attr(this.document.body,"spellcheck",!a):this.onLoadDeferred.addCallback(dojo.hitch(this,
function(){dojo.attr(this.document.body,"spellcheck",!a)}));this._set("disableSpellCheck",a)},onKeyPress:function(a){var b=this._keyHandlers[a.keyChar&&a.keyChar.toLowerCase()||a.keyCode],c=arguments;b&&!a.altKey&&dojo.some(b,function(b){if(!(b.shift^a.shiftKey)&&!(b.ctrl^(a.ctrlKey||a.metaKey)))return b.handler.apply(this,c)||a.preventDefault(),!0},this);if(!this._onKeyHitch)this._onKeyHitch=dojo.hitch(this,"onKeyPressed");setTimeout(this._onKeyHitch,1);return!0},addKeyHandler:function(a,b,c,d){dojo.isArray(this._keyHandlers[a])||
(this._keyHandlers[a]=[]);this._keyHandlers[a].push({shift:c||!1,ctrl:b||!1,handler:d})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(a){this.onDisplayChanged(a)},_onIEMouseDown:function(){!this._focused&&!this.disabled&&this.focus()},_onBlur:function(a){this.inherited(arguments);var b=this.getValue(!0);if(b!=this.value)this.onChange(b);this._set("value",b)},_onFocus:function(a){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!dojo.isIE&&
this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():dojo.doc.body.focus&&dojo.doc.body.focus()},focus:function(){if(this.isLoaded){if(this._cursorToStart&&(delete this._cursorToStart,this.editNode.childNodes)){this.placeCursorAtStart();return}dojo.isIE?this.editNode&&this.editNode.focus&&this.iframe.fireEvent("onfocus",document.createEventObject()):dijit.focus(this.iframe)}else this.focusOnLoad=!0},updateInterval:200,_updateTimer:null,
onDisplayChanged:function(){this._updateTimer&&clearTimeout(this._updateTimer);if(!this._updateHandler)this._updateHandler=dojo.hitch(this,"onNormalizedDisplayChanged");this._updateTimer=setTimeout(this._updateHandler,this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(a,b){var c=a.toLowerCase();c=="formatblock"?dojo.isSafari&&b===void 0&&(c="heading"):c=="hilitecolor"&&!dojo.isMoz&&(c="backcolor");return c},_qcaCache:{},
queryCommandAvailable:function(a){var b=this._qcaCache[a];return b!==void 0?b:this._qcaCache[a]=this._queryCommandAvailable(a)},_queryCommandAvailable:function(a){function b(a){return{ie:Boolean(a&c),mozilla:Boolean(a&d),webkit:Boolean(a&e),opera:Boolean(a&f)}}var c=1,d=2,e=4,f=8,g=null;switch(a.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":g=
b(d|c|e|f);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":g=b(d|c|f|e);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":g=b(c);break;case "cut":case "copy":case "paste":g=b(c|d|e);break;case "inserttable":g=
b(d|c);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":g=b(c|d);break;default:return!1}return dojo.isIE&&g.ie||dojo.isMoz&&g.mozilla||dojo.isWebKit&&g.webkit||dojo.isOpera&&g.opera},execCommand:function(a,b){var c;this.focus();a=this._normalizeCommand(a,b);if(b!==void 0)if(a=="heading")throw Error("unimplemented");else a=="formatblock"&&dojo.isIE&&(b="<"+b+">");var d="_"+a+"Impl";if(this[d])c=this[d](b);
else if((b=arguments.length>1?b:null)||a!="createlink")c=this.document.execCommand(a,!1,b);this.onDisplayChanged();return c},queryCommandEnabled:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);if(dojo.isMoz||dojo.isWebKit)if(a=="unlink")return this._sCall("hasAncestorElement",["a"]);else if(a=="inserttable")return!0;if(dojo.isWebKit)if(a=="cut"||a=="copy")return(a=this.window.getSelection())&&(a=a.toString()),!!a;else if(a=="paste")return!0;var b=dojo.isIE?this.document.selection.createRange():
this.document;try{return b.queryCommandEnabled(a)}catch(c){return!1}},queryCommandState:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);try{return this.document.queryCommandState(a)}catch(b){return!1}},queryCommandValue:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);if(dojo.isIE&&a=="formatblock")a=this._native2LocalFormatNames[this.document.queryCommandValue(a)];else if(dojo.isMoz&&a==="hilitecolor"){var b;try{b=this.document.queryCommandValue("styleWithCSS")}catch(c){b=
!1}this.document.execCommand("styleWithCSS",!1,!0);a=this.document.queryCommandValue(a);this.document.execCommand("styleWithCSS",!1,b)}else a=this.document.queryCommandValue(a);return a},_sCall:function(a,b){return dojo.withGlobal(this.window,a,dijit._editor.selection,b)},placeCursorAtStart:function(){this.focus();var a=!1;if(dojo.isMoz)for(var b=this.editNode.firstChild;b;){if(b.nodeType==3){if(b.nodeValue.replace(/^\s+|\s+$/g,"").length>0){a=!0;this._sCall("selectElement",[b]);break}}else if(b.nodeType==
1){a=!0;/br|input|img|base|meta|area|basefont|hr|link/.test(b.tagName?b.tagName.toLowerCase():"")?this._sCall("selectElement",[b]):this._sCall("selectElementChildren",[b]);break}b=b.nextSibling}else a=!0,this._sCall("selectElementChildren",[this.editNode]);a&&this._sCall("collapse",[!0])},placeCursorAtEnd:function(){this.focus();var a=!1;if(dojo.isMoz)for(var b=this.editNode.lastChild;b;){if(b.nodeType==3){if(b.nodeValue.replace(/^\s+|\s+$/g,"").length>0){a=!0;this._sCall("selectElement",[b]);break}}else if(b.nodeType==
1){a=!0;b.lastChild?this._sCall("selectElement",[b.lastChild]):this._sCall("selectElement",[b]);break}b=b.previousSibling}else a=!0,this._sCall("selectElementChildren",[this.editNode]);a&&this._sCall("collapse",[!1])},getValue:function(a){return this.textarea&&(this.isClosed||!this.isLoaded)?this.textarea.value:this._postFilterContent(null,a)},_getValueAttr:function(){return this.getValue(!0)},setValue:function(a){if(this.isLoaded){this._cursorToStart=!0;if(this.textarea&&(this.isClosed||!this.isLoaded))this.textarea.value=
a;else{var a=this._preFilterContent(a),b=this.isClosed?this.domNode:this.editNode;a&&dojo.isMoz&&a.toLowerCase()=="<p></p>"&&(a="<p>&nbsp;</p>");!a&&dojo.isWebKit&&(a="&nbsp;");b.innerHTML=a;this._preDomFilterContent(b)}this.onDisplayChanged();this._set("value",this.getValue(!0))}else this.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.setValue(a)}))},replaceValue:function(a){if(this.isClosed)this.setValue(a);else if(this.window&&this.window.getSelection&&!dojo.isMoz)this.setValue(a);
else if(this.window&&this.window.getSelection){a=this._preFilterContent(a);this.execCommand("selectall");if(!a)this._cursorToStart=!0,a="&nbsp;";this.execCommand("inserthtml",a);this._preDomFilterContent(this.editNode)}else this.document&&this.document.selection&&this.setValue(a);this._set("value",this.getValue(!0))},_preFilterContent:function(a){var b=a;dojo.forEach(this.contentPreFilters,function(a){a&&(b=a(b))});return b},_preDomFilterContent:function(a){a=a||this.editNode;dojo.forEach(this.contentDomPreFilters,
function(b){b&&dojo.isFunction(b)&&b(a)},this)},_postFilterContent:function(a,b){var c;dojo.isString(a)?c=a:(a=a||this.editNode,this.contentDomPostFilters.length&&(b&&(a=dojo.clone(a)),dojo.forEach(this.contentDomPostFilters,function(b){a=b(a)})),c=dijit._editor.getChildrenHtml(a));dojo.trim(c.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(c="");dojo.forEach(this.contentPostFilters,function(a){c=a(c)});return c},_saveContent:function(){var a=dojo.byId(dijit._scopeName+"._editor.RichText.value");
a.value&&(a.value+=this._SEPARATOR);a.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0)},escapeXml:function(a,b){a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");b||(a=a.replace(/'/gm,"&#39;"));return a},getNodeHtml:function(a){dojo.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit._editor.getNodeHtml instead",2);return dijit._editor.getNodeHtml(a)},getNodeChildrenHtml:function(a){dojo.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated",
"use dijit._editor.getChildrenHtml instead",2);return dijit._editor.getChildrenHtml(a)},close:function(a){if(!this.isClosed){arguments.length||(a=!0);a&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this.disconnect(this._webkitListener),delete this._webkitListener);if(dojo.isIE)this.iframe.onfocus=null;this.iframe._loadFunc=null;this._iframeRegHandle&&(dijit.unregisterIframe(this._iframeRegHandle),delete this._iframeRegHandle);if(this.textarea){var b=
this.textarea.style;b.position="";b.left=b.top="";if(dojo.isIE)b.overflow=this.__overflow,this.__overflow=null;this.textarea.value=this.value;dojo.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;dojo.removeClass(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement)this.window._frameElement=null;this.editorObject=this.editingArea=this.document=this.window=
null}},destroy:function(){this.isClosed||this.close(!1);this.inherited(arguments);dijit._editor._globalSaveHandler&&delete dijit._editor._globalSaveHandler[this.id]},_removeMozBogus:function(a){return a.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(a){a=a.replace(/\sclass="webkit-block-placeholder"/gi,"");a=a.replace(/\sclass="apple-style-span"/gi,"");return a=a.replace(/<meta charset=\"utf-8\" \/>/gi,"")},_normalizeFontStyle:function(a){return a.replace(/<(\/)?strong([ \>])/gi,
"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2")},_preFixUrlAttributes:function(a){return a.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2")},_inserthorizontalruleImpl:function(a){return dojo.isIE?this._inserthtmlImpl("<hr>"):this.document.execCommand("inserthorizontalrule",!1,a)},_unlinkImpl:function(a){return this.queryCommandEnabled("unlink")&&
(dojo.isMoz||dojo.isWebKit)?(this._sCall("selectElement",[this._sCall("getAncestorElement",["a"])]),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",!1,a)},_hilitecolorImpl:function(a){dojo.isMoz?(this.document.execCommand("styleWithCSS",!1,!0),a=this.document.execCommand("hilitecolor",!1,a),this.document.execCommand("styleWithCSS",!1,!1)):a=this.document.execCommand("hilitecolor",!1,a);return a},_backcolorImpl:function(a){dojo.isIE&&(a=a?a:null);return this.document.execCommand("backcolor",
!1,a)},_forecolorImpl:function(a){dojo.isIE&&(a=a?a:null);return this.document.execCommand("forecolor",!1,a)},_inserthtmlImpl:function(a){var a=this._preFilterContent(a),b=!0;if(dojo.isIE){var c=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()=="CONTROL"){for(var d=c.item(0);c.length;)c.remove(c.item(0));d.outerHTML=a}else c.pasteHTML(a);c.select()}else dojo.isMoz&&!a.length?this._sCall("remove"):b=this.document.execCommand("inserthtml",!1,a);return b},_boldImpl:function(a){dojo.isIE&&
this._adaptIESelection();return this.document.execCommand("bold",!1,a)},_italicImpl:function(a){dojo.isIE&&this._adaptIESelection();return this.document.execCommand("italic",!1,a)},_underlineImpl:function(a){dojo.isIE&&this._adaptIESelection();return this.document.execCommand("underline",!1,a)},_strikethroughImpl:function(a){dojo.isIE&&this._adaptIESelection();return this.document.execCommand("strikethrough",!1,a)},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},
_getNodeChildrenHeight:function(a){var b=0;if(a&&a.childNodes){var c;for(c=0;c<a.childNodes.length;c++){var d=dojo.position(a.childNodes[c]);b+=d.h}}return b},_isNodeEmpty:function(a,b){if(a.nodeType==1)return a.childNodes.length>0?this._isNodeEmpty(a.childNodes[0],b):!0;else if(a.nodeType==3)return a.nodeValue.substring(b)=="";return!1},_removeStartingRangeFromRange:function(a,b){if(a.nextSibling)b.setStart(a.nextSibling,0);else{for(var c=a.parentNode;c&&c.nextSibling==null;)c=c.parentNode;c&&b.setStart(c.nextSibling,
0)}return b},_adaptIESelection:function(){var a=dijit.range.getSelection(this.window);if(a&&a.rangeCount&&!a.isCollapsed){for(var b=a.getRangeAt(0),c=b.startContainer,d=b.startOffset;c.nodeType==3&&d>=c.length&&c.nextSibling;)d-=c.length,c=c.nextSibling;for(var e=null;this._isNodeEmpty(c,d)&&c!=e;)e=c,b=this._removeStartingRangeFromRange(c,b),c=b.startContainer,d=0;a.removeAllRanges();a.addRange(b)}}})}
dojo._hasResource["dijit.ToolbarSeparator"]||(dojo._hasResource["dijit.ToolbarSeparator"]=!0,dojo.provide("dijit.ToolbarSeparator"),dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}}));
dojo._hasResource["dijit.Toolbar"]||(dojo._hasResource["dijit.Toolbar"]=!0,dojo.provide("dijit.Toolbar"),dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" dojoAttachPoint="containerNode"></div>',baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:
[dojo.keys.LEFT_ARROW])},startup:function(){this._started||(this.startupKeyNavChildren(),this.inherited(arguments))}}));
dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]||(dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]=!0,dojo.provide("dijit._editor.plugins.EnterKeyHandling"),dojo.declare("dijit._editor.plugins.EnterKeyHandling",dijit._editor._Plugin,{blockNodeForEnter:"BR",constructor:function(a){if(a){if("blockNodeForEnter"in a)a.blockNodeForEnter=a.blockNodeForEnter.toUpperCase();dojo.mixin(this,a)}},setEditor:function(a){if(this.editor!==a)if(this.editor=a,this.blockNodeForEnter=="BR")this.editor.customUndo=
!0,a.onLoadDeferred.addCallback(dojo.hitch(this,function(b){this.connect(a.document,"onkeypress",function(a){if(a.charOrCode==dojo.keys.ENTER){var b=dojo.mixin({},a);b.shiftKey=!0;this.handleEnterKey(b)||dojo.stopEvent(a)}});return b}));else if(this.blockNodeForEnter){var b=dojo.hitch(this,this.handleEnterKey);a.addKeyHandler(13,0,0,b);a.addKeyHandler(13,0,1,b);this.connect(this.editor,"onKeyPressed","onKeyPressed")}},onKeyPressed:function(){if(this._checkListLater){if(dojo.withGlobal(this.editor.window,
"isCollapsed",dijit)){var a=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,["LI"]);if(a){if(dojo.isMoz&&a.parentNode.parentNode.nodeName=="LI")a=a.parentNode.parentNode;var b=a.firstChild;if(b&&b.nodeType==1&&(b.nodeName=="UL"||b.nodeName=="OL"))a.insertBefore(b.ownerDocument.createTextNode("\u00a0"),b),b=dijit.range.create(this.editor.window),b.setStart(a.firstChild,0),a=dijit.range.getSelection(this.editor.window,!0),a.removeAllRanges(),a.addRange(b)}else dijit._editor.RichText.prototype.execCommand.call(this.editor,
"formatblock",this.blockNodeForEnter),(a=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]))?(a.innerHTML=this.bogusHtmlContent,dojo.isIE&&(a=this.editor.document.selection.createRange(),a.move("character",-1),a.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},
bogusHtmlContent:"&nbsp;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(a){var t;var b,c,d,e,f,g,h=this.editor.document,j,k,l;if(a.shiftKey){j=dojo.withGlobal(this.editor.window,"getParentElement",dijit._editor.selection);if(a=dijit.range.getAncestor(j,this.blockNodes)){if(a.tagName=="LI")return!0;b=dijit.range.getSelection(this.editor.window);c=b.getRangeAt(0);c.collapsed||(c.deleteContents(),b=dijit.range.getSelection(this.editor.window),c=b.getRangeAt(0));if(dijit.range.atBeginningOfContainer(a,
c.startContainer,c.startOffset))j=h.createElement("br"),d=dijit.range.create(this.editor.window),a.insertBefore(j,a.firstChild),d.setStartBefore(j.nextSibling),b.removeAllRanges(),b.addRange(d);else if(dijit.range.atEndOfContainer(a,c.startContainer,c.startOffset))d=dijit.range.create(this.editor.window),j=h.createElement("br"),a.appendChild(j),a.appendChild(h.createTextNode("\u00a0")),d.setStart(a.lastChild,0),b.removeAllRanges(),b.addRange(d);else return(k=c.startContainer)&&k.nodeType==3?(l=k.nodeValue,
dojo.withGlobal(this.editor.window,function(){e=h.createTextNode(l.substring(0,c.startOffset));f=h.createTextNode(l.substring(c.startOffset));g=h.createElement("br");f.nodeValue==""&&dojo.isWebKit&&(f=h.createTextNode("\u00a0"));dojo.place(e,k,"after");dojo.place(g,e,"after");dojo.place(f,g,"after");dojo.destroy(k);d=dijit.range.create(dojo.gobal);d.setStart(f,0);b.removeAllRanges();b.addRange(d)}),!1):!0}else if(b=dijit.range.getSelection(this.editor.window),b.rangeCount){if((c=b.getRangeAt(0))&&
c.startContainer)c.collapsed||(c.deleteContents(),b=dijit.range.getSelection(this.editor.window),c=b.getRangeAt(0)),(k=c.startContainer)&&k.nodeType==3?dojo.withGlobal(this.editor.window,dojo.hitch(this,function(){var a=!1,j=c.startOffset;if(k.length<j)q=this._adjustNodeAndOffset(k,j),k=q.node,j=q.offset;l=k.nodeValue;e=h.createTextNode(l.substring(0,j));f=h.createTextNode(l.substring(j));g=h.createElement("br");f.length||(f=h.createTextNode("\u00a0"),a=!0);e.length?dojo.place(e,k,"after"):e=k;dojo.place(g,
e,"after");dojo.place(f,g,"after");dojo.destroy(k);d=dijit.range.create(dojo.gobal);d.setStart(f,0);d.setEnd(f,f.length);b.removeAllRanges();b.addRange(d);a&&!dojo.isWebKit?dijit._editor.selection.remove():dijit._editor.selection.collapse(!0)})):dojo.withGlobal(this.editor.window,dojo.hitch(this,function(){var a=h.createElement("br");k.appendChild(a);a=h.createTextNode("\u00a0");k.appendChild(a);d=dijit.range.create(dojo.global);d.setStart(a,0);d.setEnd(a,a.length);b.removeAllRanges();b.addRange(d);
dijit._editor.selection.collapse(!0)}))}else dijit._editor.RichText.prototype.execCommand.call(this.editor,"inserthtml","<br>");return!1}var p=!0;b=dijit.range.getSelection(this.editor.window);c=b.getRangeAt(0);c.collapsed||(c.deleteContents(),b=dijit.range.getSelection(this.editor.window),c=b.getRangeAt(0));var a=dijit.range.getBlockAncestor(c.endContainer,null,this.editor.editNode),n=a.blockNode;if(this._checkListLater=n&&(n.nodeName=="LI"||n.parentNode.nodeName=="LI")){if(dojo.isMoz)this._pressedEnterInBlock=
n;if(/^(\s|&nbsp;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|\xA0)<\/span>)?(<br>)?$/.test(n.innerHTML))n.innerHTML="",dojo.isWebKit&&(d=dijit.range.create(this.editor.window),d.setStart(n,0),b.removeAllRanges(),b.addRange(d)),this._checkListLater=!1;return!0}if(!a.blockNode||a.blockNode===this.editor.editNode){try{dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(o){}a={blockNode:dojo.withGlobal(this.editor.window,"getAncestorElement",
dijit._editor.selection,[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(a.blockNode){if(a.blockNode!=this.editor.editNode&&!(a.blockNode.textContent||a.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(a.blockNode),!1}else a.blockNode=this.editor.editNode;b=dijit.range.getSelection(this.editor.window);c=b.getRangeAt(0)}n=h.createElement(this.blockNodeForEnter);n.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(a.blockNode);var m=c.endOffset,p=
c.endContainer;if(p.length<m)var q=this._adjustNodeAndOffset(p,m),p=q.node,m=q.offset;if(dijit.range.atEndOfContainer(a.blockNode,p,m))a.blockNode===a.blockContainer?a.blockNode.appendChild(n):dojo.place(n,a.blockNode,"after"),p=!1,d=dijit.range.create(this.editor.window),d.setStart(n,0),b.removeAllRanges(),b.addRange(d),this.editor.height&&dojo.window.scrollIntoView(n);else if(dijit.range.atBeginningOfContainer(a.blockNode,c.startContainer,c.startOffset))dojo.place(n,a.blockNode,a.blockNode===a.blockContainer?
"first":"before"),n.nextSibling&&this.editor.height&&(d=dijit.range.create(this.editor.window),d.setStart(n.nextSibling,0),b.removeAllRanges(),b.addRange(d),dojo.window.scrollIntoView(n.nextSibling)),p=!1;else{a.blockNode===a.blockContainer?a.blockNode.appendChild(n):dojo.place(n,a.blockNode,"after");p=!1;if(a.blockNode.style&&n.style&&a.blockNode.style.cssText)n.style.cssText=a.blockNode.style.cssText;k=c.startContainer;var r;if(k&&k.nodeType==3){var s,m=c.endOffset;if(k.length<m)q=this._adjustNodeAndOffset(k,
m),k=q.node,m=q.offset;l=k.nodeValue;e=h.createTextNode(l.substring(0,m));f=h.createTextNode(l.substring(m,l.length));dojo.place(e,k,"before");dojo.place(f,k,"after");dojo.destroy(k);for(r=e.parentNode;r!==a.blockNode;){var u=h.createElement(r.tagName);if(r.style&&u.style&&r.style.cssText)u.style.cssText=r.style.cssText;if(r.tagName==="FONT"){if(r.color)u.color=r.color;if(r.face)u.face=r.face;if(r.size)u.size=r.size}for(m=f;m;)s=m.nextSibling,u.appendChild(m),m=s;dojo.place(u,r,"after");e=r;f=u;r=
r.parentNode}m=f;if(m.nodeType==1||m.nodeType==3&&m.nodeValue)n.innerHTML="";for(r=m;m;)s=m.nextSibling,n.appendChild(m),m=s}d=dijit.range.create(this.editor.window);if(this.blockNodeForEnter!=="BR"){for(;r;)j=r,t=s=r.firstChild,r=t;if(j&&j.parentNode){if(n=j.parentNode,d.setStart(n,0),b.removeAllRanges(),b.addRange(d),this.editor.height&&dijit.scrollIntoView(n),dojo.isMoz)this._pressedEnterInBlock=a.blockNode}else p=!0}else if(d.setStart(n,0),b.removeAllRanges(),b.addRange(d),this.editor.height&&
dijit.scrollIntoView(n),dojo.isMoz)this._pressedEnterInBlock=a.blockNode}return p},_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&a.nextSibling.nodeType==3;)b-=a.length,a=a.nextSibling;return{node:a,offset:b}},removeTrailingBr:function(a){if(a=/P|DIV|LI/i.test(a.tagName)?a:dijit._editor.selection.getParentOfType(a,["P","DIV","LI"]))if(a.lastChild&&(a.childNodes.length>1&&a.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(a.lastChild.nodeValue)||a.lastChild.tagName=="BR")&&dojo.destroy(a.lastChild),
!a.childNodes.length)a.innerHTML=this.bogusHtmlContent}}));
dojo._hasResource["dijit.Editor"]||(dojo._hasResource["dijit.Editor"]=!0,dojo.provide("dijit.Editor"),dojo.declare("dijit.Editor",dijit._editor.RichText,{plugins:null,extraPlugins:null,constructor:function(){if(!dojo.isArray(this.plugins))this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","dijit._editor.plugins.EnterKeyHandling"];
this._plugins=[];this._editInterval=this.editActionInterval*1E3;dojo.isIE&&(this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate"))},postMixInProperties:function(){this.setValueDeferred=new dojo.Deferred;this.inherited(arguments)},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(dojo.isArray(this.extraPlugins))this.plugins=this.plugins.concat(this.extraPlugins);this.inherited(arguments);this.commands=dojo.i18n.getLocalization("dijit._editor",
"commands",this.lang);if(!this.toolbar)this.toolbar=new dijit.Toolbar({dir:this.dir,lang:this.lang}),this.header.appendChild(this.toolbar.domNode);dojo.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.callback(!0);dojo.addClass(this.iframe.parentNode,"dijitEditorIFrameContainer");dojo.addClass(this.iframe,"dijitEditorIFrame");dojo.attr(this.iframe,"allowTransparency",!0);dojo.isWebKit&&dojo.style(this.domNode,"KhtmlUserSelect","none");this.toolbar.startup();this.onNormalizedDisplayChanged()},
destroy:function(){dojo.forEach(this._plugins,function(a){a&&a.destroy&&a.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(a,b){var c=dojo.isString(a)?{name:a}:a;if(!c.setEditor){var d={args:c,plugin:null,editor:this};dojo.publish(dijit._scopeName+".Editor.getPlugin",[d]);if(!d.plugin){var e=dojo.getObject(c.name);if(e)d.plugin=new e(c)}if(!d.plugin){console.warn("Cannot find plugin",a);return}a=d.plugin}arguments.length>
1?this._plugins[b]=a:this._plugins.push(a);a.setEditor(this);dojo.isFunction(a.setToolbar)&&a.setToolbar(this.toolbar)},startup:function(){},resize:function(a){a&&dijit.layout._LayoutWidget.prototype.resize.apply(this,arguments)},layout:function(){this.editingArea.style.height=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+dojo._getPadBorderExtents(this.iframe.parentNode).h+dojo._getMarginExtents(this.iframe.parentNode).h)+"px";if(this.iframe)this.iframe.style.height="100%";this._layoutMode=
!0},_onIEMouseDown:function(a){var b,c=this.document.body,d=c.clientWidth,e=c.clientHeight,f=c.clientLeft,g=c.offsetWidth,h=c.offsetHeight,j=c.offsetLeft;bodyDir=c.dir?c.dir.toLowerCase():"";bodyDir!="rtl"?d<g&&a.x>d&&a.x<g&&(b=!0):a.x<f&&a.x>j&&(b=!0);b||e<h&&a.y>e&&a.y<h&&(b=!0);b||(delete this._cursorToStart,delete this._savedSelection,a.target.tagName=="BODY"&&setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0),this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(a){this.customUndo&&
this.endEditing(!0);a.target.tagName!="BODY"&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(a){if(!this._inEditing)this._inEditing=!0,this._beginEditing(a);if(this.editActionInterval>0)this._editTimer&&clearTimeout(this._editTimer),this._editTimer=setTimeout(dojo.hitch(this,this.endEditing),this._editInterval)},_steps:[],_undoedSteps:[],execCommand:function(a){if(this.customUndo&&(a=="undo"||a=="redo"))return this[a]();else{this.customUndo&&(this.endEditing(),this._beginEditing());
var b,c=/copy|cut|paste/.test(a);try{if(b=this.inherited(arguments),dojo.isWebKit&&c&&!b)throw{code:1011};}catch(d){if(d.code==1011&&c)b=dojo.string.substitute,alert(b(this.commands.systemShortcut,[this.commands[a],b(this.commands[dojo.isMac?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[a]])]));b=!1}this.customUndo&&this._endEditing();return b}},queryCommandEnabled:function(a){return this.customUndo&&(a=="undo"||a=="redo")?a=="undo"?this._steps.length>1:this._undoedSteps.length>0:this.inherited(arguments)},
_moveToBookmark:function(a){var b=a.mark,c=a.mark,a=a.isCollapsed,d,e,f;if(c)if(dojo.isIE<9)if(dojo.isArray(c))b=[],dojo.forEach(c,function(a){b.push(dijit.range.getNode(a,this.editNode))},this),dojo.withGlobal(this.window,"moveToBookmark",dijit,[{mark:b,isCollapsed:a}]);else{if(c.startContainer&&c.endContainer&&(f=dijit.range.getSelection(this.window))&&f.removeAllRanges)f.removeAllRanges(),a=dijit.range.create(this.window),d=dijit.range.getNode(c.startContainer,this.editNode),e=dijit.range.getNode(c.endContainer,
this.editNode),d&&e&&(a.setStart(d,c.startOffset),a.setEnd(e,c.endOffset),f.addRange(a))}else if((f=dijit.range.getSelection(this.window))&&f.removeAllRanges)f.removeAllRanges(),a=dijit.range.create(this.window),d=dijit.range.getNode(c.startContainer,this.editNode),e=dijit.range.getNode(c.endContainer,this.editNode),d&&e&&(a.setStart(d,c.startOffset),a.setEnd(e,c.endOffset),f.addRange(a))},_changeToStep:function(a,b){this.setValue(b.text);var c=b.bookmark;c&&this._moveToBookmark(c)},undo:function(){var a=
!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var b=this._steps.pop();b&&this._steps.length>0&&(this.focus(),this._changeToStep(b,this._steps[this._steps.length-1]),this._undoedSteps.push(b),this.onDisplayChanged(),delete this._undoRedoActive,a=!0);delete this._undoRedoActive}return a},redo:function(){var a=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var b=this._undoedSteps.pop();b&&this._steps.length>0&&(this.focus(),this._changeToStep(this._steps[this._steps.length-
1],b),this._steps.push(b),this.onDisplayChanged(),a=!0);delete this._undoRedoActive}return a},endEditing:function(a){this._editTimer&&clearTimeout(this._editTimer);if(this._inEditing)this._endEditing(a),this._inEditing=!1},_getBookmark:function(){var a=dojo.withGlobal(this.window,dijit.getBookmark),b=[];if(a&&a.mark){var c=a.mark;if(dojo.isIE<9){var d=dijit.range.getSelection(this.window);if(dojo.isArray(c))dojo.forEach(a.mark,function(a){b.push(dijit.range.getIndex(a,this.editNode).o)},this),a.mark=
b;else if(d){var e;d.rangeCount&&(e=d.getRangeAt(0));a.mark=e?e.cloneRange():dojo.withGlobal(this.window,dijit.getBookmark)}}try{if(a.mark&&a.mark.startContainer)b=dijit.range.getIndex(a.mark.startContainer,this.editNode).o,a.mark={startContainer:b,startOffset:a.mark.startOffset,endContainer:a.mark.endContainer===a.mark.startContainer?b:dijit.range.getIndex(a.mark.endContainer,this.editNode).o,endOffset:a.mark.endOffset}}catch(f){a.mark=null}}return a},_beginEditing:function(){this._steps.length===
0&&this._steps.push({text:dijit._editor.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var a=dijit._editor.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:a,bookmark:this._getBookmark()})},onKeyDown:function(a){!dojo.isIE&&!this.iframe&&a.keyCode==dojo.keys.TAB&&!this.tabIndent&&this._saveSelection();if(this.customUndo){var b=a.keyCode,c=dojo.keys;if(a.ctrlKey&&!a.altKey)if(b==90||b==122){dojo.stopEvent(a);this.undo();return}else if(b==
89||b==121){dojo.stopEvent(a);this.redo();return}this.inherited(arguments);switch(b){case c.ENTER:case c.BACKSPACE:case c.DELETE:this.beginEditing();break;case 88:case 86:if(a.ctrlKey&&!a.altKey&&!a.metaKey){this.endEditing();a.keyCode==88?this.beginEditing("cut"):this.beginEditing("paste");setTimeout(dojo.hitch(this,this.endEditing),1);break}default:if(!a.ctrlKey&&!a.altKey&&!a.metaKey&&(a.keyCode<dojo.keys.F1||a.keyCode>dojo.keys.F15)){this.beginEditing();break}case c.ALT:this.endEditing();break;
case c.UP_ARROW:case c.DOWN_ARROW:case c.LEFT_ARROW:case c.RIGHT_ARROW:case c.HOME:case c.END:case c.PAGE_UP:case c.PAGE_DOWN:this.endEditing(!0);case c.CTRL:case c.SHIFT:case c.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(a){}},_restoreSelection:function(){this._savedSelection&&(delete this._cursorToStart,dojo.withGlobal(this.window,"isCollapsed",dijit)&&this._moveToBookmark(this._savedSelection),
delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(a){this.customUndo?this.isClosed?this.setValue(a):(this.beginEditing(),a||(a="&nbsp;"),this.setValue(a),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(a){this.setValueDeferred.addCallback(dojo.hitch(this,function(){!this.disabled&&a||!this._buttonEnabledPlugins&&a?dojo.forEach(this._plugins,function(a){a.set("disabled",!0)}):this.disabled&&!a&&dojo.forEach(this._plugins,
function(a){a.set("disabled",!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&dojo.style(this.document.body,"color",dojo.style(this.iframe,"color"))}catch(a){}}}),dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin){var b,c=dijit._editor._Plugin,d=a.args.name;switch(d){case "undo":case "redo":case "cut":case "copy":case "paste":case "insertOrderedList":case "insertUnorderedList":case "indent":case "outdent":case "justifyCenter":case "justifyFull":case "justifyLeft":case "justifyRight":case "delete":case "selectAll":case "removeFormat":case "unlink":case "insertHorizontalRule":b=
new c({command:d});break;case "bold":case "italic":case "underline":case "strikethrough":case "subscript":case "superscript":b=new c({buttonClass:dijit.form.ToggleButton,command:d});break;case "|":b=new c({button:new dijit.ToolbarSeparator,setEditor:function(a){this.editor=a}})}a.plugin=b}}));
dojo._hasResource["dojox.grid.cells.dijit"]||(dojo._hasResource["dojox.grid.cells.dijit"]=!0,dojo.provide("dojox.grid.cells.dijit"),function(){var a=dojox.grid.cells;dojo.declare("dojox.grid.cells._Widget",a._Base,{widgetClass:dijit.form.TextBox,constructor:function(){this.widget=null;if(typeof this.widgetClass=="string")dojo.deprecated("Passing a string to widgetClass is deprecated","pass the widget class object instead","2.0"),this.widgetClass=dojo.getObject(this.widgetClass)},formatEditing:function(a,
c){this.needFormatNode(a,c);return"<div></div>"},getValue:function(){return this.widget.get("value")},setValue:function(a,c){if(this.widget&&this.widget.set)if(this.widget.onLoadDeferred){var d=this;this.widget.onLoadDeferred.addCallback(function(){d.widget.set("value",c===null?"":c)})}else this.widget.set("value",c);else this.inherited(arguments)},getWidgetProps:function(a){return dojo.mixin({dir:this.dir,lang:this.lang},this.widgetProps||{},{constraints:dojo.mixin({},this.constraint)||{},value:a})},
createWidget:function(a,c){return new this.widgetClass(this.getWidgetProps(c),a)},attachWidget:function(a,c,d){a.appendChild(this.widget.domNode);this.setValue(d,c)},formatNode:function(a,c,d){if(!this.widgetClass)return c;this.widget?this.attachWidget.apply(this,arguments):this.widget=this.createWidget.apply(this,arguments);this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(d);this.grid.scroller.rowHeightChanged(d,!0);this.focus()},sizeWidget:function(a,c,d){a=this.getNode(d);a=
dojo.contentBox(a);dojo.marginBox(this.widget.domNode,{w:a.w})},focus:function(){this.widget&&setTimeout(dojo.hitch(this.widget,function(){dojox.grid.util.fire(this,"focus")}),0)},_finish:function(a){this.inherited(arguments);dojox.grid.util.removeNode(this.widget.domNode);dojo.isIE&&dojo.setSelectable(this.widget.domNode,!0)}});a._Widget.markupFactory=function(b,c){a._Base.markupFactory(b,c);var d=dojo,e=d.trim(d.attr(b,"widgetProps")||""),f=d.trim(d.attr(b,"constraint")||""),g=d.trim(d.attr(b,"widgetClass")||
"");if(e)c.widgetProps=d.fromJson(e);if(f)c.constraint=d.fromJson(f);if(g)c.widgetClass=d.getObject(g)};dojo.declare("dojox.grid.cells.ComboBox",a._Widget,{widgetClass:dijit.form.ComboBox,getWidgetProps:function(a){var c=[];dojo.forEach(this.options,function(a){c.push({name:a,value:a})});var d=new dojo.data.ItemFileReadStore({data:{identifier:"name",items:c}});return dojo.mixin({},this.widgetProps||{},{value:a,store:d})},getValue:function(){var a=this.widget;a.set("displayedValue",a.get("displayedValue"));
return a.get("value")}});a.ComboBox.markupFactory=function(b,c){a._Widget.markupFactory(b,c);var d=dojo;if(d=d.trim(d.attr(b,"options")||"")){var e=d.split(",");if(e[0]!=d)c.options=e}};dojo.declare("dojox.grid.cells.DateTextBox",a._Widget,{widgetClass:dijit.form.DateTextBox,setValue:function(a,c){this.widget?this.widget.set("value",new Date(c)):this.inherited(arguments)},getWidgetProps:function(a){return dojo.mixin(this.inherited(arguments),{value:new Date(a)})}});a.DateTextBox.markupFactory=function(b,
c){a._Widget.markupFactory(b,c)};dojo.declare("dojox.grid.cells.CheckBox",a._Widget,{widgetClass:dijit.form.CheckBox,getValue:function(){return this.widget.checked},setValue:function(a,c){this.widget&&this.widget.attributeMap.checked?this.widget.set("checked",c):this.inherited(arguments)},sizeWidget:function(){}});a.CheckBox.markupFactory=function(b,c){a._Widget.markupFactory(b,c)};dojo.declare("dojox.grid.cells.Editor",a._Widget,{widgetClass:dijit.Editor,getWidgetProps:function(){return dojo.mixin({},
this.widgetProps||{},{height:this.widgetHeight||"100px"})},createWidget:function(a,c){var d=new this.widgetClass(this.getWidgetProps(c),a);dojo.connect(d,"onLoad",dojo.hitch(this,"populateEditor"));return d},formatNode:function(a,c,d){this.content=c;this.inherited(arguments);if(dojo.isMoz){var e=this.widget;e.open();this.widgetToolbar&&dojo.place(e.toolbar.domNode,e.editingArea,"before")}},populateEditor:function(){this.widget.set("value",this.content);this.widget.placeCursorAtEnd()}});a.Editor.markupFactory=
function(b,c){a._Widget.markupFactory(b,c);var d=dojo.trim(dojo.attr(b,"widgetHeight")||"");if(d)d!="auto"&&d.substr(-2)!="em"&&(d=parseInt(d,10)+"px"),c.widgetHeight=d}}());
dojo._hasResource["dojox.layout.ExpandoPane"]||(dojo._hasResource["dojox.layout.ExpandoPane"]=!0,dojo.provide("dojox.layout.ExpandoPane"),dojo.experimental("dojox.layout.ExpandoPane"),dojo.declare("dojox.layout.ExpandoPane",[dijit.layout.ContentPane,dijit._Templated,dijit._Contained,dijit._Container],{attributeMap:dojo.delegate(dijit.layout.ContentPane.prototype.attributeMap,{title:{node:"titleNode",type:"innerHTML"}}),templateString:dojo.cache("dojox.layout","resources/ExpandoPane.html",'<div class="dojoxExpandoPane">\n\t<div dojoAttachPoint="titleWrapper" class="dojoxExpandoTitle">\n\t\t<div class="dojoxExpandoIcon" dojoAttachPoint="iconNode" dojoAttachEvent="onclick:toggle"><span class="a11yNode">X</span></div>\t\t\t\n\t\t<span class="dojoxExpandoTitleNode" dojoAttachPoint="titleNode">${title}</span>\n\t</div>\n\t<div class="dojoxExpandoWrapper" dojoAttachPoint="cwrapper" dojoAttachEvent="ondblclick:_trap">\n\t\t<div class="dojoxExpandoContent" dojoAttachPoint="containerNode"></div>\n\t</div>\n</div>\n'),
easeOut:"dojo._DefaultEasing",easeIn:"dojo._DefaultEasing",duration:420,startExpanded:!0,previewOpacity:0.75,previewOnDblClick:!1,baseClass:"dijitExpandoPane",postCreate:function(){this.inherited(arguments);this._animConnects=[];this._isHorizontal=!0;if(dojo.isString(this.easeOut))this.easeOut=dojo.getObject(this.easeOut);if(dojo.isString(this.easeIn))this.easeIn=dojo.getObject(this.easeIn);var a="",b=!this.isLeftToRight();if(this.region){switch(this.region){case "trailing":case "right":a=b?"Left":
"Right";break;case "leading":case "left":a=b?"Right":"Left";break;case "top":a="Top";break;case "bottom":a="Bottom"}dojo.addClass(this.domNode,"dojoxExpando"+a);dojo.addClass(this.iconNode,"dojoxExpandoIcon"+a);this._isHorizontal=/top|bottom/.test(this.region)}dojo.style(this.domNode,{overflow:"hidden",padding:0});this.connect(this.domNode,"ondblclick",this.previewOnDblClick?"preview":"toggle");this.previewOnDblClick&&this.connect(this.getParent(),"_layoutChildren",dojo.hitch(this,function(){this._isonlypreview=
!1}))},_startupSizes:function(){this._container=this.getParent();this._closedSize=this._titleHeight=dojo.marginBox(this.titleWrapper).h;if(this.splitter){var a=this.id;dijit.registry.filter(function(b){return b&&b.child&&b.child.id==a}).forEach(dojo.hitch(this,function(a){this.connect(a,"_stopDrag","_afterResize")}))}this._currentSize=dojo.contentBox(this.domNode);this._showSize=this._currentSize[this._isHorizontal?"h":"w"];this._setupAnims();this.startExpanded?this._showing=!0:(this._showing=!1,
this._hideWrapper(),this._hideAnim.gotoPercent(99,!0));this._hasSizes=!0},_afterResize:function(){var a=this._currentSize;this._currentSize=dojo.marginBox(this.domNode);var b=this._currentSize[this._isHorizontal?"h":"w"];if(b>this._titleHeight){if(!this._showing)this._showing=!this._showing,this._showEnd();this._showSize=b;this._setupAnims()}else this._showSize=a[this._isHorizontal?"h":"w"],this._showing=!1,this._hideWrapper(),this._hideAnim.gotoPercent(89,!0)},_setupAnims:function(){dojo.forEach(this._animConnects,
dojo.disconnect);var a={node:this.domNode,duration:this.duration},b={},c={},d=this._isHorizontal?"height":"width";b[d]={end:this._showSize};c[d]={end:this._closedSize};this._showAnim=dojo.animateProperty(dojo.mixin(a,{easing:this.easeIn,properties:b}));this._hideAnim=dojo.animateProperty(dojo.mixin(a,{easing:this.easeOut,properties:c}));this._animConnects=[dojo.connect(this._showAnim,"onEnd",this,"_showEnd"),dojo.connect(this._hideAnim,"onEnd",this,"_hideEnd")]},preview:function(){if(!this._showing)this._isonlypreview=
!this._isonlypreview;this.toggle()},toggle:function(){this._showing?(this._hideWrapper(),this._showAnim&&this._showAnim.stop(),this._hideAnim.play()):(this._hideAnim&&this._hideAnim.stop(),this._showAnim.play());this._showing=!this._showing},_hideWrapper:function(){dojo.addClass(this.domNode,"dojoxExpandoClosed");dojo.style(this.cwrapper,{visibility:"hidden",opacity:"0",overflow:"hidden"})},_showEnd:function(){dojo.style(this.cwrapper,{opacity:0,visibility:"visible"});dojo.anim(this.cwrapper,{opacity:this._isonlypreview?
this.previewOpacity:1},227);dojo.removeClass(this.domNode,"dojoxExpandoClosed");this._isonlypreview?(this._previewShowing=!0,this.resize()):setTimeout(dojo.hitch(this._container,"layout"),15)},_hideEnd:function(){this._isonlypreview?this._previewShowing=!1:setTimeout(dojo.hitch(this._container,"layout"),25);this._isonlypreview=!1},resize:function(a){this._hasSizes||this._startupSizes(a);var b=dojo.marginBox(this.domNode);this._contentBox={w:a&&"w"in a?a.w:b.w,h:(a&&"h"in a?a.h:b.h)-this._titleHeight};
dojo.style(this.containerNode,"height",this._contentBox.h+"px");a&&dojo.marginBox(this.domNode,a);this._layoutChildren()},_trap:function(a){dojo.stopEvent(a)}}));
dojo._hasResource["dojox.html._base"]||(dojo._hasResource["dojox.html._base"]=!0,dojo.provide("dojox.html._base"),function(){if(dojo.isIE)var a=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;var b=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g,c=dojox.html._adjustCssPaths=function(c,d){if(d&&c)return a&&(d=d.replace(a,function(a,b,d,e,f){return b+(new dojo._Url(c,"./"+e)).toString()+
f})),d.replace(b,function(a,b,d,e,f,g){return d?'@import "'+(new dojo._Url(c,"./"+d)).toString()+'"'+g:"url("+(new dojo._Url(c,"./"+f)).toString()+")"+g})},d=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi,e=dojox.html._adjustHtmlPaths=function(a,b){var e=a||"./";return b.replace(d,function(a,b,d,f,g,h,j,k){return b+(d?d+"="+f+(new dojo._Url(e,g)).toString()+f:"style="+h+c(e,j)+h)+k})},f=dojox.html._snarfStyles=function(a,b,d){d.attributes=[];return b.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,
function(b,e,f,g,h,k){b=(e||g||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");f?f=d.push(a?c(a,f):f):(f=d.push('@import "'+k+'";'),b=b.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,""));if(b){b=b.split(/\s+/);k={};g=0;for(h=b.length;g<h;g++)e=b[g].split("="),k[e[0]]=e[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");d.attributes[f-1]=k}return""})},g=dojox.html._snarfScripts=function(a,b){function c(a){b.downloadRemote&&(a=a.replace(/&([a-z0-9#]+);/g,function(a,b){switch(b){case "amp":return"&";case "gt":return">";
case "lt":return"<";default:return b.charAt(0)=="#"?String.fromCharCode(b.substring(1)):"&"+b+";"}}),dojo.xhrGet({url:a,sync:!0,load:function(a){b.code+=a+";"},error:b.errBack}))}b.code="";a=a.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(a){return a.replace(/<(\/?)script\b/ig,"&lt;$1Script")});return a.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))(?:[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?)*>([\s\S]*?)<\/script>/gi,function(a,d,e,f){e?c(e):b.code+=f;return""})},h=dojox.html.evalInGlobal=
function(a,b){var b=b||dojo.doc.body,c=b.ownerDocument.createElement("script");c.type="text/javascript";b.appendChild(c);c.text=a};dojo.declare("dojox.html._ContentSetter",[dojo.html._ContentSetter],{adjustPaths:!1,referencePath:".",renderStyles:!1,executeScripts:!1,scriptHasHooks:!1,scriptHookReplacement:null,_renderStyles:function(a){this._styleNodes=[];for(var b,c,d,e=this.node.ownerDocument,f=e.getElementsByTagName("head")[0],g=0,h=a.length;g<h;g++){d=a[g];c=a.attributes[g];b=e.createElement("style");
b.setAttribute("type","text/css");for(var r in c)b.setAttribute(r,c[r]);this._styleNodes.push(b);f.appendChild(b);b.styleSheet?b.styleSheet.cssText=d:b.appendChild(e.createTextNode(d))}},empty:function(){this.inherited("empty",arguments);this._styles=[]},onBegin:function(){this.inherited("onBegin",arguments);var a=this.content,b=this._styles;if(dojo.isString(a)){this.adjustPaths&&this.referencePath&&(a=e(this.referencePath,a));if(this.renderStyles||this.cleanContent)a=f(this.referencePath,a,b);if(this.executeScripts){var c=
this,b={downloadRemote:!0,errBack:function(a){c._onError.call(c,"Exec",'Error downloading remote script in "'+c.id+'"',a)}},a=g(a,b);this._code=b.code}}this.content=a},onEnd:function(){var a=this._code,b=this._styles;if(this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)dojo.destroy(this._styleNodes.pop());this.renderStyles&&b&&b.length&&this._renderStyles(b);if(this.executeScripts&&a){this.cleanContent&&(a=a.replace(/(<\!--|(?:\/\/)?--\>|<!\[CDATA\[|\]\]>)/g,""));this.scriptHasHooks&&
(a=a.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement));try{h(a,this.node)}catch(c){this._onError("Exec","Error eval script in "+this.id+", "+c.message,c)}}this.inherited("onEnd",arguments)},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)dojo.destroy(this._styleNodes.pop());delete this._styleNodes;dojo.mixin(this,dojo.getObject(this.declaredClass).prototype)}});dojox.html.set=function(a,b,c){return c?
(new dojox.html._ContentSetter(dojo.mixin(c,{content:b,node:a}))).set():dojo.html._setNodeContent(a,b,!0)}}());
dojo._hasResource["dojox.layout.ContentPane"]||(dojo._hasResource["dojox.layout.ContentPane"]=!0,dojo.provide("dojox.layout.ContentPane"),dojo.declare("dojox.layout.ContentPane",dijit.layout.ContentPane,{adjustPaths:!1,cleanContent:!1,renderStyles:!1,executeScripts:!0,scriptHasHooks:!1,constructor:function(){this.ioArgs={};this.ioMethod=dojo.xhrGet},onExecError:function(){},_setContent:function(a){var b=this._contentSetter;if(!(b&&b instanceof dojox.html._ContentSetter))b=this._contentSetter=new dojox.html._ContentSetter({node:this.containerNode,
_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})});this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+
this.id+"')"};this.inherited("_setContent",arguments)}}));
dojo._hasResource["dojox.layout.ResizeHandle"]||(dojo._hasResource["dojox.layout.ResizeHandle"]=!0,dojo.provide("dojox.layout.ResizeHandle"),dojo.experimental("dojox.layout.ResizeHandle"),dojo.declare("dojox.layout.ResizeHandle",[dijit._Widget,dijit._Templated],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:!1,activeResizeClass:"dojoxResizeHandleClone",animateSizing:!0,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:!1,maxHeight:0,maxWidth:0,fixedAspect:!1,
intermediateChanges:!1,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:'<div dojoAttachPoint="resizeHandle" class="dojoxResizeHandle"><div></div></div>',postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(this.activeResize)this.animateSizing=!1;else if(this._resizeHelper=dijit.byId("dojoxGlobalResizeHelper"),!this._resizeHelper)this._resizeHelper=(new dojox.layout._ResizeHelper({id:"dojoxGlobalResizeHelper"})).placeAt(dojo.body()),dojo.addClass(this._resizeHelper.domNode,
this.activeResizeClass);if(!this.minSize)this.minSize={w:this.minWidth,h:this.minHeight};if(this.constrainMax)this.maxSize={w:this.maxWidth,h:this.maxHeight};this._resizeX=this._resizeY=!1;var a=dojo.partial(dojo.addClass,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=!0;a("dojoxResizeNW");break;case "x":this._resizeX=!0;a("dojoxResizeW");break;case "y":this._resizeY=!0,a("dojoxResizeN")}},_beginSizing:function(a){if(this._isSizing)return!1;dojo.publish(this.startTopic,
[this]);this.targetDomNode=(this.targetWidget=dijit.byId(this.targetId))?this.targetWidget.domNode:dojo.byId(this.targetId);if(this.targetContainer)this.targetDomNode=this.targetContainer;if(!this.targetDomNode)return!1;if(!this.activeResize){var b=dojo.position(this.targetDomNode,!0);console.log(b);console.log(dojo.window.getBox());this._resizeHelper.resize({l:b.x,t:b.y,w:b.w,h:b.h});this._resizeHelper.show()}this._isSizing=!0;this.startPoint={x:a.clientX,y:a.clientY};var c=this.targetWidget?dojo.marginBox(this.targetDomNode):
dojo.contentBox(this.targetDomNode);this.startSize={w:c.w,h:c.h};if(this.fixedAspect)c.w>c.h?(b="w",c=c.w/c.h):(b="h",c=c.h/c.w),this._aspect={prop:b},this._aspect[b]=c;this._pconnects=[];this._pconnects.push(dojo.connect(dojo.doc,"onmousemove",this,"_updateSizing"));this._pconnects.push(dojo.connect(dojo.doc,"onmouseup",this,"_endSizing"));dojo.stopEvent(a)},_updateSizing:function(a){if(this.activeResize)this._changeSizing(a);else{var b=this._getNewCoords(a);if(b===!1)return;this._resizeHelper.resize(b)}a.preventDefault()},
_getNewCoords:function(a){try{if(!a.clientX||!a.clientY)return!1}catch(b){return!1}this._activeResizeLastEvent=a;var c=this.isLeftToRight()?this.startPoint.x-a.clientX:a.clientX-this.startPoint.x,a=this.startPoint.y-a.clientY;return this._checkConstraints(this.startSize.w-(this._resizeX?c:0),this.startSize.h-(this._resizeY?a:0))},_checkConstraints:function(a,b){if(this.minSize){var c=this.minSize;if(a<c.w)a=c.w;if(b<c.h)b=c.h}if(this.constrainMax&&this.maxSize){c=this.maxSize;if(a>c.w)a=c.w;if(b>
c.h)b=c.h}this.fixedAspect&&(c=this._aspect[this._aspect.prop],a<b?b=a*c:b<a&&(a=b*c));return{w:a,h:b}},_changeSizing:function(a){var b=this._getNewCoords(a);if(b!==!1&&(this.targetWidget&&dojo.isFunction(this.targetWidget.resize)?this.targetWidget.resize(b):this.animateSizing?dojo.fx[this.animateMethod]([dojo.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:b.w}},duration:this.animateDuration}),dojo.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,
end:b.h}},duration:this.animateDuration})]).play():dojo.style(this.targetDomNode,{width:b.w+"px",height:b.h+"px"}),this.intermediateChanges))this.onResize(a)},_endSizing:function(a){dojo.forEach(this._pconnects,dojo.disconnect);var b=dojo.partial(dojo.publish,this.endTopic,[this]);this.activeResize?b():(this._resizeHelper.hide(),this._changeSizing(a),setTimeout(b,this.animateDuration+15));this._isSizing=!1;this.onResize(a)},onResize:function(){}}),dojo.declare("dojox.layout._ResizeHelper",dijit._Widget,
{show:function(){dojo.fadeIn({node:this.domNode,duration:120,beforeBegin:function(a){dojo.style(a,"display","")}}).play()},hide:function(){dojo.fadeOut({node:this.domNode,duration:250,onEnd:function(a){dojo.style(a,"display","none")}}).play()},resize:function(a){dojo.marginBox(this.domNode,a)}}));
dojo._hasResource["dojox.layout.FloatingPane"]||(dojo._hasResource["dojox.layout.FloatingPane"]=!0,dojo.provide("dojox.layout.FloatingPane"),dojo.experimental("dojox.layout.FloatingPane"),dojo.declare("dojox.layout.FloatingPane",[dojox.layout.ContentPane,dijit._Templated],{closable:!0,dockable:!0,resizable:!1,maxable:!1,resizeAxis:"xy",title:"",dockTo:"",duration:400,contentClass:"dojoxFloatingPaneContent",_showAnim:null,_hideAnim:null,_dockNode:null,_restoreState:{},_allFPs:[],_startZ:100,templateString:dojo.cache("dojox.layout",
"resources/FloatingPane.html",'<div class="dojoxFloatingPane" id="${id}">\n\t<div tabindex="0" role="button" class="dojoxFloatingPaneTitle" dojoAttachPoint="focusNode">\n\t\t<span dojoAttachPoint="closeNode" dojoAttachEvent="onclick: close" class="dojoxFloatingCloseIcon"></span>\n\t\t<span dojoAttachPoint="maxNode" dojoAttachEvent="onclick: maximize" class="dojoxFloatingMaximizeIcon">&thinsp;</span>\n\t\t<span dojoAttachPoint="restoreNode" dojoAttachEvent="onclick: _restore" class="dojoxFloatingRestoreIcon">&thinsp;</span>\t\n\t\t<span dojoAttachPoint="dockNode" dojoAttachEvent="onclick: minimize" class="dojoxFloatingMinimizeIcon">&thinsp;</span>\n\t\t<span dojoAttachPoint="titleNode" class="dijitInline dijitTitleNode"></span>\n\t</div>\n\t<div dojoAttachPoint="canvas" class="dojoxFloatingPaneCanvas">\n\t\t<div dojoAttachPoint="containerNode" role="region" tabindex="-1" class="${contentClass}">\n\t\t</div>\n\t\t<span dojoAttachPoint="resizeHandle" class="dojoxFloatingResizeHandle"></span>\n\t</div>\n</div>\n'),
attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:{type:"innerHTML",node:"titleNode"}}),postCreate:function(){this.inherited(arguments);new dojo.dnd.Moveable(this.domNode,{handle:this.focusNode});if(!this.dockable)this.dockNode.style.display="none";if(!this.closable)this.closeNode.style.display="none";if(!this.maxable)this.maxNode.style.display="none",this.restoreNode.style.display="none";this.resizable?this.domNode.style.width=dojo.marginBox(this.domNode).w+"px":this.resizeHandle.style.display=
"none";this._allFPs.push(this);this.domNode.style.position="absolute";this.bgIframe=new dijit.BackgroundIframe(this.domNode);this._naturalState=dojo.coords(this.domNode)},startup:function(){if(!this._started){this.inherited(arguments);if(this.resizable)dojo.isIE?this.canvas.style.overflow="auto":this.containerNode.style.overflow="auto",this._resizeHandle=new dojox.layout.ResizeHandle({targetId:this.id,resizeAxis:this.resizeAxis},this.resizeHandle);if(this.dockable){var a=this.dockTo;this.dockTo=this.dockTo?
dijit.byId(this.dockTo):dijit.byId("dojoxGlobalFloatingDock");if(!this.dockTo){var b;a?(b=a,a=dojo.byId(a)):(a=dojo.create("div",null,dojo.body()),dojo.addClass(a,"dojoxFloatingDockDefault"),b="dojoxGlobalFloatingDock");this.dockTo=new dojox.layout.Dock({id:b,autoPosition:"south"},a);this.dockTo.startup()}(this.domNode.style.display=="none"||this.domNode.style.visibility=="hidden")&&this.minimize()}this.connect(this.focusNode,"onmousedown","bringToTop");this.connect(this.domNode,"onmousedown","bringToTop");
this.resize(dojo.coords(this.domNode));this._started=!0}},setTitle:function(a){dojo.deprecated("pane.setTitle","Use pane.set('title', someTitle)","2.0");this.set("title",a)},close:function(){this.closable&&(dojo.unsubscribe(this._listener),this.hide(dojo.hitch(this,function(){this.destroyRecursive()})))},hide:function(a){dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,function(){this.domNode.style.display="none";this.domNode.style.visibility="hidden";this.dockTo&&this.dockable&&
this.dockTo._positionDock(null);a&&a()})}).play()},show:function(a){dojo.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:dojo.hitch(this,function(){this.domNode.style.display="";this.domNode.style.visibility="visible";this.dockTo&&this.dockable&&this.dockTo._positionDock(null);typeof a=="function"&&a();this._isDocked=!1;if(this._dockNode)this._dockNode.destroy(),this._dockNode=null})}).play();this.resize(dojo.coords(this.domNode));this._onShow()},minimize:function(){this._isDocked||this.hide(dojo.hitch(this,
"_dock"))},maximize:function(){if(!this._maximized)this._naturalState=dojo.position(this.domNode),this._isDocked&&(this.show(),setTimeout(dojo.hitch(this,"maximize"),this.duration)),dojo.addClass(this.focusNode,"floatingPaneMaximized"),this.resize(dojo.window.getBox()),this._maximized=!0},_restore:function(){if(this._maximized)this.resize(this._naturalState),dojo.removeClass(this.focusNode,"floatingPaneMaximized"),this._maximized=!1},_dock:function(){if(!this._isDocked&&this.dockable)this._dockNode=
this.dockTo.addNode(this),this._isDocked=!0},resize:function(a){this._currentState=a=a||this._naturalState;var b=this.domNode.style;if("t"in a)b.top=a.t+"px";if("l"in a)b.left=a.l+"px";b.width=a.w+"px";b.height=a.h+"px";a={l:0,t:0,w:a.w,h:a.h-this.focusNode.offsetHeight};dojo.marginBox(this.canvas,a);this._checkIfSingleChild();this._singleChild&&this._singleChild.resize&&this._singleChild.resize(a)},bringToTop:function(){var a=dojo.filter(this._allFPs,function(a){return a!==this},this);a.sort(function(a,
c){return a.domNode.style.zIndex-c.domNode.style.zIndex});a.push(this);dojo.forEach(a,function(a,c){a.domNode.style.zIndex=this._startZ+c*2;dojo.removeClass(a.domNode,"dojoxFloatingPaneFg")},this);dojo.addClass(this.domNode,"dojoxFloatingPaneFg")},destroy:function(){this._allFPs.splice(dojo.indexOf(this._allFPs,this),1);this._resizeHandle&&this._resizeHandle.destroy();this.inherited(arguments)}}),dojo.declare("dojox.layout.Dock",[dijit._Widget,dijit._Templated],{templateString:'<div class="dojoxDock"><ul dojoAttachPoint="containerNode" class="dojoxDockList"></ul></div>',
_docked:[],_inPositioning:!1,autoPosition:!1,addNode:function(a){var b=dojo.create("li",null,this.containerNode),a=new dojox.layout._DockNode({title:a.title,paneRef:a},b);a.startup();return a},startup:function(){if(this.id=="dojoxGlobalFloatingDock"||this.isFixedDock)this.connect(window,"onresize","_positionDock"),this.connect(window,"onscroll","_positionDock"),dojo.isIE&&this.connect(this.domNode,"onresize","_positionDock");this._positionDock(null);this.inherited(arguments)},_positionDock:function(){this._inPositioning||
this.autoPosition=="south"&&setTimeout(dojo.hitch(this,function(){this._inPositiononing=!0;var a=dojo.window.getBox(),b=this.domNode.style;b.left=a.l+"px";b.width=a.w-2+"px";b.top=a.h+a.t-this.domNode.offsetHeight+"px";this._inPositioning=!1}),125)}}),dojo.declare("dojox.layout._DockNode",[dijit._Widget,dijit._Templated],{title:"",paneRef:null,templateString:'<li dojoAttachEvent="onclick: restore" class="dojoxDockNode"><span dojoAttachPoint="restoreNode" class="dojoxDockRestoreButton" dojoAttachEvent="onclick: restore"></span><span class="dojoxDockTitleNode" dojoAttachPoint="titleNode">${title}</span></li>',
restore:function(){this.paneRef.show();this.paneRef.bringToTop();this.destroy()}}));
dojo._hasResource["dojox.widget.Toaster"]||(dojo._hasResource["dojox.widget.Toaster"]=!0,dojo.provide("dojox.widget.Toaster"),dojo.declare("dojox.widget.Toaster",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitToasterClip" dojoAttachPoint="clipNode"><div class="dijitToasterContainer" dojoAttachPoint="containerNode" dojoAttachEvent="onclick:onSelect"><div class="dijitToasterContent" dojoAttachPoint="contentNode"></div></div></div>',messageTopic:"",messageTypes:{MESSAGE:"message",
WARNING:"warning",ERROR:"error",FATAL:"fatal"},defaultType:"message",positionDirection:"br-up",positionDirectionTypes:["br-up","br-left","bl-up","bl-right","tr-down","tr-left","tl-down","tl-right"],duration:2E3,slideDuration:500,separator:"<hr></hr>",postCreate:function(){this.inherited(arguments);this.hide();dojo.body().appendChild(this.domNode);this.messageTopic&&dojo.subscribe(this.messageTopic,this,"_handleMessage")},_handleMessage:function(a){dojo.isString(a)?this.setContent(a):this.setContent(a.message,
a.type,a.duration)},_capitalize:function(a){return a.substring(0,1).toUpperCase()+a.substring(1)},setContent:function(a,b,c){c=c||this.duration;if(this.slideAnim&&(this.slideAnim.status()!="playing"&&this.slideAnim.stop(),this.slideAnim.status()=="playing"||this.fadeAnim&&this.fadeAnim.status()=="playing")){setTimeout(dojo.hitch(this,function(){this.setContent(a,b,c)}),50);return}for(var d in this.messageTypes)dojo.removeClass(this.containerNode,"dijitToaster"+this._capitalize(this.messageTypes[d]));
dojo.style(this.containerNode,"opacity",1);this._setContent(a);dojo.addClass(this.containerNode,"dijitToaster"+this._capitalize(b||this.defaultType));this.show();d=dojo.marginBox(this.containerNode);this._cancelHideTimer();if(this.isVisible)this._placeClip(),this._stickyMessage||this._setHideTimer(c);else{var e=this.containerNode.style,f=this.positionDirection;if(f.indexOf("-up")>=0)e.left="0px",e.top=d.h+10+"px";else if(f.indexOf("-left")>=0)e.left=d.w+10+"px",e.top="0px";else if(f.indexOf("-right")>=
0)e.left=0-d.w-10+"px",e.top="0px";else if(f.indexOf("-down")>=0)e.left="0px",e.top=0-d.h-10+"px";else throw Error(this.id+".positionDirection is invalid: "+f);this.slideAnim=dojo.fx.slideTo({node:this.containerNode,top:0,left:0,duration:this.slideDuration});this.connect(this.slideAnim,"onEnd",function(){this.fadeAnim=dojo.fadeOut({node:this.containerNode,duration:1E3});this.connect(this.fadeAnim,"onEnd",function(){this.isVisible=!1;this.hide()});this._setHideTimer(c);this.connect(this,"onSelect",
function(){this._cancelHideTimer();this._stickyMessage=!1;this.fadeAnim.play()});this.isVisible=!0});this.slideAnim.play()}},_setContent:function(a){dojo.isFunction(a)?a(this):(a&&this.isVisible&&(a=this.contentNode.innerHTML+this.separator+a),this.contentNode.innerHTML=a)},_cancelHideTimer:function(){if(this._hideTimer)clearTimeout(this._hideTimer),this._hideTimer=null},_setHideTimer:function(a){this._cancelHideTimer();a>0?(this._cancelHideTimer(),this._hideTimer=setTimeout(dojo.hitch(this,function(){if(this.bgIframe&&
this.bgIframe.iframe)this.bgIframe.iframe.style.display="none";this._hideTimer=null;this._stickyMessage=!1;this.fadeAnim.play()}),a)):this._stickyMessage=!0},_placeClip:function(){var a=dojo.window.getBox(),b=dojo.marginBox(this.containerNode),c=this.clipNode.style;c.height=b.h+"px";c.width=b.w+"px";var d=this.positionDirection;if(d.match(/^t/))c.top=a.t+"px";else if(d.match(/^b/))c.top=a.h-b.h-2+a.t+"px";if(d.match(/^[tb]r-/))c.left=a.w-b.w-1-a.l+"px";else if(d.match(/^[tb]l-/))c.left="0px";c.clip=
"rect(0px, "+b.w+"px, "+b.h+"px, 0px)";if(dojo.isIE){if(!this.bgIframe)this.clipNode.id=dijit.getUniqueId("dojox_widget_Toaster_clipNode"),this.bgIframe=new dijit.BackgroundIframe(this.clipNode);if(a=this.bgIframe.iframe)a.style.display="block"}},onSelect:function(){},show:function(){dojo.style(this.domNode,"display","block");this._placeClip();if(!this._scrollConnected)this._scrollConnected=dojo.connect(window,"onscroll",this,this._placeClip)},hide:function(){dojo.style(this.domNode,"display","none");
if(this._scrollConnected)dojo.disconnect(this._scrollConnected),this._scrollConnected=!1;dojo.style(this.containerNode,"opacity",1)}}));dojo.i18n._preloadLocalizations("dojo.nls.phprojekt",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nb","nl","nl-nl","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
